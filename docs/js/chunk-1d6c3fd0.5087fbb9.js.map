{"version":3,"sources":["webpack:///./node_modules/animated-number-vue/dist/AnimatedNumber.umd.min.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack:///./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack:///./node_modules/probe.gl/dist/esm/env/globals.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./src/views/RealHome.vue?da8d","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/globals.js","webpack:///./node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","webpack:///./src/components/Auth.vue?0f9b","webpack:///./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack:///./node_modules/probe.gl/dist/es5/env/globals.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack:///./src/assets/images/gmail.png","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack:///./node_modules/probe.gl/env.js","webpack:///./node_modules/hammerjs/hammer.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/probe.gl/dist/es5/env/index.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack:///./src/views/RealHome.vue?33df","webpack:///./node_modules/probe.gl/dist/esm/utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack:///./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack:///./node_modules/probe.gl/dist/esm/utils/color.js","webpack:///./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack:///./node_modules/probe.gl/dist/esm/utils/assert.js","webpack:///./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/probe.gl/dist/esm/lib/log.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/log.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack:///./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/assert.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/get-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-viewport.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/texture.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-defaults.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/buffer-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterators/async-iteration.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-string-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-array-buffer-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-blob-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-stream-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loader-context.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer-vertex.glsl.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer-fragment.glsl.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","webpack:///./node_modules/mjolnir.js/dist/esm/constants.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/move-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/key-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-utils.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","webpack:///./node_modules/mjolnir.js/dist/esm/event-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack:///./node_modules/@deck.gl/google-maps/dist/esm/utils.js","webpack:///./node_modules/@deck.gl/google-maps/dist/esm/google-maps-overlay.js","webpack:///./src/assets/style/map-style.js","webpack:///./src/components/Auth.vue?6da9","webpack:///./src/util/regExp.js","webpack:///src/components/Auth.vue","webpack:///./src/components/Auth.vue?aa48","webpack:///./src/components/Auth.vue?6e3f","webpack:///src/views/RealHome.vue","webpack:///./src/views/RealHome.vue?8c00","webpack:///./src/views/RealHome.vue?575b","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/validators.js"],"names":["t","e","module","exports","self","n","r","o","i","l","call","m","c","d","Object","defineProperty","configurable","enumerable","get","__esModule","prototype","hasOwnProperty","p","s","0","A5qe","a","scope","defineProperties","set","TypeError","Array","value","getGlobal","window","global","this","SYMBOL_PREFIX","initSymbol","Symbol","symbolCounter_","initSymbolIterator","iterator","writable","arrayIterator","iteratorPrototype","length","done","next","array","iteratorFromArray","String","polyfill","split","u","apply","L","col","document","querySelectorAll","arguments","push","reduce","concat","arr","str","NodeList","HTMLCollection","slice","some","und","f","replace","exec","parseInt","indexOf","fnc","target","id","total","style","getComputedStyle","getPropertyValue","toLowerCase","y","dom","$","getAttribute","svg","g","transform","h","v","parseFloat","b","Math","sqrt","pow","x","points","numberOfItems","getItem","w","getTotalLength","tagName","PI","S","el","getPointAtLength","property","atan2","A","pth","totalLength","rgb","hex","hsl","substr","test","original","numbers","match","map","Number","strings","_","O","M","obj","duration","delay","P","I","R","X","j","tweens","name","to","from","start","end","offset","easing","elasticity","min","max","isPath","isColor","round","F","type","animatable","C","k","N","V","targets","children","animatables","animations","E","Promise","reversed","isNaN","q","currentValue","keys","T","body","join","currentTime","progress","remaining","seek","began","direction","pause","completed","reset","loop","paused","tick","speed","Y","splice","play","Z","B","reverse","restart","finished","autoplay","update","begin","run","complete","isArray","toString","SVGElement","nodeType","Float32Array","abs","sin","asin","In","Out","InOut","linear","forEach","css","attribute","setAttribute","object","requestAnimationFrame","cancelAnimationFrame","version","running","remove","getValue","path","setDashoffset","bezier","easings","timeline","add","random","floor","DuR2","Function","eval","vgs7","props","default","required","formatValue","data","animatedValue","mounted","animateValue","watch","methods","$createElement","_self","_c","domProps","innerHTML","_s","options","render","staticRenderFns","_compiled","functional","_scopeId","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","_injectStyles","beforeCreate","getHiResTimestamp","timestamp","performance","now","process","hrtime","timeParts","Date","polyfillContext","gl","luma","polyfilled","initializeExtensions","installPolyfills","installOverrides","target2","global_","extensions","EXTENSIONS","getSupportedExtensions","extension","getExtension","key","originalFunc","bind","polyfills","getOwnPropertyNames","polyfillExtension","defaults","meta","suffix","ext","extKey","args","_interopRequireDefault","isMobile","getBrowser","_globals","_isBrowser","_isElectron","orientation","mockUserAgent","navigator_","navigator","userAgent","isMSIE","isTrident","chrome","safari","mozInnerScreenX","globals","isBrowser","browser","matches","isElectron","versions","Boolean","electron","realUserAgent","glErrorShadow","error","msg","console","log","synthesizeGLError","err","opt_msg","undefined","wrapGLError","getError","WebGLVertexArrayObjectOES","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","enabled","buffer","size","normalized","stride","cached","recache","OESVertexArrayObject","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","pname","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","index","vao","currentArrayBuffer","indx","instrumentExtension","canvas","addEventListener","reset_","polyfillVertexArrayObject","createVertexArray","original_getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","contextWasLost","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","window_","process_","create","out","dot","cross","ax","ay","az","bx","by","bz","transformMat4","z","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","rad","cos","rotateY","rotateZ","angle","mag1","mag2","mag","cosine","acos","vec","assert","string","printRowMajor","row","RANK","ELEMENTS","columnIndex","result","fill","firstIndex","columnVector","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","multiply","b0","b1","b2","b3","translate","rotate","axis","b12","b20","b21","b22","len","hypot","fromQuat","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","tan","Infinity","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","super","copy","check","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","_computeInfinitePerspectiveOffCenter","column0Row0","column1Row1","column2Row0","column2Row1","column2Row2","column2Row3","column3Row2","focalDistance","Error","halfY","fov","scaleResult","scale","getScale","inverseScale0","inverseScale1","inverseScale2","radians","rx","ry","rz","factor","vector","transformAsPoint","vec3","transformAsVector","OES_element_index","WEBGL_draw_buffers","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_texture_filter_anisotropic","WEBGL_debug_renderer_info","GL_FRAGMENT_SHADER_DERIVATIVE_HINT","GL_DONT_CARE","GL_GPU_DISJOINT_EXT","GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT","GL_UNMASKED_VENDOR_WEBGL","GL_UNMASKED_RENDERER_WEBGL","getWebGL2ValueOrZero","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","getParameterPolyfill","originalGetParameter","limit","OES_vertex_array_object","ANGLE_instanced_arrays","ERR_VAO_NOT_SUPPORTED","getExtensionData","webgl2","WEBGL2_CONTEXT_POLYFILLS","deleteVertexArray","bindVertexArray","isVertexArray","location","divisor","drawElementsInstanced","drawArraysInstanced","drawBuffers","createQuery","deleteQuery","beginQuery","endQuery","handle","getQueryObject","WEBGL2_CONTEXT_OVERRIDES","readBuffer","attachment","getProgramParameter","program","getInternalformatParameter","format","Int32Array","TEXTURE_MAX_ANISOTROPY_EXT","passiveSupported","removeEventListener","mathgl","config","condition","message","EPSILON","precision","toPrecision","ArrayBuffer","isView","DataView","duplicateArray","clone","func","clamp","lerp","ai","equals","epsilon","oldEpsilon","isFinite","debug","printTypes","printDegrees","ARRAY_TYPE","RANDOM","setParameters","values","compositeSetters","glConstant","setter","cache","state","compositeSetter","getParameters","parameters","getter","parameterKeys","resetParameters","withParameters","nocatch","_typeof2","self_","document_","console_","ERR_CONTEXT","ERR_WEBGL2","isWebGL","WebGLRenderingContext","WebGL2RenderingContext","_version","isWebGL2","getWebGL2Context","assertWebGLContext","assertWebGL2Context","GL_PARAMETER_DEFAULTS","enable","disable","hint","pixelStorei","drawFramebuffer","bindFramebuffer","readFramebuffer","GL_PARAMETER_SETTERS","blendColor","clearColor","colorMask","cullFace","clearDepth","depthFunc","depthRange","depthMask","frontFace","lineWidth","scissor","clearStencil","stencilMaskSeparate","viewport","framebuffer","blend","blendEquation","blendEquationSeparate","blendFunc","blendFuncSeparate","cull","depthTest","dither","derivativeHint","mipmapHint","polygonOffsetFill","polygonOffset","sampleCoverage","scissorTest","stencilTest","stencilMask","mask","backMask","stencilFunc","ref","backFunc","backRef","stencilFuncSeparate","stencilOp","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","capability","mode","modeRGB","modeAlpha","src","dst","srcRGB","dstRGB","srcAlpha","dstAlpha","depth","zNear","zFar","face","width","units","height","fail","zfail","zpass","isEnabled","GL_PARAMETER_GETTERS","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","isBrowserMainThread","isNode","exportName","assign","VENDOR_PREFIXES","TEST_ELEMENT","createElement","TYPE_FUNCTION","setTimeoutContext","fn","timeout","context","setTimeout","bindFn","invokeArrayArg","arg","each","deprecate","method","deprecationMessage","stack","warn","output","source","nextKey","extend","dest","merge","inherit","child","base","properties","childP","baseP","constructor","_super","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","removeEventListeners","hasParent","node","parentNode","inStr","find","trim","inArray","findByKey","toArray","uniqueArray","sort","results","prefixed","prefix","prop","camelProp","toUpperCase","_uniqueId","uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","inputTarget","domHandler","ev","init","createInputInstance","Type","inputClass","PointerEventInput","TouchInput","TouchMouseInput","MouseInput","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","computeInputData","emit","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offsetDelta","prevDelta","velocity","velocityX","velocityY","last","lastInterval","clientX","clientY","p1","p2","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","filter","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","isSyntheticEvent","dx","dy","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","getTouchActionProps","TouchAction","cleanTouchActions","actions","hasPanX","hasPanY","touchMap","cssSupports","CSS","supports","compute","touchAction","recognizers","recognizer","getTouchAction","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","Recognizer","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","preset","Manager","recognizeWith","dropRecognizeWith","requireFailure","dropRequireFailure","hasRequireFailures","canRecognizeWith","event","additionalEvent","tryEmit","canEmit","inputDataClone","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","handlers","oldCssProps","toggleCssProps","item","triggerDomEvent","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","stop","force","stopped","curRecognizer","existing","on","events","off","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","vectors","subtract","multiplyScalar","ORIGIN","origin","matrix4","matrix3","matrix2","quaternion","_typeof","_getBrowser","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","isObjectEmpty","deepArrayEqual","isArrayX","isArrayY","_extendableBuiltin","cls","ExtendableBuiltin","instance","Reflect","construct","setPrototypeOf","getPrototypeOf","__proto__","MathArray","arrayOrObject","fromObject","toObject","formatString","opts","minVector","maxVector","addScalar","scalar","validate","valid","_vm","_h","staticClass","_m","click","directives","rawName","viewIdx","expression","attrs","_v","today","menFormat","_e","kiloFormat","regist","authInfo","logOut","setShowAuthFlag","__VERSION__","getStorage","storage","setItem","removeItem","LocalStorage","defaultSettings","_loadConfiguration","configuration","updateConfiguration","serialized","JSON","stringify","serializedConfiguration","parse","formatTime","ms","formatted","toFixed","leftPad","padLength","repeat","formatImage","image","maxWidth","imageUrl","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","color","addColor","background","autobind","predefined","proto","propNames","originalConsole","info","DEFAULT_SETTINGS","level","noop","ONCE","once","getTableHeader","table","title","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","userData","seal","newLevel","setLevel","getLevel","newPriority","_getLogFunction","oldUsage","newUsage","logLevel","columns","tag","priority","_shouldLog","logImageInBrowser","logImageInNode","setting","timeEnd","collapsed","normalizeArguments","groupCollapsed","group","groupEnd","trace","normalizeLogLevel","getTotal","delta","getDelta","decorateMessage","resolvedLevel","shift","unshift","messageType","asciify","fit","then","img","Image","onload","nodeName","toDataURL","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","deprecated","PROJECTION_MODE","WEB_MERCATOR","GLOBE","WEB_MERCATOR_AUTO_OFFSET","UNIT","common","meters","pixels","EVENTS","panstart","panmove","panend","cssToDeviceRatio","clientWidth","canvasSizeInfo","drawingBufferWidth","cssToDevicePixels","cssPixel","yInvert","ratio","drawingBufferHeight","scalePixels","getDevicePixelRatio","useDevicePixels","windowRatio","devicePixelRatio","pixel","xHigh","yHigh","isPage","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","onError","targetCanvas","getCanvas","createBrowserContext","instrumentGLContext","logInfo","_instrumented","getVersion","copyState","makeDebugContext","getContextDebugInfo","vendorMasked","rendererMasked","vendorUnmasked","rendererUnmasked","vendor","renderer","shadingLanguageVersion","resizeGLContext","setDevicePixelRatio","resize","errorMessage","onCreateError","statusMessage","getContext","onContextLost","onContextRestored","isPageLoaded","readyState","getElementById","insertBefore","firstChild","webGL","driver","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","sampleSize","samples","addCount","subtractCount","_count","_samples","_checkSampling","_time","lastTiming","_startTime","_timerPending","addTime","lastSampleCount","lastSampleTime","stats","_initializeStats","_getOrCreate","stat","average","getAverageTime","hz","getHz","STARTUP_MESSAGE","Map","lumaStats","modules","nodeIO","getKeyValue","number","getKey","uidCounters","uid","isPowerOfTwo","isEmpty","stubRemovedMethods","className","methodNames","upgradeMessage","methodName","removed","ERR_RESOURCE_METHOD_UNDEFINED","gl2","_bound","_handle","_createHandle","byteLength","_addStats","deleteChildren","_deleteHandle","_removeStats","delete","funcOrHandle","_bindHandle","PARAMETERS","parameter","isWebgl2","parameterAvailable","webgl1Default","webgl2Default","defaultValue","_getParameter","_setParameter","setParameter","incrementCount","decrementCount","bytes","ERR_TYPE_DEDUCTION","getGLTypeFromTypedArray","arrayOrType","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","Int8Array","Int16Array","getTypedArrayFromGLType","glType","clamped","flipRows","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","subarray","copyWithin","newWidth","newHeight","newData","checkProps","propChecks","removedProps","deprecatedProps","replacedProps","propName","replacementProp","replacement","newProps","DEFAULT_ACCESSOR_VALUES","integer","PROP_CHECKS","instanced","isInstanced","accessor","ArrayType","BYTES_PER_ELEMENT","accessors","_assign","getBytesPerElement","getBytesPerVertex","DEBUG_DATA_LENGTH","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","initialize","usage","debugData","setAccessor","_setData","_setByteLength","bytesUsed","srcOffset","bufferSubData","_inferType","sourceBuffer","readOffset","writeOffset","copyBufferSubData","dstData","srcByteOffset","dstOffset","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","dstAvailableElementCount","dstElementCount","copyElementCount","getBufferSubData","bindBufferRange","bindBufferBase","isIndexedBuffer","getData","_trackDeallocatedMemory","_getTarget","bufferData","_trackAllocatedMemory","sourceElementOffset","getElementCount","createBuffer","deleteBuffer","getBufferParameter","reallocate","TEXTURE_FORMATS","dataFormat","DATA_FORMAT_CHANNELS","TYPE_SIZES","isFormatSupported","gl1","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","linearFiltering","supported","textureUnit","loaded","border","mipmaps","resolvedImageData","isVideo","HTMLVideoElement","HAVE_METADATA","_video","recreate","pixelStore","compressed","_deduceParameters","activeTexture","bindTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","video","lastTime","HAVE_CURRENT_DATA","setSubImageData","params","dataType","_getDataType","texImage2D","levelIndex","levelData","entries","compressedTexImage2D","channels","channelSize","ndarray","shape","compressedTexSubImage2D","texSubImage2D","textureFormat","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","ImageBitmap","videoWidth","videoHeight","createTexture","deleteTexture","getTexParameter","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","pathPrefix","loadImage","url","resolve","reject","onerror","crossOrigin","isSupported","EXT_FLOAT_WEBGL2","bpp","formats","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","getRenderbufferParameter","GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_COLOR_BUFFER_BIT","GL_COLOR","GL_DEPTH","GL_STENCIL","GL_DEPTH_STENCIL","ERR_ARGUMENTS","clear","stencil","clearFlags","clearBuffer","drawBuffer","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","glFormatToComponents","FACES","setCubeMapImageData","mipmapLevel","_subImage","imageDataMap","resolvedFaces","facePixels","lodLevel","unbind","imageData","setImageDataForFace","unpackFlipY","texImage3D","cloneTextureFrom","refTexture","overrides","TextureType","textureOptions","toFramebuffer","texture","attachments","readPixelsToArray","sourceX","sourceY","sourceFormat","sourceAttachment","sourceWidth","sourceHeight","sourceType","deleteFramebuffer","getFramebuffer","getPixelArray","prevHandle","readPixels","copyToDataUrl","targetMaxHeight","MAX_SAFE_INTEGER","createImageData","putImageData","pixelArray","components","ERR_MULTIPLE_RENDERTARGETS","colorBufferFloat","colorBufferHalfFloat","defaultFramebuffer","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","ownResources","_createDefaultAttachments","clearAttachments","checkStatus","resource","resizeAttachments","attach","_setReadBuffer","_setDrawBuffers","attachmentPoint","newAttachments","descriptor","_attachRenderbuffer","renderbuffer","layer","_attachTexture","_unattach","status","getStatus","_getFrameBufferStatus","checkFramebufferStatus","invalidateAll","invalidateFramebuffer","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","ATTACHMENT_PARAMETERS","getAttachmentParameter","attachmentName","getAttachmentParameters","open","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","caps","getFeatures","WEBGL2","EXT_sRGB","createFramebuffer","STATUS","FRAMEBUFFER_ATTACHMENT_PARAMETERS","FEATURES","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","checkFloat32ColorAttachment","testTexture","testFb","LOG_UNSUPPORTED_FEATURE","hasFeature","feature","hasFeatures","features","every","isFeatureSupported","cap","queryFeature","featureDefinition","ShaderAttribute","dataColumn","getBuffer","getAccessor","constantValue","elementOffset","glArrayFromType","Float64Array","TypedArrayManager","_pool","overAlloc","poolSize","setProps","typedArray","padding","maxCount","newSize","maxSize","newArray","_allocate","_release","sizeToAllocate","ceil","pool","findIndex","createMat4","getCameraPosition","viewMatrixInverse","getFrustumPlanes","viewProjectionMatrix","planes","getFrustumPlane","scratchVector","normal","fp64LowPart","fround","scratchArray","toDoublePrecisionArray","startIndex","endIndex","allocate","sourceIndex","targetIndex","getStride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","vertexOffset","resolveDoublePrecisionShaderAttributes","resolvedOptions","high","low","logicalType","doublePrecision","bufferType","isIndexed","defaultType","shaderAttributes","fp64","settings","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","setData","release","isBuffer64Bit","doubleShaderAttributeDefs","shaderAttributeDef","_normalizeValue","_normalizeConstant","hasChanged","_areValuesEqual","_checkExternalBuffer","byteOffset","requiredBufferSize","subData","startOffset","endOffset","numInstances","oldValue","illegalArrayType","value1","value2","EMPTY_ARRAY","placeholderArray","createIterable","startRow","endRow","iterable","objectInfo","isAsyncIterable","asyncIterator","getAccessorFromBuffer","startIndices","nested","elementStride","vertexCount","flatten","flattenArray","fillArray","copied","EMPTY","FULL","rangeList","range","newRangeList","insertPosition","range0","padArrayChunk","sourceLength","targetLength","datum","padArray","sourceStartIndices","targetStartIndices","getChunkData","chunk","nextSourceIndex","nextTargetIndex","DEFAULT_TRANSITION_SETTINGS","interpolation","spring","stiffness","damping","normalizeTransitionSettings","userSettings","layerSettings","getSourceBufferAttribute","getAttributeTypeFromSize","cycleBuffers","buffers","getAttributeBufferLength","multiplier","noAlloc","padBuffer","fromLength","fromStartIndices","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","getMissingData","transition","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","needsUpdate","needsRedraw","updateRanges","_validateAttributeUpdaters","layout","clearChangedFlags","supportsTransition","reason","dataRange","setNeedsRedraw","updated","getVertexOffset","updateSubBuffer","_checkAttributeArray","clearNeedsUpdate","needsNormalize","vertexIndex","shaderAttributeDefs","shaderAttributeName","getShaderAttributes","accessorFunc","objectValue","numVertices","hasUpdater","loggers","register","FS100","FS_GLES","FS300","getQualifierDetails","line","qualifiers","words","qualifier","definition","includes","getPassthroughFS","inputType","outputValue","convertToVec4","typeToChannelSuffix","typeToChannelCount","variable","unused","bindOnUse","_unbindBuffers","setBuffers","bufferName","setBuffer","locationOrName","bufferOrParams","_getVaryingIndex","byteSize","_getBufferParams","_bindBuffer","primitiveMode","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","getVaryingInfo","bufferIndex","createTransformFeedback","deleteTransformFeedback","currentIndex","feedbackMap","varyings","bindings","resources","_initialize","binding","_setupTransformFeedback","sourceBuffers","transformFeedback","attributes","_getNextIndex","_setupBuffers","varyingName","feedbackBuffers","sourceName","feedbackName","bufferOrRef","_createNewBuffer","_getFeedbackBuffers","_updateBindings","model","_updateBinding","_swapBuffers","nextIndex","srcName","dstName","getShaderVersion","MODULE_INJECTORS_VS","MODULE_INJECTORS_FS","VERTEX_SHADER","FRAGMENT_SHADER","MODULE_INJECTORS","DECLARATION_INJECT_MARKER","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","inject","injectStandardStubs","isVertex","fragmentData","order","injection","fragmentString","combineInjects","injects","vs","fs","SAMPLER_UNIFORM_PREFIX","SIZE_UNIFORM_PREFIX","VS_POS_VARIABLE","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","texAttributeNames","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","lines","processAttributeDefinition","updatedLine","getVaryingType","sizeName","uniformDeclaration","posInstructions","getSizeUniforms","uniforms","textureName","getAttributeDefinition","getSamplerDeclerations","samplerName","uniformDeclerations","varying","qualaiferDetails","textureMap","attributeData","sampleInstruction","SRC_TEX_PARAMETER_OVERRIDES","FS_OUTPUT_VARIABLE","_swapTexture","updatedModelProps","_processVertexShader","sourceTextures","discard","hasSourceTextures","hasTargetTexture","transform_elementID","elementIDBuffer","sampler","_setSourceTextureParameters","sizeUniforms","_setupTextures","packed","channelCount","packedPixels","packCount","currentResources","ownTexture","_targetTextureVarying","textureOrReference","_targetRefTexName","_createNewTexture","_sourceTextures","_targetTexture","_createTargetTexture","_updateElementIDBuffer","elementCount","elementIds","_swapTextures","combinedInject","_fs","TYPE_DEFINITIONS","propType","parsePropTypes","propDefs","propTypes","propDef","parsePropType","getTypeOf","dependencies","getUniforms","deprecations","defines","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","injections","normalizeInjections","moduleSource","_defaultGetUniforms","shaderSource","def","regex","old","new","RegExp","private","hook","stage","resolveModules","getShaderDependencies","instantiateModules","moduleMap","moduleDepth","getDependencyGraph","seen","isOldIE","GL_VENDOR","GL_RENDERER","GL_VERSION","GL_SHADING_LANGUAGE_VERSION","WEBGL_FEATURES","getContextInfo","gpuVendor","identifyGPUVendor","gpuInfo","compiledGlslExtensions","canCompileGLGSExtension","extensionName","behavior","shader","createShader","compileShader","canCompile","getShaderParameter","deleteShader","getFeature","getPlatformShaderDefines","debugInfo","getVersionDefines","glslVersion","isFragment","versionDefines","testVariable","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","ES100_FRAGMENT_OUTPUT_NAME","ES300_FRAGMENT_OUTPUT_REGEX","transpileShader","targetGLSLVersion","convertShader","convertFragmentShaderTo300","convertFragmentShaderTo100","replacements","pattern","outputMatch","outputName","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","FRAGMENT_SHADER_PROLOGUE","assembleShaders","assembleShader","assembleGetUniforms","hookFunctions","transpileToGLSL100","prologue","sourceLines","versionLine","coreSource","allDefines","getDefines","assembledSource","getShaderName","getShaderType","getApplicationDefines","hookFunctionMap","normalizeHookFunctions","hookInjections","declInjections","mainInjections","hash","checkDeprecations","getModuleSource","injectionType","getHookFunctions","moduleUniforms","injectShaderName","sourceText","define","hookName","hookFunction","signature","header","footer","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","array1","toTypedArray","uniformLength","getUniformSetter","parseUniformName","UNIFORM_NAME_REGEXP","checkUniformValues","uniformMap","uniformName","shouldCheck","checkUniformValue","checkUniformArray","copyUniform","checkLength","uniform1i","functionName","uniformSetter","cacheLength","arrayValue","defaultName","SHADER_NAME_REGEXP","GL_FRAGMENT_SHADER","GL_VERTEX_SHADER","getShaderTypeName","parseGLSLCompilerError","errLog","shaderType","shaderName","errorStrings","errors","warnings","shaderDescription","errorString","segments","addLineNumbers","formatErrors","column","substring","padLeft","delim","maxDigits","lineNumber","digits","ERR_SOURCE","getTypeName","_compile","getShaderSource","getTranslatedShaderSource","startsWith","compileStatus","infoLog","getShaderInfoLog","getSource","VertexShader","FragmentShader","GL_BYTE","GL_UNSIGNED_BYTE","GL_SHORT","GL_UNSIGNED_SHORT","GL_POINTS","GL_LINES","GL_LINE_LOOP","GL_LINE_STRIP","GL_TRIANGLES","GL_TRIANGLE_STRIP","GL_TRIANGLE_FAN","GL_FLOAT","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_UNSIGNED_INT","GL_UNSIGNED_INT_VEC2","GL_UNSIGNED_INT_VEC3","GL_UNSIGNED_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_FLOAT_MAT2x3","GL_FLOAT_MAT2x4","GL_FLOAT_MAT3x2","GL_FLOAT_MAT3x4","GL_FLOAT_MAT4x2","GL_FLOAT_MAT4x3","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","drawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","getCompositeGLType","compType","compComponents","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","attributeInfo","getAttributeInfo","getActiveAttrib","getAttribLocation","_addAttribute","getTransformFeedbackVarying","_addVarying","compositeType","_inferProperties","LOG_PROGRAM_PERF_PRIORITY","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","_isCached","_setId","bufferMode","_textureUniforms","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","setUniforms","logPriority","indexType","instanceCount","vertexArray","samplers","fb","useProgram","_areTexturesRenderable","bindForDraw","_bindTextures","drawRangeElements","drawElements","drawArrays","_uniformSetters","uniform","textureUpdate","textureIndex","_textureIndexCounter","texturesRenderable","createProgram","deleteProgram","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","getName","attachShader","linkProgram","linked","getProgramInfoLog","validateProgram","validated","_uniformCount","getActiveUniform","getUniformLocation","uniformIndices","getActiveUniforms","blockName","getUniformBlockIndex","blockIndex","getActiveUniformBlockParameter","blockBinding","uniformBlockBinding","defaultProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","stateHash","_useCounts","moduleName","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","appModules","getScratchArrayBuffer","getScratchArray","scratchArrayBuffer","ERR_ELEMENTS","constantAttributeZero","defaultVertexArray","isDefaultArray","MAX_ATTRIBUTES","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","bufferValue","getMaxAttributes","elementBuffer","setElementBuffer","vertexAttribIPointer","vertexAttribDivisor","disablingAttributeZero","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","v1","v2","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","elements","getVertexAttribOffset","ERR_ATTRIBUTE_TYPE","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","elementsAccessor","drawParams","vertexArrayObject","setAttributes","_updateDrawParams","_setAttribute","clearDrawParams","appAccessor","_resolveLocationAndAccessor","_setConstantAttributes","valueAccessor","INVALID_RESULT","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","attributeName","multiLocation","locationOffset","getAttributeLocation","setConstant","_setConstantAttributeZero","_setConstantAttribute","getConstantBuffer","indexCount","_updateDrawParamsForLocation","indexOffset","getVertexCount","maxElts","terminator","isInteger","decimal","getDebugTableForVertexArray","ELEMENT_ARRAY_BUFFER","getDebugTableRow","attributeLocation","rowHeader","getGLSLDeclaration","marker","verts","getDebugData","typeAndName","getDebugTableForUniforms","undefinedOnly","SHADER_MODULE_UNIFORM_REGEXP","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","addUniformToTable","unusedCount","unusedTable","isDefined","isUniformDefined","getDebugTableForProgramConfiguration","glslDeclaration","varyingInfo","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","getBuffersFromGeometry","geometry","indices","remappedName","mapAttributeName","inferAttributeAccessor","attributeMap","category","LOG_DRAW_PRIORITY","LOG_DRAW_TIMEOUT","ERR_MODEL_PARAMS","NOOP","DRAW_PARAMS","lastLogTime","animated","programManager","getDefaultProgramManager","_programManagerState","_managedProgram","programProps","_programDirty","_attributes","pickable","_checkProgram","moduleSettings","geometryBuffers","_setModelProps","_deleteGeometryBuffers","normalizedAttributes","updateModuleSettings","_logDrawCallStart","getDrawParams","vertexArrayInstanced","onBeforeRender","onAfterRender","didDraw","draw","getDrawMode","_logDrawCallEnd","unbindModels","_setFeedbackBuffers","unbindBuffers","bindBuffers","setGeometry","_feedbackBuffers","animationProps","logDrawTimeout","attributeTable","uniformTable","missingTable","missingCount","configTable","bufferTransform","textureTransform","clearRenderTarget","updatedOpts","_updateDrawOptions","swapped","resourceTransforms","resourceTransform","swap","setVertexCount","_buildResourceTransforms","_updateModelProps","setupResources","updatedProps","updateModelProps","canCreateBufferTransform","canCreateTextureTransform","getDrawOptions","onStart","onUpdate","onInterrupt","onEnd","Transition","_inProgress","cancel","removeChannel","addChannel","getTime","_onUpdate","isFinished","attributeInTransition","currentStartIndices","currentLength","getTransform","bufferOpts","inProgress","transitionSettings","padBufferOpts","enter","aFrom","aTo","vCurrent","pop","attributeType","ATTRIBUTE_TYPE","getTexture","aPrev","aCur","vNext","isTransitioning","TRANSITION_TYPES","transitions","_removeTransition","getTransitionSetting","_updateAttribute","animatedAttributes","isNew","TransitionType","TRACE_INVALIDATE","TRACE_UPDATE_START","TRACE_UPDATE_END","TRACE_ATTRIBUTE_UPDATE_START","TRACE_ATTRIBUTE_ALLOCATE","TRACE_ATTRIBUTE_UPDATE_END","updateTriggers","attributeTransitionManager","finalize","clearRedrawFlags","redraw","updaters","_add","attributeNameArray","triggerName","invalidatedAttributes","_invalidateTrigger","setNeedsUpdate","timeStart","accessorName","setExternalBuffer","setBinaryValue","setConstantValue","transitionUpdated","changedAttributes","getAttributes","hasAttribute","excludeAttributes","extraProps","_createAttribute","_mapUpdateTriggersToAttributes","triggers","getUpdateTriggers","updateBuffer","_value","fromValue","toValue","updateSpringElement","prev","cur","damper","updateSpring","distanceSquare","_currValue","_prevValue","nextValue","propsInTransition","LIFECYCLE","NO_STATE","MATCHED","INITIALIZED","AWAITING_GC","AWAITING_FINALIZATION","FINALIZED","PROP_SYMBOLS","COMPONENT","for","ASYNC_DEFAULTS","ASYNC_ORIGINAL","ASYNC_RESOLVED","validateProps","getPropTypes","diffProps","oldProps","propsChangedReason","compareProps","ignoreProps","dataChangedReason","diffDataProps","updateTriggersChangedReason","diffUpdateTriggers","dataChanged","propsChanged","updateTriggersChanged","extensionsChanged","diffExtensions","transitionsChanged","diffTransitions","isTransitionable","comparePropValues","newProp","oldProp","equal","dataComparator","_dataDiff","diffReason","diffUpdateTrigger","triggerChanged","oldExtensions","newTriggers","oldTriggers","LayerType","_propTypes","ERR_NOT_OBJECT","ERR_NOT_CONTAINER","container","isObject","isPlainObject","isEqual","memoize","cachedResult","cachedArgs","mergeShaders","mergedInjection","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","calculateViewportUniforms","getOffsetOrigin","coordinateSystem","coordinateOrigin","geospatialOrigin","shaderCoordinateOrigin","offsetMode","isGeospatial","longitude","latitude","projectionMode","unprojectPosition","position","calculateMatrixAndOffset","viewMatrixUncentered","projectionMatrix","viewMatrix","projectionCenter","originCommon","cameraPosCommon","cameraPosition","projectPosition","getUniformsFromViewport","modelMatrix","autoWrapLongitude","project_uWrapLongitude","project_uModelMatrix","distanceScales","getDistanceScales","viewportSize","project_uCoordinateSystem","project_uProjectionMode","project_uCoordinateOrigin","project_uCommonOrigin","project_uCenter","project_uPseudoMeters","_pseudoMeters","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","unitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2","transformVector","matrix","modulus","ieLog2","LOG2E","log2","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","TILE_SIZE","EARTH_CIRCUMFERENCE","DEFAULT_ALTITUDE","zoomToScale","zoom","scaleToZoom","lngLatToWorld","lng","lat","lambda2","phi2","worldToLngLat","atan","exp","getMeterZoom","latCosine","highPrecision","worldSize","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","metersPerUnit","degreesPerUnit","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","addMetersToLngLat","lngLatZ","xyz","worldspace","newLngLat","newZ","getViewMatrix","pitch","bearing","altitude","vm","getProjectionParameters","altitudeToFovy","nearZMultiplier","farZMultiplier","halfFov","fovyToAltitude","pitchRadians","topHalfSurfaceDistance","farZ","getProjectionMatrix","worldToPixels","pixelProjectionMatrix","pixelsToWorld","pixelUnprojectionMatrix","targetZ","coord","coord0","coord1","fitBounds","bounds","minExtent","maxZoom","west","south","east","north","nw","project","se","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","unproject","getBounds","unprojectOps","bottomLeft","bottomRight","topLeft","topRight","angleToGround","unprojectOnFarPlane","meterOffset","_initMatrices","vpm","mInverse","worldPosition","targetZWorld","lngLat","xy","pos","fromLocation","toLocation","newCenter","getMapCenterByLngLatPosition","corners","getBoundingRegion","normalizeViewportProps","minZoom","halfHeightPixels","minLatitude","maxLatitude","DEFAULT_ZOOM","DEFAULT_DISTANCE_SCALES","displayName","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","projectFlat","unprojectFlat","unprojectOption","coords","cameraDirection","cameraUp","orthographic","fovyRadians","_getCenterInWorld","multiplyRight","negate","commonPosition","_createProjectionMatrix","viewportMatrix","worldOffset","legacyMeterSizes","projectionParameters","viewOffset","multiplyLeft","_subViewports","minOffset","maxOffset","offsetViewport","lngLatZToWorldPosition","normalizeParameters","normalizedParams","fromCoordinateSystem","fromCoordinateOrigin","getWorldPosition","positionCommonSpace","DEFAULT_TEXTURE_PARAMETERS","internalTextures","specialTextureParameters","textureParameters","destroyTexture","boolean","optional","arrayEqual","valueType","compare","function","component","dataTransform","array2","defaultProps","deprecatedFor","normalizePropDefinition","createProps","propsPrototype","getPropsPrototype","propsInstance","componentClass","getOwnProperty","createPropsPrototypeAndTypes","_mergedDefaultProps","parentClass","parentDefaultProps","componentDefaultProps","componentPropDefs","createPropsPrototype","addAsyncPropsToPropPrototype","_deprecatedProps","addDeprecatedPropsToPropPrototype","parentProps","getComponentName","newValue","nameStr","newPropName","defaultValues","descriptors","async","getDescriptorForAsyncProp","internalState","hasAsyncProp","getAsyncProp","componentName","EMPTY_PROPS","asyncProps","onAsyncPropUpdated","oldAsyncProps","asyncProp","resolvedValue","pendingLoadCount","resolvedLoadCount","isAsyncPropLoading","_watchPromise","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_didAsyncInputValueChange","_this$layer","fetch","_resolveAsyncIterable","_setPropValue","lastValue","freezeAsyncOldProps","_postProcessValue","loadCount","promise","_this$layer2","_setAsyncPropValue","onDataLoad","catch","_this$layer3","raiseError","_this$layer4","counter","lifecycle","attributeManager","subLayers","usesPickingColorCache","isBoolean","isFunction","isPureObject","isIterable","isResponse","Response","arrayBuffer","text","json","isBlob","Blob","isReadableDOMStream","ReadableStream","tee","getReader","isBuffer","isReadableNodeStream","read","pipe","readable","isReadableStream","isLoaderObject","loader","_loader","hasExtensions","normalizeLoader","_loader2","_loader3","parseTextSync","parseText","binary","fileAliases","resolvePath","filename","alias","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","QUERY_STRING_PATTERN","getResourceUrlAndType","stripQueryString","contentTypeHeader","headers","getResourceContentLength","makeResponse","contentLength","initialDataUrl","getInitialDataUrl","TextEncoder","encode","response","checkResponse","ok","getResponseError","contentType","statusText","INITIAL_DATA_LENGTH","blobSlice","reader","FileReader","_event$target","readAsDataURL","base64","arrayBufferToBase64","fromCharCode","btoa","fetchFile","fetchOptions","probeLog","NullLog","DEFAULT_LOADER_OPTIONS","mimeType","nothrow","CDN","worker","maxConcurrency","maxMobileConcurrency","reuseWorkers","_workerType","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","uri","credentials","redirect","referrer","referrerPolicy","integrity","keepalive","signal","getGlobalLoaderState","loaders","_state","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptions","normalizeOptionsInternal","getFetchFunction","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","defaultOptions","loaderName","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","isPartialMatch","loaderDefaultOptions","mergedOptions","addUrlOptions","mergeNestedFields","baseUri","validateWorkerVersion","coreVersion","workerVersion","workerURLCache","getLoadableWorkerURL","workerURL","getLoadableWorkerURLFromURL","getLoadableWorkerURLFromSource","workerSource","buildScriptSource","blob","URL","createObjectURL","workerUrl","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","OffscreenCanvas","Worker","onMessage","_createBrowserWorker","terminate","terminated","transferList","postMessage","lineno","colno","_loadableURL","onmessage","_getErrorFromErrorEvent","onmessageerror","jobName","workerThread","isRunning","_resolve","_reject","payload","idleQueue","isDestroyed","onDebug","job","startPromise","jobQueue","_startQueuedJob","_getAvailableWorker","queuedJob","backlog","returnWorkerToQueue","shouldDestroyWorker","_getMaxConcurrency","DEFAULT_PROPS","_workerFarm","workerPools","workerPool","_getWorkerPoolProps","NPM_TAG","getWorkerURL","workerOptions","workerFile","versionTag","canParseWithWorker","parseWithWorker","parseOnMainThread","workerFarm","getWorkerFarm","getWorkerPool","startJob","bufferToArrayBuffer","toArrayBuffer","uint8Array","_toArrayBuffer","compareArrayBuffers","arrayBuffer1","arrayBuffer2","concatenateArrayBuffers","sources","sourceArrays","source2","sourceArray","concatenateArrayBuffersAsync","arrayBuffers","DEFAULT_CHUNK_SIZE","makeStringIterator","chunkSize","textEncoder","chunkLength","makeArrayBufferIterator","chunkByteLength","chunkArray","makeBlobIterator","makeStreamIterator","stream","makeBrowserStreamIterator","makeNodeStreamIterator","nextBatchPromise","currentBatchPromise","_streamReadAhead","releaseLock","makeIterator","ERR_DATA","getArrayBufferOrStringFromDataSync","textDecoder","TextDecoder","decode","getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","previousContext","resolvedContext","getLoadersFromContext","candidateLoaders","contextLoaders","getGlobalLoaderRegistry","loaderRegistry","registerLoaders","normalizedLoader","registeredLoader","getRegisteredLoaders","EXT_PATTERN","selectLoader","validHTTPResponse","selectLoaderSync","getNoValidLoaderMessage","ignoreRegisteredLoaders","normalizeLoaders","selectLoaderInternal","testUrl","findLoaderByMIMEType","findLoaderByUrl","findLoaderByInitialBytes","fallbackMimeType","getFirstCharacters","findLoaderByExtension","loaderExtension","mimeTypes","testDataAgainstText","testDataAgainstBinary","testText","tests","testBinary","magic","getMagicString","dataView","getUint8","typedLoaders","parseWithLoader","parseSync","load","TRACE_CHANGE_FLAG","TRACE_INITIALIZE","TRACE_UPDATE","TRACE_FINALIZE","TRACE_MATCHED","MAX_PICKING_COLOR_CACHE_SIZE","areViewportsEqual","oldViewport","pickingColorCache","__diff","loadOptions","resourceManager","_loadOptions","getLoadOptions","inResourceManager","contains","resourceId","persistent","subscribe","onChange","reloadAsyncProp","consumerId","requestId","visible","opacity","onHover","onClick","onDragStart","onDrag","onDragEnd","wrapLongitude","positionFormat","colorFormat","getPolygonOffset","layerIndex","highlightedObjectIndex","autoHighlight","highlightColor","layerName","_this$props$onError","_this$props","_this$context","_this$context$onError","updateObject","setChangeFlags","stateChanged","layerManager","_getNeedsRedraw","hasUniformTransition","shouldUpdateState","_getUpdateParams","uniformTransitions","active","models","pickingEvent","i1","i2","i3","shaders","getShaders","changeFlags","propsOrDataChanged","getAttributeManager","neededPickingBuffer","needPickingBuffer","pickingColors","instancePickingColors","pickingColorsAttribute","invalidate","getModels","unsubscribe","viewportChanged","isComposite","_update","_setModelAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","getChangedAttributes","updateAttributes","updateTransition","cacheSize","newCacheSize","pickingColor","encodePickingColor","objectIndex","_disablePickingIndex","colors","_initState","initializeState","_updateState","stateNeedsUpdate","currentProps","currentViewport","_updateUniformTransition","updateParams","oldModels","updateState","modelChanged","_updateModules","_renderLayers","_updateAttributes","setInstanceCount","clearChangeFlags","resetOldProps","finalizeState","moduleParameters","_updateAttributeTransition","setModuleParameters","offsets","flags","flagChanged","somethingChanged","invalidateAttribute","_updateAutoHighlight","pickingModuleParameters","pickingSelectedColor","picked","pickingHighlightColor","forceUpdate","getOldProps","attributeManagerNeedsRedraw","getNeedsRedraw","_getAttributeManager","addInstanced","calculateInstancePickingColors","_onAsyncPropUpdated","setAsyncProps","oldLayer","fp32shader","fp32","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","UNIT_GLSL_CONSTANTS","INITIAL_MODULE_OPTIONS","DEFAULT_HIGHLIGHT_COLOR","DEFAULT_MODULE_OPTIONS","pickingActive","pickingAttribute","selectedColor","picking_uSelectedColorValid","picking_uSelectedColor","picking_uHighlightColor","picking_uActive","picking_uAttribute","picking","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","_setAttributes","_calculateVertexCount","_print","DEFAULT_COLOR","radiusUnits","radiusScale","radiusMinPixels","radiusMaxPixels","lineWidthUnits","lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","stroked","filled","billboard","antialiasing","getPosition","getRadius","getFillColor","getLineColor","getLineWidth","strokeWidth","outline","project32","instancePositions","use64bitPositions","instanceRadius","instanceFillColors","instanceLineColors","instanceLineWidths","_this$state$model","_getModel","positions","channelHandles","animationHandles","Timeline","playing","lastEngineTime","POSITIVE_INFINITY","rate","channel","_setChannelTime","animationHandle","animation","detachAnimation","animationData","setTime","channelHandle","engineTime","offsetTime","totalDuration","_loadCount","_subscribers","consumer","isLoaded","_error","_content","_data","subscriber","protocol","_context","_resources","_consumers","_pruneRequest","res","request","prune","_track","_prune","consumers","inUse","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","TRACE_SET_LAYERS","TRACE_ACTIVATE_VIEWPORT","INITIAL_CONTEXT","deck","shaderCache","pickingFBO","mousePosition","lastRenderedLayers","layers","_nextLayers","_needsRedraw","_needsUpdate","_debug","activateViewport","_finalizeLayer","layerNeedsRedraw","layerIds","layerId","newLayers","_updateLayers","setLayers","oldLayers","oldLayerMap","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","newLayer","sublayers","_transferLayerState","_updateLayer","_initializeLayer","getSubLayers","_handleError","_transferState","_finalize","deepEqual","aValue","bValue","views","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","viewId","controller","rect","containsPixel","viewMap","view","viewOrViewId","getView","getViewStateId","filterViewState","viewports","getViewports","_setViews","_setViewState","_setSize","_rebuildViewports","viewsChanged","_diffViews","viewStateChanged","Controller","_onViewStateChange","onStateChange","makeViewport","_getViewport","controllerProps","_createController","oldControllers","invalidateControllers","getViewState","oldController","_updateController","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","extent","viewportInstance","_parseDimensions","viewChanged","viewportDimensions","getDimensions","newViewState","_x","_y","_width","_height","defaultOpts","ViewportType","TRANSITION_EVENTS","BREAK","SNAP_TO_END","IGNORE","transitionEasing","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","ControllerState","_onTransitionUpdate","nextProps","transitionTriggered","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","endProps","startProps","_triggerTransition","transitionDuration","transitionInterpolator","interpolator","arePropsEqual","_isUpdateDueToCurrentTransition","startViewstate","endViewStateProps","shortestPathFrom","getDuration","initialProps","initializeProps","_onTransitionEnd","inTransition","isZooming","isPanning","isRotating","interpolateProps","getViewportProps","oldViewState","extract","_propsToCompare","_propsToExtract","_requiredProps","startViewStateProps","_checkRequiredProps","DEFAULT_REQUIRED_PROPS","transitionProps","around","startViewport","endViewport","aroundPosition","panByPosition","NO_TRANSITION_PROPS","LINEAR_TRANSITION_PROPS","DEFAULT_INERTIA","INERTIA_EASING","EVENT_TYPES","WHEEL","PAN","PINCH","TRIPLE_PAN","DOUBLE_TAP","KEYBOARD","controllerState","controllerStateProps","transitionManager","_onTransition","_setInteractionState","linearTransitionProps","_transition","_events","_interactionState","isDragging","_customEvents","handleEvent","customEvents","toggleEvents","eventName","eventStartBlocked","_eventStartBlocked","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onTriplePanStart","_onTriplePan","_onTriplePanEnd","_onDoubleTap","_onWheel","_onKeyDown","handled","inside","stopPropagation","metaKey","altKey","ctrlKey","shiftKey","timer","dragMode","_getTransitionProps","processViewStateChange","inertia","scrollZoom","dragPan","dragRotate","doubleClickZoom","touchZoom","touchRotate","keyboard","isInteractive","eventNames","newControllerState","interactionState","getState","newStates","isPointInBounds","alternateMode","isFunctionKeyPressed","rightButton","invertPan","_panMove","updateViewport","_onPanMove","_onPanRotate","_onPanMoveEnd","_onPanRotateEnd","pan","endPos","panEnd","rotateEnd","smooth","rotateStart","blockEvents","zoomStart","_startPinchRotation","_lastPinchEvent","deltaAngleX","velocityZ","endScale","zoomEnd","isZoomOut","funcKey","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","code","zoomOut","zoomIn","rotateLeft","moveLeft","rotateRight","moveRight","rotateUp","moveUp","rotateDown","moveDown","ViewState","_viewportProps","_applyConstraints","PITCH_MOUSE_THRESHOLD","PITCH_ACCEL","DEFAULT_STATE","minPitch","maxPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","normalize","_getUpdatedState","_unproject","startPos","deltaAngleY","newRotation","_calculateNewPitchAndBearing","_getRotationParams","_calculateNewZoom","zoomedViewport","_zoomFromCenter","_panFromCenter","fromProps","deltaScaleX","deltaScaleY","centerY","startY","dimensionChanged","_getControllerProps","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","intensity","DEFAULT_LIGHT_DIRECTION","_shadow","shadow","Effect","Pass","_drawLayers","onViewportActive","clearCanvas","pass","clearGLCanvas","renderStats","viewportOrDescriptor","drawLayerParams","_getDrawLayerParams","subViewports","subViewport","_drawLayersInViewport","layerFilter","effects","indexResolver","layerIndexResolver","drawContext","isPicking","renderPass","layerFilterCache","shouldDrawLayer","_shouldDrawLayer","layerRenderIndex","layerParam","_getModuleParameters","layerParameters","getLayerParameters","glViewport","getGLViewport","clearOpts","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","drawLayer","filterSubLayer","rootLayerId","effect","getModuleParameters","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","_offset","parentId","resolver","dimensions","pixelRatio","shadowMap","depthBuffer","fbo","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","getViewportCenterPosition","getMemoizedViewProjectionMatrices","getViewProjectionMatrices","DEFAULT_SHADOW_COLOR","screenToCommonSpace","shadowMatrices","projectionMatrices","shadowMatrix","corner","createShadowUniforms","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadowMaps","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","ambientLight","directionalLights","pointLights","shadowPasses","lightSource","_applyDefaultLights","light","_createLightMatrix","_createShadowPasses","shadowPass","lightSources","directionalLight","getProjectedLight","pointLight","removeDefaultModule","lightMatrices","DEFAULT_LIGHTING_EFFECT","_internalEffects","setEffects","cleanup","_createInternalEffects","PICKING_PARAMETERS","_drawPickingBuffer","deviceRect","redrawReason","pickZ","encodedColors","byLayer","byAlpha","_colors","decodePickingColor","decodeColor","pickParameters","encodeColor","encoded","entry","pickedColor","pickedLayer","pickedViewports","pickedObjectIndex","TRACE_RENDER_LAYERS","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","layerPass","getDefaultFramebuffer","_preRender","outputBuffer","_postRender","preRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy2","pickedLayerIndex","d2","pickedObject","pickedX","pickedY","getUniqueObjects","uniqueColors","colorKey","getEmptyPickingInfo","pickInfo","pickedViewport","getViewportFromCoordinates","coordinate","devicePixel","processPickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","updateAutoHighlight","sourceLayer","getPickingInfo","_pickable","depthFBO","_pickClosestObject","_pickVisibleObjects","lastPickedViewportId","pickableLayers","isPickable","radius","unproject3D","_getPickable","emptyInfo","_resizeBuffer","devicePixelRange","_getPickingRect","deviceWidth","deviceHeight","pickedResult","_drawAndSample","pickedResultPass2","disablePickingIndex","restorePickingColors","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueInfos","isMaxObjects","defaultStyle","zIndex","backgroundColor","display","Tooltip","canvasParent","parentElement","appendChild","isVisible","displayInfo","innerText","html","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","isImageTypeSupported","getDefaultImageType","getImageType","getImageTypeOrNull","getImageData","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","unescape","encodeURIComponent","getBlob","parseToImage","blobOrDataUrl","webkitURL","objectUrl","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","isEmptyObject","createImageBitmap","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","getJpegMetadata","getGifMetadata","getBmpMetadata","isPng","getUint32","isGif","getUint16","isBmp","isJpeg","tableMarkers","sofMarkers","getJpegMarkers","parseToNodeImage","parseImage","imageOptions","imageType","loadType","getLoadableImageType","MIME_TYPES","ImageLoader","isJSON","firstChar","lastChar","existingVersion","_registerLoggers","premultiplyAlpha","GL_QUERY_RESULT","GL_QUERY_RESULT_AVAILABLE","GL_TIME_ELAPSED_EXT","GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","GL_ANY_SAMPLES_PASSED","GL_ANY_SAMPLES_PASSED_CONSERVATIVE","hasTimerQuery","_queryPending","_pollingPromise","conservative","resultAvailable","getQueryParameter","getResult","poll","isResultAvailable","timerId","statIdCounter","onCreateContext","onAddHTML","onInitialize","onRender","onFinalize","glOptions","autoResizeViewport","autoResizeDrawingBuffer","useDevicePixelRatio","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","_pageLoadPromise","_onMousemove","_onMouseleave","_setDisplay","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","appContext","_addCallbackData","_startLoop","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","_cancelAnimationFrame","waitForRender","renderFrame","_requestAnimationFrame","animationLoop","animationFrameId","renderFrameCallback","_resizeFramebuffer","startTime","tock","_timeline","_loop","_animationLoop","_mousePosition","_getSizeAndAspect","_offScreen","_createInfoDiv","wrapperDiv","div","isTimerDisjoint","getTimerMilliseconds","beginTimeElapsedQuery","predict","enhancePointerEventInput","oldHandler","enhanceMouseInput","RECOGNIZERS","RECOGNIZER_COMPATIBLE_MAP","tripan","pinch","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","INPUT_EVENT_TYPES","KEY_EVENTS","MOUSE_EVENTS","WHEEL_EVENTS","EVENT_RECOGNIZER_MAP","tap","press","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","tripanstart","tripanmove","tripanup","tripandown","tripanleft","tripanright","tripanend","tripancancel","panup","pandown","panleft","panright","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","EVENT_TYPE","WHEEL_DELTA_MAGIC_SCALER","WHEEL_DELTA_PER_LINE","SHIFT_MULTIPLIER","passive","WheelEvent","deltaMode","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelPosition","MOVE_EVENT_TYPE","OVER_EVENT_TYPE","OUT_EVENT_TYPE","LEAVE_EVENT_TYPE","MoveInput","enableMoveEvent","enableLeaveEvent","enableOutEvent","enableOverEvent","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","DOWN_EVENT_TYPE","UP_EVENT_TYPE","KeyInput","enableDownEvent","enableUpEvent","tabIndex","targetElement","srcElement","ContextmenuInput","DOWN_EVENT","MOVE_EVENT","UP_EVENT","MOUSE_EVENT_WHICH_LEFT","MOUSE_EVENT_WHICH_MIDDLE","MOUSE_EVENT_WHICH_RIGHT","MOUSE_EVENT_BUTTON_LEFT","MOUSE_EVENT_BUTTON_MIDDLE","MOUSE_EVENT_BUTTON_RIGHT","MOUSE_EVENT_BUTTONS_LEFT_MASK","MOUSE_EVENT_BUTTONS_RIGHT_MASK","MOUSE_EVENT_BUTTONS_MIDDLE_MASK","whichButtons","buttons","leftButton","middleButton","getOffsetPosition","rootElement","getBoundingClientRect","offsetWidth","offsetHeight","clientLeft","clientTop","DEFAULT_OPTIONS","handlersByElement","_active","mjolnirEvent","_normalizeEvent","_emit","immediatePropagationStopped","stopImmediatePropagation","entriesToRemove","recognizerOptions","_onBasicInput","_onOtherEvent","setElement","ManagerClass","otherName","recognizerName","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","_removeEventHandler","fallbackRecognizers","enableEventType","isRecognizerUsed","eh","getCursor","PropTypes","oneOfType","arrayOf","instanceOf","bool","pickingRadius","eventRecognizerOptions","onWebGLInitialized","onResize","onLoad","_framebuffer","_animate","_typedArrayManagerProps","_onMetrics","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","isHovering","_onEvent","_onPointerDown","_onPointerMove","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","_customRender","_pick","resourceIds","statKey","getLayers","getViews","_checkForCanvasSizeChange","_onContextLost","_setGLContext","_onRenderFrame","pickedInfo","getTooltip","setTooltip","cursor","attachTimeline","pointerleave","_onInteractionStateChange","_updateCanvasSize","renderOptions","renderLayers","getEffects","_getFrameStats","_getMetrics","_updateCursor","updateLayers","_pickAndCallback","updateViewStates","eventOptions","getLastPickedObject","layerHandler","rootHandler","animationLoopStats","memoryStats","MAX_LATITUDE","createDeckInstance","overlay","_googleMap","destroyDeckInstance","eventListeners","getContainer","_eventListeners","addListener","evt","handleMouseEvent","getPanes","overlayLayer","getMap","getDiv","getViewPropsFromOverlay","getMapSize","projection","getProjection","ne","getNorthEast","sw","getSouthWest","fromLatLngToDivPixel","nwContainerPx","google","maps","Point","fromContainerPixelToLatLng","nwDivPx","leftOffset","mapWidth","getWorldWidth","mapCount","getZoom","centerPx","centerContainer","LatLng","fromLatLngToContainerPixel","getTilt","getViewPropsFromCoordinateTransformer","coordinateTransformer","heading","tilt","getCameraParams","getEventPixel","point","latLng","mockEvent","pickObject","HIDE_ALL_LAYERS","GL_STATE","_map","_overlay","setMap","UNINITIALIZED","RenderingType","renderingType","getRenderingType","_createOverlay","_deck","pickMultipleObjects","pickObjects","VECTOR","isVectorMap","WebglOverlayView","OverlayView","onAdd","_onContextRestored","onDraw","_onDrawVector","_onAdd","_onDrawRaster","onRemove","_onRemove","requestRedraw","ab","canSyncWithGoogleMaps","parentStyle","mapStyle","stylers","saturation","elementType","visibility","featureType","$event","setAuthFlag","fncGMailAuth","fncShowDirAuth","fncFocus","composing","dirEmail","dirName","dirStatus","fncDirAuth","emailRegExp","dirFlag","computed","querySelector","scrollIntoView","$emit","gsap","AnimatedNumber","Auth","getTimezoneOffset","showAuth","flag","clearInterval","$homeCoverContent","transfrom","dir","initMap","currentPosition","styles","mapDiv","mapOptions","eventMarkerData","scatterplotLayer","googleMapsOverlay","isAuth","moveToMap","created","installGetterOverride","originalGetterFunc","installSetterSpy","originalSetterFunc","valueChanged","_updateCache","installProgramSpy","originalUseProgram","GLState","stateStack","oldValues","trackContextState","pushContextState","popContextState","validateVector","checkNumber","checkVector","callerName"],"mappings":"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c,EAAG6F,OAAOoa,MAAOjgB,EAAG6F,OAAOsa,QAC5C3D,QAAS,CAAC,EAAG,EAAGxc,EAAG6F,OAAOoa,MAAOjgB,EAAG6F,OAAOsa,QAC3CpC,YAAa,CAAC,IAAK,EAAG,IAAK,IAAK,EAAG,OAErC,eAAe/d,EAAIwqI,GAAU,KAC3Bx6B,EAAKyS,YAAY,gBAAiB,CAChCE,aAAa,QC9MvB,IAAMypB,GAAW,CACf,CACEC,QAAS,CACP,CACEC,WAAY,MAIlB,CACEC,YAAa,WACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEutG,YAAa,cACbF,QAAS,CACP,CACEG,WAAY,SAIlB,CACED,YAAa,mBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEutG,YAAa,qBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,iBACbF,YAAa,WACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,yBACbF,YAAa,SACbF,QAAS,CACP,CACEG,WAAY,SAIlB,CACEC,YAAa,yBACbF,YAAa,mBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,6BACbJ,QAAS,CACP,CACEG,WAAY,SAIlB,CACEC,YAAa,0BACbF,YAAa,mBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,MACbF,YAAa,mBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,WACbF,YAAa,WACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,WACbF,YAAa,mBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,WACbF,YAAa,qBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,OACbF,YAAa,gBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,OACbF,YAAa,mBACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,gBACbF,YAAa,WACbF,QAAS,CACP,CACErtG,MAAO,aAIb,CACEytG,YAAa,eACbF,YAAa,WACbF,QAAS,CACP,CACErtG,MAAO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","file":"js/chunk-1d6c3fd0.5087fbb9.js","sourcesContent":["(function(t,e){\"object\"===typeof exports&&\"object\"===typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define([],e):\"object\"===typeof exports?exports[\"AnimatedNumber\"]=e():t[\"AnimatedNumber\"]=e()})(\"undefined\"!==typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"./\",n(n.s=0)}({0:function(t,e,n){t.exports=n(\"vgs7\")},A5qe:function(t,e,n){(function(n){var r,o,a,i={scope:{}};i.defineProperty=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError(\"ES3 does not support getters and setters.\");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i.getGlobal=function(t){return\"undefined\"!=typeof window&&window===t?t:\"undefined\"!=typeof n&&null!=n?n:t},i.global=i.getGlobal(this),i.SYMBOL_PREFIX=\"jscomp_symbol_\",i.initSymbol=function(){i.initSymbol=function(){},i.global.Symbol||(i.global.Symbol=i.Symbol)},i.symbolCounter_=0,i.Symbol=function(t){return i.SYMBOL_PREFIX+(t||\"\")+i.symbolCounter_++},i.initSymbolIterator=function(){i.initSymbol();var t=i.global.Symbol.iterator;t||(t=i.global.Symbol.iterator=i.global.Symbol(\"iterator\")),\"function\"!=typeof Array.prototype[t]&&i.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return i.arrayIterator(this)}}),i.initSymbolIterator=function(){}},i.arrayIterator=function(t){var e=0;return i.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},i.iteratorPrototype=function(t){return i.initSymbolIterator(),t={next:t},t[i.global.Symbol.iterator]=function(){return this},t},i.array=i.array||{},i.iteratorFromArray=function(t,e){i.initSymbolIterator(),t instanceof String&&(t+=\"\");var n=0,r={next:function(){if(n<t.length){var o=n++;return{value:e(o,t[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},i.polyfill=function(t,e,n,r){if(e){for(n=i.global,t=t.split(\".\"),r=0;r<t.length-1;r++){var o=t[r];o in n||(n[o]={}),n=n[o]}t=t[t.length-1],r=n[t],e=e(r),e!=r&&null!=e&&i.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},i.polyfill(\"Array.prototype.keys\",function(t){return t||function(){return i.iteratorFromArray(this,function(t){return t})}},\"es6-impl\",\"es3\");var u=this;(function(n,i){o=[],r=i,a=\"function\"===typeof r?r.apply(e,o):r,void 0===a||(t.exports=a)})(0,function(){function t(t){if(!L.col(t))try{return document.querySelectorAll(t)}catch(t){}}function e(t,e){for(var n=t.length,r=2<=arguments.length?arguments[1]:void 0,o=[],a=0;a<n;a++)if(a in t){var i=t[a];e.call(r,i,a,t)&&o.push(i)}return o}function n(t){return t.reduce(function(t,e){return t.concat(L.arr(e)?n(e):e)},[])}function r(e){return L.arr(e)?e:(L.str(e)&&(e=t(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function o(t,e){return t.some(function(t){return t===e})}function a(t){var e,n={};for(e in t)n[e]=t[e];return n}function i(t,e){var n,r=a(t);for(n in t)r[n]=e.hasOwnProperty(n)?e[n]:t[n];return r}function s(t,e){var n,r=a(t);for(n in e)r[n]=L.und(t[n])?e[n]:t[n];return r}function f(t){t=t.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,function(t,e,n,r){return e+e+n+n+r+r});var e=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t);t=parseInt(e[1],16);var n=parseInt(e[2],16);e=parseInt(e[3],16);return\"rgba(\"+t+\",\"+n+\",\"+e+\",1)\"}function c(t){function e(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n=/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(t)||/hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(t);t=parseInt(n[1])/360;var r=parseInt(n[2])/100,o=parseInt(n[3])/100;n=n[4]||1;if(0==r)o=r=t=o;else{var a=.5>o?o*(1+r):o+r-o*r,i=2*o-a;o=e(i,a,t+1/3),r=e(i,a,t);t=e(i,a,t-1/3)}return\"rgba(\"+255*o+\",\"+255*r+\",\"+255*t+\",\"+n+\")\"}function l(t){if(t=/([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t))return t[2]}function d(t){return-1<t.indexOf(\"translate\")||\"perspective\"===t?\"px\":-1<t.indexOf(\"rotate\")||-1<t.indexOf(\"skew\")?\"deg\":void 0}function p(t,e){return L.fnc(t)?t(e.target,e.id,e.total):t}function m(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(e.replace(/([a-z])([A-Z])/g,\"$1-$2\").toLowerCase())||\"0\"}function y(t,e){return L.dom(t)&&o($,e)?\"transform\":L.dom(t)&&(t.getAttribute(e)||L.svg(t)&&t[e])?\"attribute\":L.dom(t)&&\"transform\"!==e&&m(t,e)?\"css\":null!=t[e]?\"object\":void 0}function g(t,n){var r=d(n);r=-1<n.indexOf(\"scale\")?1:0+r;if(t=t.style.transform,!t)return r;for(var o=[],a=[],i=[],u=/(\\w+)\\((.+?)\\)/g;o=u.exec(t);)a.push(o[1]),i.push(o[2]);return t=e(i,function(t,e){return a[e]===n}),t.length?t[0]:r}function h(t,e){switch(y(t,e)){case\"transform\":return g(t,e);case\"css\":return m(t,e);case\"attribute\":return t.getAttribute(e)}return t[e]||0}function v(t,e){var n=/^(\\*=|\\+=|-=)/.exec(t);if(!n)return t;var r=l(t)||0;switch(e=parseFloat(e),t=parseFloat(t.replace(n[0],\"\")),n[0][0]){case\"+\":return e+t+r;case\"-\":return e-t+r;case\"*\":return e*t+r}}function b(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function x(t){t=t.points;for(var e,n=0,r=0;r<t.numberOfItems;r++){var o=t.getItem(r);0<r&&(n+=b(e,o)),e=o}return n}function w(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case\"circle\":return 2*Math.PI*t.getAttribute(\"r\");case\"rect\":return 2*t.getAttribute(\"width\")+2*t.getAttribute(\"height\");case\"line\":return b({x:t.getAttribute(\"x1\"),y:t.getAttribute(\"y1\")},{x:t.getAttribute(\"x2\"),y:t.getAttribute(\"y2\")});case\"polyline\":return x(t);case\"polygon\":var e=t.points;return x(t)+b(e.getItem(e.numberOfItems-1),e.getItem(0))}}function S(t,e){function n(n){return n=void 0===n?0:n,t.el.getPointAtLength(1<=e+n?e+n:0)}var r=n(),o=n(-1),a=n(1);switch(t.property){case\"x\":return r.x;case\"y\":return r.y;case\"angle\":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function A(t,e){var n,r=/-?\\d*\\.?\\d+/g;if(n=L.pth(t)?t.totalLength:t,L.col(n))if(L.rgb(n)){var o=/rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(n);n=o?\"rgba(\"+o[1]+\",1)\":n}else n=L.hex(n)?f(n):L.hsl(n)?c(n):void 0;else o=(o=l(n))?n.substr(0,n.length-o.length):n,n=e&&!/\\s/g.test(n)?o+e:o;return n+=\"\",{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:L.str(t)||e?n.split(r):[]}}function _(t){return t=t?n(L.arr(t)?t.map(r):r(t)):[],e(t,function(t,e,n){return n.indexOf(t)===e})}function O(t){var e=_(t);return e.map(function(t,n){return{target:t,id:n,total:e.length}})}function M(t,e){var n=a(e);if(L.arr(t)){var o=t.length;2!==o||L.obj(t[0])?L.fnc(e.duration)||(n.duration=e.duration/o):t={value:t}}return r(t).map(function(t,n){return n=n?0:e.delay,t=L.obj(t)&&!L.pth(t)?t:{value:t},L.und(t.delay)&&(t.delay=n),t}).map(function(t){return s(t,n)})}function P(t,e){var n,r={};for(n in t){var o=p(t[n],e);L.arr(o)&&(o=o.map(function(t){return p(t,e)}),1===o.length&&(o=o[0])),r[n]=o}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function I(t){return L.arr(t)?R.apply(this,t):X[t]}function j(t,e){var n;return t.tweens.map(function(r){r=P(r,e);var o=r.value,a=h(e.target,t.name),i=n?n.to.original:a,u=(i=L.arr(o)?o[0]:i,v(L.arr(o)?o[1]:o,i));a=l(u)||l(i)||l(a);return r.from=A(i,a),r.to=A(u,a),r.start=n?n.end:t.offset,r.end=r.start+r.delay+r.duration,r.easing=I(r.easing),r.elasticity=(1e3-Math.min(Math.max(r.elasticity,1),999))/1e3,r.isPath=L.pth(o),r.isColor=L.col(r.from.original),r.isColor&&(r.round=1),n=r})}function F(t,r){return e(n(t.map(function(t){return r.map(function(e){var n=y(t.target,e.name);if(n){var r=j(e,t);e={type:n,property:e.name,animatable:t,tweens:r,duration:r[r.length-1].end,delay:r[0].delay}}else e=void 0;return e})})),function(t){return!L.und(t)})}function C(t,e,n,r){var o=\"delay\"===t;return e.length?(o?Math.min:Math.max).apply(Math,e.map(function(e){return e[t]})):o?r.delay:n.offset+r.delay+r.duration}function k(t){var e,n=i(N,t),r=i(V,t),o=O(t.targets),a=[],u=s(n,r);for(e in t)u.hasOwnProperty(e)||\"targets\"===e||a.push({name:e,offset:u.offset,tweens:M(t[e],r)});return t=F(o,a),s(n,{children:[],animatables:o,animations:t,duration:C(\"duration\",t,n,r),delay:C(\"delay\",t,n,r)})}function E(t){function n(){return window.Promise&&new Promise(function(t){return l=t})}function r(t){return p.reversed?p.duration-t:t}function o(t){for(var n=0,r={},o=p.animations,a=o.length;n<a;){var i=o[n],u=i.animatable,s=i.tweens,f=s.length-1,c=s[f];f&&(c=e(s,function(e){return t<e.end})[0]||c);s=Math.min(Math.max(t-c.start-c.delay,0),c.duration)/c.duration;for(var l=isNaN(s)?1:c.easing(s,c.elasticity),d=(s=c.to.strings,c.round),y=(f=[],void 0),g=(y=c.to.numbers.length,0);g<y;g++){var h=void 0,v=(h=c.to.numbers[g],c.from.numbers[g]);h=c.isPath?S(c.value,l*h):v+l*(h-v);d&&(c.isColor&&2<g||(h=Math.round(h*d)/d)),f.push(h)}if(c=s.length)for(y=s[0],l=0;l<c;l++)d=s[l+1],g=f[l],isNaN(g)||(y=d?y+(g+d):y+(g+\" \"));else y=f[0];q[i.type](u.target,i.property,y,r,u.id),i.currentValue=y,n++}if(n=Object.keys(r).length)for(o=0;o<n;o++)T||(T=m(document.body,\"transform\")?\"transform\":\"-webkit-transform\"),p.animatables[o].target.style[T]=r[o].join(\" \");p.currentTime=t,p.progress=t/p.duration*100}function a(t){p[t]&&p[t](p)}function i(){p.remaining&&!0!==p.remaining&&p.remaining--}function u(t){var e=p.duration,u=p.offset,m=u+p.delay,y=p.currentTime,g=p.reversed,h=r(t);if(p.children.length){var v=p.children,b=v.length;if(h>=p.currentTime)for(var x=0;x<b;x++)v[x].seek(h);else for(;b--;)v[b].seek(h)}(h>=m||!e)&&(p.began||(p.began=!0,a(\"begin\")),a(\"run\")),h>u&&h<e?o(h):(h<=u&&0!==y&&(o(0),g&&i()),(h>=e&&y!==e||!e)&&(o(e),g||i())),a(\"update\"),t>=e&&(p.remaining?(f=s,\"alternate\"===p.direction&&(p.reversed=!p.reversed)):(p.pause(),p.completed||(p.completed=!0,a(\"complete\"),\"Promise\"in window&&(l(),d=n()))),c=0)}t=void 0===t?{}:t;var s,f,c=0,l=null,d=n(),p=k(t);return p.reset=function(){var t=p.direction,e=p.loop;for(p.currentTime=0,p.progress=0,p.paused=!0,p.began=!1,p.completed=!1,p.reversed=\"reverse\"===t,p.remaining=\"alternate\"===t&&1===e?2:e,o(0),t=p.children.length;t--;)p.children[t].reset()},p.tick=function(t){s=t,f||(f=s),u((c+s-f)*E.speed)},p.seek=function(t){u(r(t))},p.pause=function(){var t=Y.indexOf(p);-1<t&&Y.splice(t,1),p.paused=!0},p.play=function(){p.paused&&(p.paused=!1,f=0,c=r(p.currentTime),Y.push(p),Z||B())},p.reverse=function(){p.reversed=!p.reversed,f=0,c=r(p.currentTime)},p.restart=function(){p.pause(),p.reset(),p.play()},p.finished=d,p.reset(),p.autoplay&&p.play(),p}var T,N={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:\"normal\",autoplay:!0,offset:0},V={duration:1e3,delay:0,easing:\"easeOutElastic\",elasticity:500,round:0},$=\"translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective\".split(\" \"),L={arr:function(t){return Array.isArray(t)},obj:function(t){return-1<Object.prototype.toString.call(t).indexOf(\"Object\")},pth:function(t){return L.obj(t)&&t.hasOwnProperty(\"totalLength\")},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||L.svg(t)},str:function(t){return\"string\"===typeof t},fnc:function(t){return\"function\"===typeof t},und:function(t){return\"undefined\"===typeof t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return L.hex(t)||L.rgb(t)||L.hsl(t)}},R=function(){function t(t,e,n){return(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t}return function(e,n,r,o){if(0<=e&&1>=e&&0<=r&&1>=r){var a=new Float32Array(11);if(e!==n||r!==o)for(var i=0;11>i;++i)a[i]=t(.1*i,e,r);return function(i){if(e===n&&r===o)return i;if(0===i)return 0;if(1===i)return 1;for(var u=0,s=1;10!==s&&a[s]<=i;++s)u+=.1;--s;s=u+(i-a[s])/(a[s+1]-a[s])*.1;var f=3*(1-3*r+3*e)*s*s+2*(3*r-6*e)*s+3*e;if(.001<=f){for(u=0;4>u;++u){if(f=3*(1-3*r+3*e)*s*s+2*(3*r-6*e)*s+3*e,0===f)break;var c=t(s,e,r)-i;s=s-c/f}i=s}else if(0===f)i=s;else{s=u,u=u+.1;var l=0;do{c=s+(u-s)/2,f=t(c,e,r)-i,0<f?u=c:s=c}while(1e-7<Math.abs(f)&&10>++l);i=c}return t(i,n,o)}}}}(),X=function(){function t(t,e){return 0===t||1===t?t:-Math.pow(2,10*(t-1))*Math.sin(2*(t-1-e/(2*Math.PI)*Math.asin(1))*Math.PI/e)}var e,n=\"Quad Cubic Quart Quint Sine Expo Circ Back Elastic\".split(\" \"),r={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],t],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,n){return 1-t(1-e,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,n){return.5>e?t(2*e,n)/2:1-t(-2*e+2,n)/2}]},o={linear:R(.25,.25,.75,.75)},a={};for(e in r)a.type=e,r[a.type].forEach(function(t){return function(e,r){o[\"ease\"+t.type+n[r]]=L.fnc(e)?e:R.apply(u,e)}}(a)),a={type:a.type};return o}(),q={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,r,o){r[o]||(r[o]=[]),r[o].push(e+\"(\"+n+\")\")}},Y=[],Z=0,B=function(){function t(){Z=requestAnimationFrame(e)}function e(e){var n=Y.length;if(n){for(var r=0;r<n;)Y[r]&&Y[r].tick(e),r++;t()}else cancelAnimationFrame(Z),Z=0}return t}();return E.version=\"2.2.0\",E.speed=1,E.running=Y,E.remove=function(t){t=_(t);for(var e=Y.length;e--;)for(var n=Y[e],r=n.animations,a=r.length;a--;)o(t,r[a].animatable.target)&&(r.splice(a,1),r.length||n.pause())},E.getValue=h,E.path=function(e,n){var r=L.str(e)?t(e)[0]:e,o=n||100;return function(t){return{el:r,property:t,totalLength:w(r)*(o/100)}}},E.setDashoffset=function(t){var e=w(t);return t.setAttribute(\"stroke-dasharray\",e),e},E.bezier=R,E.easings=X,E.timeline=function(t){var e=E(t);return e.pause(),e.duration=0,e.add=function(n){return e.children.forEach(function(t){t.began=!0,t.completed=!0}),r(n).forEach(function(n){var r=s(n,i(V,t||{}));r.targets=r.targets||t.targets,n=e.duration;var o=r.offset;r.autoplay=!1,r.direction=e.direction,r.offset=L.und(o)?n:v(o,n),e.began=!0,e.completed=!0,e.seek(r.offset),r=E(r),r.began=!0,r.completed=!0,r.duration>n&&(e.duration=r.duration),e.children.push(r)}),e.seek(0),e.reset(),e.autoplay&&e.restart(),e},e},E.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},E})}).call(e,n(\"DuR2\"))},DuR2:function(t,e){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===typeof window&&(n=window)}t.exports=n},vgs7:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(\"A5qe\"),o=n.n(r),a={props:{value:{type:[Number,String],default:\"0\",required:!0},formatValue:{type:Function,default:function(t){return t}},easing:{type:String,default:\"linear\"},duration:{type:Number,default:1e3},update:Function,begin:Function,complete:Function,run:Function,delay:{type:Number,default:0},round:{default:null}},data:function(){return{animatedValue:0}},mounted:function(){this.animateValue(this.value)},watch:{value:function(t){this.animateValue(t)}},methods:{animateValue:function(t){var e=this.begin,n=this.easing,r=this.duration,a=this.complete,i=this.update,u=this.run,s=this.delay,f=this.round;o()({targets:this,animatedValue:t,duration:r,easing:n,update:i,begin:e,complete:a,run:u,delay:s,round:f})}}},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"span\",{domProps:{innerHTML:t._s(t.formatValue(Number(t.animatedValue)))}})},u=[];function s(t,e,n,r,o,a,i,u){t=t||{};var s=typeof t.default;\"object\"!==s&&\"function\"!==s||(t=t.default);var f,c=\"function\"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId=a),i?(f=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||\"undefined\"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=f):o&&(f=u?function(){o.call(this,this.$root.$options.shadowRoot)}:o),f)if(c.functional){c._injectStyles=f;var l=c.render;c.render=function(t,e){return f.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,f):[f]}return{exports:t,options:c}}var f=!1,c=null,l=null,d=null,p=s(a,i,u,f,c,l,d),m=p.exports;e[\"default\"]=m}})[\"default\"]});\n//# sourceMappingURL=AnimatedNumber.umd.min.js.map","export default function getHiResTimestamp() {\n  let timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  const {\n    luma\n  } = gl;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nconst global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  const EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  for (const extension of EXTENSIONS) {\n    gl.luma[extension] = gl.getExtension(extension);\n  }\n}\n\nfunction installOverrides(gl, {\n  target,\n  target2\n}) {\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(key => {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      const originalFunc = gl[key] ? gl[key].bind(gl) : () => {};\n      const polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  for (const extension of Object.getOwnPropertyNames(polyfills)) {\n    if (extension !== 'overrides') {\n      polyfillExtension(gl, {\n        extension,\n        target: gl.luma,\n        target2: gl\n      });\n    }\n  }\n}\n\nfunction polyfillExtension(gl, {\n  extension,\n  target,\n  target2\n}) {\n  const defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  const {\n    meta = {}\n  } = defaults;\n  const {\n    suffix = ''\n  } = meta;\n  const ext = gl.getExtension(extension);\n\n  for (const key of Object.keys(defaults)) {\n    const extKey = `${key}${suffix}`;\n    let polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = (...args) => ext[extKey](...args);\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports.default = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser.default)()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron.default)(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import { global } from 'probe.gl/env';\nconst glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  const f = gl.getError;\n\n  gl.getError = function getError() {\n    let err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nconst WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  const gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (let n = 0; n < this.attribs.length; n++) {\n    const attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nconst OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  const self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  const original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    const vao = self.currentVertexArrayObject;\n    const attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    const attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', () => {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  const contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (let ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  const gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  const arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  const gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  const original = this.original;\n  const oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  const newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  let currentBinding = this.currentArrayBuffer;\n  const maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (let n = 0; n <= maxAttrib; n++) {\n    const attrib = newVAO.attribs[n];\n    const oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      let bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  const original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    const list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  const original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    const ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class Matrix extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  get RANK() {\n    assert(false);\n    return 0;\n  }\n\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nconst IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nconst ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nconst INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nconst constants = {};\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n    return constants.IDENTITY;\n  }\n\n  static get ZERO() {\n    constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n    return constants.ZERO;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY);\n  }\n\n  fromQuaternion(q) {\n    mat4.fromQuat(this, q);\n    return this.check();\n  }\n\n  frustum({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  }) {\n    if (far === Infinity) {\n      Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  static _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = 2.0 * near / (right - left);\n    const column1Row1 = 2.0 * near / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1.0;\n    const column2Row3 = -1.0;\n    const column3Row2 = -2.0 * near;\n    result[0] = column0Row0;\n    result[1] = 0.0;\n    result[2] = 0.0;\n    result[3] = 0.0;\n    result[4] = 0.0;\n    result[5] = column1Row1;\n    result[6] = 0.0;\n    result[7] = 0.0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0.0;\n    result[13] = 0.0;\n    result[14] = column3Row2;\n    result[15] = 0.0;\n    return result;\n  }\n\n  lookAt(eye, center, up) {\n    if (arguments.length === 1) {\n      ({\n        eye,\n        center,\n        up\n      } = eye);\n    }\n\n    center = center || [0, 0, 0];\n    up = up || [0, 1, 0];\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near = 0.1,\n    far = 500\n  }) {\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic({\n    fovy = 45 * Math.PI / 180,\n    aspect = 1,\n    focalDistance = 1,\n    near = 0.1,\n    far = 500\n  }) {\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return new Matrix4().ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective({\n    fovy = undefined,\n    fov = 45 * Math.PI / 180,\n    aspect = 1,\n    near = 0.1,\n    far = 500\n  } = {}) {\n    fovy = fovy || fov;\n\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ([rx, ry, rz]) {\n    return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    if (Array.isArray(factor)) {\n      mat4.scale(this, this, factor);\n    } else {\n      mat4.scale(this, this, [factor, factor, factor]);\n    }\n\n    return this.check();\n  }\n\n  translate(vec) {\n    mat4.translate(this, this, vec);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n\n    switch (length) {\n      case 2:\n        result = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  transformAsVector(vector, result) {\n    switch (vector.length) {\n      case 2:\n        result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n  transformPoint(vector, result) {\n    deprecated('Matrix4.transformPoint', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    deprecated('Matrix4.transformVector', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    deprecated('Matrix4.transformDirection', '3.0');\n    return this.transformAsVector(vector, result);\n  }\n\n}\n//# sourceMappingURL=matrix4.js.map","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RealHome.vue?vue&type=style&index=0&lang=css&\"","import { isWebGL2 } from '../utils/webgl-checks';\nconst OES_element_index = 'OES_element_index';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nconst GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nconst GL_DONT_CARE = 0x1100;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nconst GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nconst GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nconst getWebGL2ValueOrZero = gl => !isWebGL2(gl) ? 0 : undefined;\n\nconst WEBGL_PARAMETERS = {\n  [3074]: gl => !isWebGL2(gl) ? 36064 : undefined,\n  [GL_FRAGMENT_SHADER_DERIVATIVE_HINT]: gl => !isWebGL2(gl) ? GL_DONT_CARE : undefined,\n  [35977]: getWebGL2ValueOrZero,\n  [32937]: getWebGL2ValueOrZero,\n  [GL_GPU_DISJOINT_EXT]: (gl, getParameter) => {\n    const ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n    return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n  },\n  [GL_UNMASKED_VENDOR_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n  },\n  [GL_UNMASKED_RENDERER_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n  },\n  [GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT]: (gl, getParameter) => {\n    const ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n    return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n  },\n  [32883]: getWebGL2ValueOrZero,\n  [35071]: getWebGL2ValueOrZero,\n  [37447]: getWebGL2ValueOrZero,\n  [36063]: (gl, getParameter) => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n    }\n\n    return undefined;\n  },\n  [35379]: getWebGL2ValueOrZero,\n  [35374]: getWebGL2ValueOrZero,\n  [35377]: getWebGL2ValueOrZero,\n  [34852]: gl => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n    }\n\n    return undefined;\n  },\n  [36203]: gl => gl.getExtension(OES_element_index) ? 2147483647 : 65535,\n  [33001]: gl => gl.getExtension(OES_element_index) ? 16777216 : 65535,\n  [33000]: gl => 16777216,\n  [37157]: getWebGL2ValueOrZero,\n  [35373]: getWebGL2ValueOrZero,\n  [35657]: getWebGL2ValueOrZero,\n  [36183]: getWebGL2ValueOrZero,\n  [37137]: getWebGL2ValueOrZero,\n  [34045]: getWebGL2ValueOrZero,\n  [35978]: getWebGL2ValueOrZero,\n  [35979]: getWebGL2ValueOrZero,\n  [35968]: getWebGL2ValueOrZero,\n  [35376]: getWebGL2ValueOrZero,\n  [35375]: getWebGL2ValueOrZero,\n  [35659]: getWebGL2ValueOrZero,\n  [37154]: getWebGL2ValueOrZero,\n  [35371]: getWebGL2ValueOrZero,\n  [35658]: getWebGL2ValueOrZero,\n  [35076]: getWebGL2ValueOrZero,\n  [35077]: getWebGL2ValueOrZero,\n  [35380]: getWebGL2ValueOrZero\n};\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  const limit = WEBGL_PARAMETERS[pname];\n  const value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  const result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nconst OES_vertex_array_object = 'OES_vertex_array_object';\nconst ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport const WEBGL2_CONTEXT_POLYFILLS = {\n  [OES_vertex_array_object]: {\n    meta: {\n      suffix: 'OES'\n    },\n    createVertexArray: () => {\n      assert(false, ERR_VAO_NOT_SUPPORTED);\n    },\n    deleteVertexArray: () => {},\n    bindVertexArray: () => {},\n    isVertexArray: () => false\n  },\n  [ANGLE_instanced_arrays]: {\n    meta: {\n      suffix: 'ANGLE'\n    },\n\n    vertexAttribDivisor(location, divisor) {\n      assert(divisor === 0, 'WebGL instanced rendering not supported');\n    },\n\n    drawElementsInstanced: () => {},\n    drawArraysInstanced: () => {}\n  },\n  [WEBGL_draw_buffers]: {\n    meta: {\n      suffix: 'WEBGL'\n    },\n    drawBuffers: () => {\n      assert(false);\n    }\n  },\n  [EXT_disjoint_timer_query]: {\n    meta: {\n      suffix: 'EXT'\n    },\n    createQuery: () => {\n      assert(false);\n    },\n    deleteQuery: () => {\n      assert(false);\n    },\n    beginQuery: () => {\n      assert(false);\n    },\n    endQuery: () => {},\n\n    getQuery(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryParameter(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryObject: () => {}\n  }\n};\nexport const WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: (gl, originalFunc, attachment) => {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: (gl, originalFunc, location, pname) => {\n    const {\n      webgl2,\n      ext\n    } = getExtensionData(gl, ANGLE_instanced_arrays);\n    let result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: (gl, originalFunc, program, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: (gl, originalFunc, target, format, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n\n  getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        const {\n          extensions\n        } = gl.luma;\n        const ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n\n  getParameter: getParameterPolyfill,\n\n  hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n\n};\n//# sourceMappingURL=polyfill-table.js.map","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export const userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nconst window_ = typeof window !== 'undefined' ? window : global;\nconst global_ = typeof global !== 'undefined' ? global : window;\nconst document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\nlet passiveSupported = false;\n\ntry {\n  const options = {\n    get passive() {\n      passiveSupported = true;\n      return true;\n    }\n\n  };\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport { passiveSupported };\n//# sourceMappingURL=globals.js.map","import { config } from './lib/common';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as Pose } from './classes/pose';\nexport { default as Euler } from './classes/euler';\nexport { default as assert } from './lib/assert';\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nconst global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config\n};\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\n//# sourceMappingURL=index.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=style&index=0&id=47ce6db4&scoped=true&lang=css&\"","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nconst config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure(options = {}) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value, {\n  precision = config.precision || 4\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : new Array(...array);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (let i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians) {\n  return map(radians, angle => Math.sin(angle));\n}\nexport function cos(radians) {\n  return map(radians, angle => Math.cos(angle));\n}\nexport function tan(radians) {\n  return map(radians, angle => Math.tan(angle));\n}\nexport function asin(radians) {\n  return map(radians, angle => Math.asin(angle));\n}\nexport function acos(radians) {\n  return map(radians, angle => Math.acos(angle));\n}\nexport function atan(radians) {\n  return map(radians, angle => Math.atan(angle));\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  const compositeSetters = {};\n\n  for (const key in values) {\n    const glConstant = Number(key);\n    const setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  const cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (const key in compositeSetters) {\n      const compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    const key = parameters;\n    const getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  const parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  const state = {};\n\n  for (const key of parameterKeys) {\n    const getter = GL_PARAMETER_GETTERS[key];\n    state[key] = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  const {\n    nocatch = true\n  } = parameters;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  let value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;\n//# sourceMappingURL=globals.js.map","import { assert } from './assert';\nconst ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport const ERR_WEBGL = ERR_CONTEXT;\nexport const ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","module.exports = __webpack_public_path__ + \"img/gmail.ec142f93.png\";","import { isWebGL2 } from '../utils/webgl-checks';\nexport const GL_PARAMETER_DEFAULTS = {\n  [3042]: false,\n  [32773]: new Float32Array([0, 0, 0, 0]),\n  [32777]: 32774,\n  [34877]: 32774,\n  [32969]: 1,\n  [32968]: 0,\n  [32971]: 1,\n  [32970]: 0,\n  [3106]: new Float32Array([0, 0, 0, 0]),\n  [3107]: [true, true, true, true],\n  [2884]: false,\n  [2885]: 1029,\n  [2929]: false,\n  [2931]: 1,\n  [2932]: 513,\n  [2928]: new Float32Array([0, 1]),\n  [2930]: true,\n  [3024]: true,\n  [36006]: null,\n  [2886]: 2305,\n  [33170]: 4352,\n  [2849]: 1,\n  [32823]: false,\n  [32824]: 0,\n  [10752]: 0,\n  [32938]: 1.0,\n  [32939]: false,\n  [3089]: false,\n  [3088]: new Int32Array([0, 0, 1024, 1024]),\n  [2960]: false,\n  [2961]: 0,\n  [2968]: 0xffffffff,\n  [36005]: 0xffffffff,\n  [2962]: 519,\n  [2967]: 0,\n  [2963]: 0xffffffff,\n  [34816]: 519,\n  [36003]: 0,\n  [36004]: 0xffffffff,\n  [2964]: 7680,\n  [2965]: 7680,\n  [2966]: 7680,\n  [34817]: 7680,\n  [34818]: 7680,\n  [34819]: 7680,\n  [2978]: [0, 0, 1024, 1024],\n  [3333]: 4,\n  [3317]: 4,\n  [37440]: false,\n  [37441]: false,\n  [37443]: 37444,\n  [35723]: 4352,\n  [36010]: null,\n  [35977]: false,\n  [3330]: 0,\n  [3332]: 0,\n  [3331]: 0,\n  [3314]: 0,\n  [32878]: 0,\n  [3316]: 0,\n  [3315]: 0,\n  [32877]: 0\n};\n\nconst enable = (gl, value, key) => value ? gl.enable(key) : gl.disable(key);\n\nconst hint = (gl, value, key) => gl.hint(key, value);\n\nconst pixelStorei = (gl, value, key) => gl.pixelStorei(key, value);\n\nconst drawFramebuffer = (gl, value) => {\n  const target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nconst readFramebuffer = (gl, value) => {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport const GL_PARAMETER_SETTERS = {\n  [3042]: enable,\n  [32773]: (gl, value) => gl.blendColor(...value),\n  [32777]: 'blendEquation',\n  [34877]: 'blendEquation',\n  [32969]: 'blendFunc',\n  [32968]: 'blendFunc',\n  [32971]: 'blendFunc',\n  [32970]: 'blendFunc',\n  [3106]: (gl, value) => gl.clearColor(...value),\n  [3107]: (gl, value) => gl.colorMask(...value),\n  [2884]: enable,\n  [2885]: (gl, value) => gl.cullFace(value),\n  [2929]: enable,\n  [2931]: (gl, value) => gl.clearDepth(value),\n  [2932]: (gl, value) => gl.depthFunc(value),\n  [2928]: (gl, value) => gl.depthRange(...value),\n  [2930]: (gl, value) => gl.depthMask(value),\n  [3024]: enable,\n  [35723]: hint,\n  [36006]: drawFramebuffer,\n  [2886]: (gl, value) => gl.frontFace(value),\n  [33170]: hint,\n  [2849]: (gl, value) => gl.lineWidth(value),\n  [32823]: enable,\n  [32824]: 'polygonOffset',\n  [10752]: 'polygonOffset',\n  [35977]: enable,\n  [32938]: 'sampleCoverage',\n  [32939]: 'sampleCoverage',\n  [3089]: enable,\n  [3088]: (gl, value) => gl.scissor(...value),\n  [2960]: enable,\n  [2961]: (gl, value) => gl.clearStencil(value),\n  [2968]: (gl, value) => gl.stencilMaskSeparate(1028, value),\n  [36005]: (gl, value) => gl.stencilMaskSeparate(1029, value),\n  [2962]: 'stencilFuncFront',\n  [2967]: 'stencilFuncFront',\n  [2963]: 'stencilFuncFront',\n  [34816]: 'stencilFuncBack',\n  [36003]: 'stencilFuncBack',\n  [36004]: 'stencilFuncBack',\n  [2964]: 'stencilOpFront',\n  [2965]: 'stencilOpFront',\n  [2966]: 'stencilOpFront',\n  [34817]: 'stencilOpBack',\n  [34818]: 'stencilOpBack',\n  [34819]: 'stencilOpBack',\n  [2978]: (gl, value) => gl.viewport(...value),\n  [3333]: pixelStorei,\n  [3317]: pixelStorei,\n  [37440]: pixelStorei,\n  [37441]: pixelStorei,\n  [37443]: pixelStorei,\n  [3330]: pixelStorei,\n  [3332]: pixelStorei,\n  [3331]: pixelStorei,\n  [36010]: readFramebuffer,\n  [3314]: pixelStorei,\n  [32878]: pixelStorei,\n  [3316]: pixelStorei,\n  [3315]: pixelStorei,\n  [32877]: pixelStorei,\n  framebuffer: (gl, framebuffer) => {\n    const handle = framebuffer && 'handle' in framebuffer ? framebuffer.handle : framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: (gl, value) => value ? gl.enable(3042) : gl.disable(3042),\n  blendColor: (gl, value) => gl.blendColor(...value),\n  blendEquation: (gl, args) => {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate(...args);\n  },\n  blendFunc: (gl, args) => {\n    args = isArray(args) && args.length === 2 ? [...args, ...args] : args;\n    gl.blendFuncSeparate(...args);\n  },\n  clearColor: (gl, value) => gl.clearColor(...value),\n  clearDepth: (gl, value) => gl.clearDepth(value),\n  clearStencil: (gl, value) => gl.clearStencil(value),\n  colorMask: (gl, value) => gl.colorMask(...value),\n  cull: (gl, value) => value ? gl.enable(2884) : gl.disable(2884),\n  cullFace: (gl, value) => gl.cullFace(value),\n  depthTest: (gl, value) => value ? gl.enable(2929) : gl.disable(2929),\n  depthFunc: (gl, value) => gl.depthFunc(value),\n  depthMask: (gl, value) => gl.depthMask(value),\n  depthRange: (gl, value) => gl.depthRange(...value),\n  dither: (gl, value) => value ? gl.enable(3024) : gl.disable(3024),\n  derivativeHint: (gl, value) => {\n    gl.hint(35723, value);\n  },\n  frontFace: (gl, value) => gl.frontFace(value),\n  mipmapHint: (gl, value) => gl.hint(33170, value),\n  lineWidth: (gl, value) => gl.lineWidth(value),\n  polygonOffsetFill: (gl, value) => value ? gl.enable(32823) : gl.disable(32823),\n  polygonOffset: (gl, value) => gl.polygonOffset(...value),\n  sampleCoverage: (gl, value) => gl.sampleCoverage(...value),\n  scissorTest: (gl, value) => value ? gl.enable(3089) : gl.disable(3089),\n  scissor: (gl, value) => gl.scissor(...value),\n  stencilTest: (gl, value) => value ? gl.enable(2960) : gl.disable(2960),\n  stencilMask: (gl, value) => {\n    value = isArray(value) ? value : [value, value];\n    const [mask, backMask] = value;\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [func, ref, mask, backFunc, backRef, backMask] = args;\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = args;\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: (gl, value) => gl.viewport(...value)\n};\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport const GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: (gl, values, cache) => gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache)),\n  blendFunc: (gl, values, cache) => gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache)),\n  polygonOffset: (gl, values, cache) => gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache)),\n  sampleCoverage: (gl, values, cache) => gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache)),\n  stencilFuncFront: (gl, values, cache) => gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache)),\n  stencilFuncBack: (gl, values, cache) => gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache)),\n  stencilOpFront: (gl, values, cache) => gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache)),\n  stencilOpBack: (gl, values, cache) => gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache))\n};\nexport const GL_HOOKED_SETTERS = {\n  enable: (update, capability) => update({\n    [capability]: true\n  }),\n  disable: (update, capability) => update({\n    [capability]: false\n  }),\n  pixelStorei: (update, pname, value) => update({\n    [pname]: value\n  }),\n  hint: (update, pname, hint) => update({\n    [pname]: hint\n  }),\n  bindFramebuffer: (update, target, framebuffer) => {\n    switch (target) {\n      case 36160:\n        return update({\n          [36006]: framebuffer,\n          [36010]: framebuffer\n        });\n\n      case 36009:\n        return update({\n          [36006]: framebuffer\n        });\n\n      case 36008:\n        return update({\n          [36010]: framebuffer\n        });\n\n      default:\n        return null;\n    }\n  },\n  blendColor: (update, r, g, b, a) => update({\n    [32773]: new Float32Array([r, g, b, a])\n  }),\n  blendEquation: (update, mode) => update({\n    [32777]: mode,\n    [34877]: mode\n  }),\n  blendEquationSeparate: (update, modeRGB, modeAlpha) => update({\n    [32777]: modeRGB,\n    [34877]: modeAlpha\n  }),\n  blendFunc: (update, src, dst) => update({\n    [32969]: src,\n    [32968]: dst,\n    [32971]: src,\n    [32970]: dst\n  }),\n  blendFuncSeparate: (update, srcRGB, dstRGB, srcAlpha, dstAlpha) => update({\n    [32969]: srcRGB,\n    [32968]: dstRGB,\n    [32971]: srcAlpha,\n    [32970]: dstAlpha\n  }),\n  clearColor: (update, r, g, b, a) => update({\n    [3106]: new Float32Array([r, g, b, a])\n  }),\n  clearDepth: (update, depth) => update({\n    [2931]: depth\n  }),\n  clearStencil: (update, s) => update({\n    [2961]: s\n  }),\n  colorMask: (update, r, g, b, a) => update({\n    [3107]: [r, g, b, a]\n  }),\n  cullFace: (update, mode) => update({\n    [2885]: mode\n  }),\n  depthFunc: (update, func) => update({\n    [2932]: func\n  }),\n  depthRange: (update, zNear, zFar) => update({\n    [2928]: new Float32Array([zNear, zFar])\n  }),\n  depthMask: (update, mask) => update({\n    [2930]: mask\n  }),\n  frontFace: (update, face) => update({\n    [2886]: face\n  }),\n  lineWidth: (update, width) => update({\n    [2849]: width\n  }),\n  polygonOffset: (update, factor, units) => update({\n    [32824]: factor,\n    [10752]: units\n  }),\n  sampleCoverage: (update, value, invert) => update({\n    [32938]: value,\n    [32939]: invert\n  }),\n  scissor: (update, x, y, width, height) => update({\n    [3088]: new Int32Array([x, y, width, height])\n  }),\n  stencilMask: (update, mask) => update({\n    [2968]: mask,\n    [36005]: mask\n  }),\n  stencilMaskSeparate: (update, face, mask) => update({\n    [face === 1028 ? 2968 : 36005]: mask\n  }),\n  stencilFunc: (update, func, ref, mask) => update({\n    [2962]: func,\n    [2967]: ref,\n    [2963]: mask,\n    [34816]: func,\n    [36003]: ref,\n    [36004]: mask\n  }),\n  stencilFuncSeparate: (update, face, func, ref, mask) => update({\n    [face === 1028 ? 2962 : 34816]: func,\n    [face === 1028 ? 2967 : 36003]: ref,\n    [face === 1028 ? 2963 : 36004]: mask\n  }),\n  stencilOp: (update, fail, zfail, zpass) => update({\n    [2964]: fail,\n    [2965]: zfail,\n    [2966]: zpass,\n    [34817]: fail,\n    [34818]: zfail,\n    [34819]: zpass\n  }),\n  stencilOpSeparate: (update, face, fail, zfail, zpass) => update({\n    [face === 1028 ? 2964 : 34817]: fail,\n    [face === 1028 ? 2965 : 34818]: zfail,\n    [face === 1028 ? 2966 : 34819]: zpass\n  }),\n  viewport: (update, x, y, width, height) => update({\n    [2978]: [x, y, width, height]\n  })\n};\n\nconst isEnabled = (gl, key) => gl.isEnabled(key);\n\nexport const GL_PARAMETER_GETTERS = {\n  [3042]: isEnabled,\n  [2884]: isEnabled,\n  [2929]: isEnabled,\n  [3024]: isEnabled,\n  [32823]: isEnabled,\n  [32926]: isEnabled,\n  [32928]: isEnabled,\n  [3089]: isEnabled,\n  [2960]: isEnabled,\n  [35977]: isEnabled\n};\n//# sourceMappingURL=webgl-parameter-tables.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron.default)();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","// This file enables: import 'probe.gl/bench'.\n// Note: Must be published using package.json \"files\" field\nmodule.exports = require('./dist/es5/env');\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  copy(vector) {\n    assert(false);\n    return this;\n  }\n\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nconst constants = {};\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron.default;\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2.default)(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2.default)(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","export function isObjectEmpty(object) {\n  for (const key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  const isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  const isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (let i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (Array.isArray(scale)) {\n      return this.multiply(scale);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scale;\n    }\n\n    return this.check();\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    return this.scale(scalar);\n  }\n\n  get elements() {\n    return this;\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-main\"},[_vm._m(0),_c('div',{staticClass:\"home-body\",on:{\"click\":_vm.click}},[_c('div',{staticClass:\"home-cover\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewIdx === 0),expression:\"viewIdx === 0\"}],staticClass:\"home-cover-content\",attrs:{\"id\":\"content0\"}},[_c('div',{staticClass:\"two\"},[_vm._v(\"시 셰퍼드 컨저베이션 소사이어티는\")]),_c('div',{staticClass:\"three\"},[_vm._v(\"해양생물 보호를 위해 해양쓰레기를 수거합니다.\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewIdx === 1),expression:\"viewIdx === 1\"}],staticClass:\"home-cover-content\",attrs:{\"id\":\"content1\"}},[_c('div',{staticClass:\"one\"},[_vm._v(_vm._s(_vm.today)+\" 까지 해양청소에 참여한 사람수\")]),(_vm.viewIdx === 1)?_c('div',{staticClass:\"two\"},[_c('animated-number',{attrs:{\"value\":231,\"duration\":1000,\"formatValue\":_vm.menFormat}})],1):_vm._e(),_c('div',{staticClass:\"three\"},[_vm._v(\"청소를 통해 수거된 쓰레기의 무게\")]),(_vm.viewIdx === 1)?_c('div',{staticClass:\"four\"},[_c('animated-number',{attrs:{\"value\":5000,\"duration\":1000,\"formatValue\":_vm.kiloFormat}})],1):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewIdx === 2),expression:\"viewIdx === 2\"}],staticClass:\"home-cover-content\",attrs:{\"id\":\"content2\"}},[_c('div',{staticClass:\"two\"},[_vm._v(\"환경을 위한 행동을 모두에게 공유해주세요.\")]),_c('div',{staticClass:\"button\",on:{\"click\":_vm.regist}},[_vm._v(\"해양청소 등록하기\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.authInfo.isAuth),expression:\"authInfo.isAuth\"}],staticClass:\"button\",on:{\"click\":_vm.logOut}},[_vm._v(\" 로그아웃 \")])])]),_c('div',{staticClass:\"home-content\"})]),_c('auth',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAuth),expression:\"showAuth\"}],on:{\"setShowAuthFlag\":_vm.setShowAuthFlag}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-header\"},[_c('div',{staticClass:\"home-header-title\"},[_vm._v(\"SEASHEPHERD_KOREA\")])])}]\n\nexport { render, staticRenderFns }","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","function getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id, defaultSettings, type = 'sessionStorage') {\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale, maxWidth = 600) {\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport const COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export function autobind(obj, predefined = ['constructor']) {\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nexport default class Log {\n  constructor({\n    id\n  } = {\n    id: ''\n  }) {\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable(enabled = true) {\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image({\n    logLevel,\n    priority,\n    image,\n    message = '',\n    scale = 1\n  }) {\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message, opts = {\n    collapsed: false\n  }) {\n    opts = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(opts);\n  }\n\n  groupCollapsed(logLevel, message, opts = {}) {\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args = [], opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode({\n  image,\n  message = '',\n  scale = 1\n}) {\n  let asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return () => asciify(image, {\n      fit: 'box',\n      width: \"\".concat(Math.round(80 * scale), \"%\")\n    }).then(data => console.log(data));\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser({\n  image,\n  message = '',\n  scale = 1\n}) {\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import log from '../utils/log';\nexport const COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: () => log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0\n});\nexport const PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport const UNIT = {\n  common: 0,\n  meters: 1,\n  pixels: 2\n};\nexport const EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\n//# sourceMappingURL=constants.js.map","import { Log } from 'probe.gl';\nexport const log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function cssToDeviceRatio(gl) {\n  const {\n    luma\n  } = gl;\n\n  if (gl.canvas && luma) {\n    const {\n      clientWidth\n    } = luma.canvasSizeInfo;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel, yInvert = true) {\n  const ratio = cssToDeviceRatio(gl);\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  const windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  const x = scaleX(pixel[0], ratio, width);\n  let y = scaleY(pixel[1], ratio, height, yInvert);\n  let t = scaleX(pixel[0] + 1, ratio, width);\n  const xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  let yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x,\n    y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  const r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nconst isBrowser = getIsBrowser();\nconst isPage = isBrowser && typeof document !== 'undefined';\nconst CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext(options = {}) {\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    width,\n    height\n  } = options;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  let gl;\n  const {\n    canvas\n  } = options;\n  const targetCanvas = getCanvas({\n    canvas,\n    width,\n    height,\n    onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl, options = {}) {\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    manageState,\n    debug\n  } = options;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: (...args) => log.log(1, ...args)()\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      log.level = Math.max(log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  const vendorMasked = gl.getParameter(7936);\n  const rendererMasked = gl.getParameter(7937);\n  const ext = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  const rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked,\n    rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl, options = {}) {\n  if (gl.canvas) {\n    const devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  const ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && `width` in options && `height` in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  const {\n    onError\n  } = options;\n  let errorMessage = null;\n\n  const onCreateError = error => errorMessage = error.statusMessage || errorMessage;\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  const {\n    webgl1 = true,\n    webgl2 = true\n  } = options;\n  let gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(`Failed to create ${webgl2 && !webgl1 ? 'WebGL2' : 'WebGL'} context: ${errorMessage || 'Unknown error'}`);\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas({\n  canvas,\n  width = 800,\n  height = 600,\n  onError\n}) {\n  let targetCanvas;\n\n  if (typeof canvas === 'string') {\n    const isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(`createGLContext called on canvas '${canvas}' before page was loaded`);\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? `${width}px` : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? `${height}px` : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  const webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  const info = getContextDebugInfo(gl);\n  const driver = info ? `(${info.vendor},${info.renderer})` : '';\n  const debug = gl.debug ? ' debug' : '';\n  log.info(1, `${webGL}${debug} context ${driver}`)();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  let clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  let clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  const cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    let clampedPixelRatio = devicePixelRatio;\n    const canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    const canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      log.warn(`Device pixel ratio clamped`)();\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth,\n      clientHeight,\n      devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","import getHiResTimestamp from '../utils/hi-res-timestamp';\nexport default class Stat {\n  constructor(name, type) {\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  setSampleSize(samples) {\n    this.sampleSize = samples;\n    return this;\n  }\n\n  incrementCount() {\n    this.addCount(1);\n    return this;\n  }\n\n  decrementCount() {\n    this.subtractCount(1);\n    return this;\n  }\n\n  addCount(value) {\n    this._count += value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  subtractCount(value) {\n    this._count -= value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  addTime(time) {\n    this._time += time;\n    this.lastTiming = time;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  timeStart() {\n    this._startTime = getHiResTimestamp();\n    this._timerPending = true;\n    return this;\n  }\n\n  timeEnd() {\n    if (!this._timerPending) {\n      return this;\n    }\n\n    this.addTime(getHiResTimestamp() - this._startTime);\n    this._timerPending = false;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  getSampleAverageCount() {\n    return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n  }\n\n  getSampleAverageTime() {\n    return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n  }\n\n  getSampleHz() {\n    return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n  }\n\n  getAverageCount() {\n    return this.samples > 0 ? this.count / this.samples : 0;\n  }\n\n  getAverageTime() {\n    return this.samples > 0 ? this.time / this.samples : 0;\n  }\n\n  getHz() {\n    return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n  }\n\n  reset() {\n    this.time = 0;\n    this.count = 0;\n    this.samples = 0;\n    this.lastTiming = 0;\n    this.lastSampleTime = 0;\n    this.lastSampleCount = 0;\n    this._count = 0;\n    this._time = 0;\n    this._samples = 0;\n    this._startTime = 0;\n    this._timerPending = false;\n    return this;\n  }\n\n  _checkSampling() {\n    if (this._samples === this.sampleSize) {\n      this.lastSampleTime = this._time;\n      this.lastSampleCount = this._count;\n      this.count += this._count;\n      this.time += this._time;\n      this.samples += this._samples;\n      this._time = 0;\n      this._count = 0;\n      this._samples = 0;\n    }\n  }\n\n}\n//# sourceMappingURL=stat.js.map","import Stat from './stat';\nexport default class Stats {\n  constructor({\n    id,\n    stats\n  }) {\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  get(name, type = 'count') {\n    return this._getOrCreate({\n      name,\n      type\n    });\n  }\n\n  get size() {\n    return Object.keys(this.stats).length;\n  }\n\n  reset() {\n    for (const key in this.stats) {\n      this.stats[key].reset();\n    }\n\n    return this;\n  }\n\n  forEach(fn) {\n    for (const key in this.stats) {\n      fn(this.stats[key]);\n    }\n  }\n\n  getTable() {\n    const table = {};\n    this.forEach(stat => {\n      table[stat.name] = {\n        time: stat.time || 0,\n        count: stat.count || 0,\n        average: stat.getAverageTime() || 0,\n        hz: stat.getHz() || 0\n      };\n    });\n    return table;\n  }\n\n  _initializeStats(stats = []) {\n    stats.forEach(stat => this._getOrCreate(stat));\n  }\n\n  _getOrCreate(stat) {\n    if (!stat || !stat.name) {\n      return null;\n    }\n\n    const {\n      name,\n      type\n    } = stat;\n\n    if (!this.stats[name]) {\n      if (stat instanceof Stat) {\n        this.stats[name] = stat;\n      } else {\n        this.stats[name] = new Stat(name, type);\n      }\n    }\n\n    return this.stats[name];\n  }\n\n}\n//# sourceMappingURL=stats.js.map","import { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nconst VERSION = typeof \"8.5.10\" !== 'undefined' ? \"8.5.10\" : 'untranspiled source';\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nclass StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({\n        id: name\n      }));\n    }\n\n    return this.stats.get(name);\n  }\n\n}\n\nconst lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(`luma.gl - multiple VERSIONs detected: ${global.luma.VERSION} vs ${VERSION}`);\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, `luma.gl ${VERSION} - ${STARTUP_MESSAGE}`)();\n  }\n\n  global.luma = global.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;\n//# sourceMappingURL=init.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '../utils/assert';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  const number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  const value = gl[name];\n  assert(value !== undefined, `Accessing undefined constant GL.${name}`);\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return `GL.${key}`;\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return `GL.${key}`;\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import { assert } from './assert';\nconst uidCounters = {};\nexport function uid(id = 'id') {\n  uidCounters[id] = uidCounters[id] || 1;\n  const count = uidCounters[id]++;\n  return `${id}-${count}`;\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  const upgradeMessage = `See luma.gl ${version} Upgrade Guide at \\\nhttps://luma.gl/docs/upgrade-guide`;\n  const prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(methodName => {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = () => {\n      log.removed(`Calling removed method ${className}.${methodName}: `, upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\nexport default class Resource {\n  constructor(gl, opts = {}) {\n    assertWebGLContext(gl);\n    const {\n      id,\n      userData = {}\n    } = opts;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  toString() {\n    return `${this.constructor.name}(${this.id})`;\n  }\n\n  get handle() {\n    return this._handle;\n  }\n\n  delete({\n    deleteChildren = false\n  } = {}) {\n    const children = this._handle && this._deleteHandle(this._handle);\n\n    if (this._handle) {\n      this._removeStats();\n    }\n\n    this._handle = null;\n\n    if (children && deleteChildren) {\n      children.filter(Boolean).forEach(child => child.delete());\n    }\n\n    return this;\n  }\n\n  bind(funcOrHandle = this.handle) {\n    if (typeof funcOrHandle !== 'function') {\n      this._bindHandle(funcOrHandle);\n\n      return this;\n    }\n\n    let value;\n\n    if (!this._bound) {\n      this._bindHandle(this.handle);\n\n      this._bound = true;\n      value = funcOrHandle();\n      this._bound = false;\n\n      this._bindHandle(null);\n    } else {\n      value = funcOrHandle();\n    }\n\n    return value;\n  }\n\n  unbind() {\n    this.bind(null);\n  }\n\n  getParameter(pname, opts = {}) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        const webgl1Default = parameter.webgl1;\n        const webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n        const defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n        return defaultValue;\n      }\n    }\n\n    return this._getParameter(pname, opts);\n  }\n\n  getParameters(options = {}) {\n    const {\n      parameters,\n      keys\n    } = options;\n    const PARAMETERS = this.constructor.PARAMETERS || {};\n    const isWebgl2 = isWebGL2(this.gl);\n    const values = {};\n    const parameterKeys = parameters || Object.keys(PARAMETERS);\n\n    for (const pname of parameterKeys) {\n      const parameter = PARAMETERS[pname];\n      const parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (parameterAvailable) {\n        const key = keys ? getKey(this.gl, pname) : pname;\n        values[key] = this.getParameter(pname, options);\n\n        if (keys && parameter.type === 'GLenum') {\n          values[key] = getKey(this.gl, values[key]);\n        }\n      }\n    }\n\n    return values;\n  }\n\n  setParameter(pname, value) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        throw new Error('Parameter not available on this platform');\n      }\n\n      if (parameter.type === 'GLenum') {\n        value = getKeyValue(value);\n      }\n    }\n\n    this._setParameter(pname, value);\n\n    return this;\n  }\n\n  setParameters(parameters) {\n    for (const pname in parameters) {\n      this.setParameter(pname, parameters[pname]);\n    }\n\n    return this;\n  }\n\n  stubRemovedMethods(className, version, methodNames) {\n    return stubRemovedMethods(this, className, version, methodNames);\n  }\n\n  initialize(opts) {}\n\n  _createHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _deleteHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _bindHandle(handle) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getOptsFromHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getParameter(pname, opts) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _setParameter(pname, value) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _context() {\n    this.gl.luma = this.gl.luma || {};\n    return this.gl.luma;\n  }\n\n  _addStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get('Resources Created').incrementCount();\n    stats.get(`${name}s Created`).incrementCount();\n    stats.get(`${name}s Active`).incrementCount();\n  }\n\n  _removeStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get(`${name}s Active`).decrementCount();\n  }\n\n  _trackAllocatedMemory(bytes, name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').addCount(bytes);\n    stats.get(`${name} Memory`).addCount(bytes);\n    this.byteLength = bytes;\n  }\n\n  _trackDeallocatedMemory(name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').subtractCount(this.byteLength);\n    stats.get(`${name} Memory`).subtractCount(this.byteLength);\n    this.byteLength = 0;\n  }\n\n}\n//# sourceMappingURL=resource.js.map","const ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  const type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType, {\n  clamped = true\n} = {}) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows({\n  data,\n  width,\n  height,\n  bytesPerPixel = 4,\n  temp\n}) {\n  const bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (let y = 0; y < height / 2; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels({\n  data,\n  width,\n  height\n}) {\n  const newWidth = Math.round(width / 2);\n  const newHeight = Math.round(height / 2);\n  const newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (let y = 0; y < newHeight; y++) {\n    for (let x = 0; x < newWidth; x++) {\n      for (let c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  const {\n    removedProps = {},\n    deprecatedProps = {},\n    replacedProps = {}\n  } = propChecks;\n\n  for (const propName in removedProps) {\n    if (propName in props) {\n      const replacementProp = removedProps[propName];\n      const replacement = replacementProp ? `${className}.${removedProps[propName]}` : 'N/A';\n      log.removed(`${className}.${propName}`, replacement)();\n    }\n  }\n\n  for (const propName in deprecatedProps) {\n    if (propName in props) {\n      const replacementProp = deprecatedProps[propName];\n      log.deprecated(`${className}.${propName}`, `${className}.${replacementProp}`)();\n    }\n  }\n\n  let newProps = null;\n\n  for (const propName in replacedProps) {\n    if (propName in props) {\n      const replacementProp = replacedProps[propName];\n      log.deprecated(`${className}.${propName}`, `${className}.${replacementProp}`)();\n      newProps = newProps || Object.assign({}, props);\n      newProps[replacementProp] = props[propName];\n      delete newProps[propName];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import { getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nconst PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\nexport default class Accessor {\n  static getBytesPerElement(accessor) {\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static getBytesPerVertex(accessor) {\n    assert(accessor.size);\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n  }\n\n  static resolve(...accessors) {\n    return new Accessor(...[DEFAULT_ACCESSOR_VALUES, ...accessors]);\n  }\n\n  constructor(...accessors) {\n    accessors.forEach(accessor => this._assign(accessor));\n    Object.freeze(this);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n\n  get BYTES_PER_ELEMENT() {\n    return Accessor.getBytesPerElement(this);\n  }\n\n  get BYTES_PER_VERTEX() {\n    return Accessor.getBytesPerVertex(this);\n  }\n\n  _assign(props = {}) {\n    props = checkProps('Accessor', props, PROP_CHECKS);\n\n    if (props.type !== undefined) {\n      this.type = props.type;\n\n      if (props.type === 5124 || props.type === 5125) {\n        this.integer = true;\n      }\n    }\n\n    if (props.size !== undefined) {\n      this.size = props.size;\n    }\n\n    if (props.offset !== undefined) {\n      this.offset = props.offset;\n    }\n\n    if (props.stride !== undefined) {\n      this.stride = props.stride;\n    }\n\n    if (props.normalized !== undefined) {\n      this.normalized = props.normalized;\n    }\n\n    if (props.integer !== undefined) {\n      this.integer = props.integer;\n    }\n\n    if (props.divisor !== undefined) {\n      this.divisor = props.divisor;\n    }\n\n    if (props.buffer !== undefined) {\n      this.buffer = props.buffer;\n    }\n\n    if (props.index !== undefined) {\n      if (typeof props.index === 'boolean') {\n        this.index = props.index ? 1 : 0;\n      } else {\n        this.index = props.index;\n      }\n    }\n\n    if (props.instanced !== undefined) {\n      this.divisor = props.instanced ? 1 : 0;\n    }\n\n    if (props.isInstanced !== undefined) {\n      this.divisor = props.isInstanced ? 1 : 0;\n    }\n\n    return this;\n  }\n\n}\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEBUG_DATA_LENGTH = 10;\nconst DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nconst PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nconst PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\nexport default class Buffer extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n    this.target = props.target || (this.gl.webgl2 ? 36662 : 34962);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  getElementCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n  }\n\n  getVertexCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n  }\n\n  initialize(props = {}) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    if (Number.isFinite(props)) {\n      props = {\n        byteLength: props\n      };\n    }\n\n    props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n    this.usage = props.usage || 35044;\n    this.debugData = null;\n    this.setAccessor(Object.assign({}, props, props.accessor));\n\n    if (props.data) {\n      this._setData(props.data, props.offset, props.byteLength);\n    } else {\n      this._setByteLength(props.byteLength || 0);\n    }\n\n    return this;\n  }\n\n  setProps(props) {\n    props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n    if ('accessor' in props) {\n      this.setAccessor(props.accessor);\n    }\n\n    return this;\n  }\n\n  setAccessor(accessor) {\n    accessor = Object.assign({}, accessor);\n    delete accessor.buffer;\n    this.accessor = new Accessor(accessor);\n    return this;\n  }\n\n  reallocate(byteLength) {\n    if (byteLength > this.byteLength) {\n      this._setByteLength(byteLength);\n\n      return true;\n    }\n\n    this.bytesUsed = byteLength;\n    return false;\n  }\n\n  setData(props) {\n    return this.initialize(props);\n  }\n\n  subData(props) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    const {\n      data,\n      offset = 0,\n      srcOffset = 0\n    } = props;\n    const byteLength = props.byteLength || props.length;\n    assert(data);\n    const target = this.gl.webgl2 ? 36663 : this.target;\n    this.gl.bindBuffer(target, this.handle);\n\n    if (srcOffset !== 0 || byteLength !== undefined) {\n      assertWebGL2Context(this.gl);\n      this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n    } else {\n      this.gl.bufferSubData(target, offset, data);\n    }\n\n    this.gl.bindBuffer(target, null);\n    this.debugData = null;\n\n    this._inferType(data);\n\n    return this;\n  }\n\n  copyData({\n    sourceBuffer,\n    readOffset = 0,\n    writeOffset = 0,\n    size\n  }) {\n    const {\n      gl\n    } = this;\n    assertWebGL2Context(gl);\n    gl.bindBuffer(36662, sourceBuffer.handle);\n    gl.bindBuffer(36663, this.handle);\n    gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n    gl.bindBuffer(36662, null);\n    gl.bindBuffer(36663, null);\n    this.debugData = null;\n    return this;\n  }\n\n  getData({\n    dstData = null,\n    srcByteOffset = 0,\n    dstOffset = 0,\n    length = 0\n  } = {}) {\n    assertWebGL2Context(this.gl);\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n\n    const sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n    const dstElementOffset = dstOffset;\n    let dstAvailableElementCount;\n    let dstElementCount;\n\n    if (dstData) {\n      dstElementCount = dstData.length;\n      dstAvailableElementCount = dstElementCount - dstElementOffset;\n    } else {\n      dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n      dstElementCount = dstElementOffset + dstAvailableElementCount;\n    }\n\n    const copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n    length = length || copyElementCount;\n    assert(length <= copyElementCount);\n    dstData = dstData || new ArrayType(dstElementCount);\n    this.gl.bindBuffer(36662, this.handle);\n    this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n    this.gl.bindBuffer(36662, null);\n    return dstData;\n  }\n\n  bind({\n    target = this.target,\n    index = this.accessor && this.accessor.index,\n    offset = 0,\n    size\n  } = {}) {\n    if (target === 35345 || target === 35982) {\n      if (size !== undefined) {\n        this.gl.bindBufferRange(target, index, this.handle, offset, size);\n      } else {\n        assert(offset === 0);\n        this.gl.bindBufferBase(target, index, this.handle);\n      }\n    } else {\n      this.gl.bindBuffer(target, this.handle);\n    }\n\n    return this;\n  }\n\n  unbind({\n    target = this.target,\n    index = this.accessor && this.accessor.index\n  } = {}) {\n    const isIndexedBuffer = target === 35345 || target === 35982;\n\n    if (isIndexedBuffer) {\n      this.gl.bindBufferBase(target, index, null);\n    } else {\n      this.gl.bindBuffer(target, null);\n    }\n\n    return this;\n  }\n\n  getDebugData() {\n    if (!this.debugData) {\n      this.debugData = this.getData({\n        length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n      });\n      return {\n        data: this.debugData,\n        changed: true\n      };\n    }\n\n    return {\n      data: this.debugData,\n      changed: false\n    };\n  }\n\n  invalidateDebugData() {\n    this.debugData = null;\n  }\n\n  _setData(data, offset = 0, byteLength = data.byteLength + offset) {\n    assert(ArrayBuffer.isView(data));\n\n    this._trackDeallocatedMemory();\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, byteLength, this.usage);\n    this.gl.bufferSubData(target, offset, data);\n    this.gl.bindBuffer(target, null);\n    this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    const type = getGLTypeFromTypedArray(data);\n    assert(type);\n    this.setAccessor(new Accessor(this.accessor, {\n      type\n    }));\n    return this;\n  }\n\n  _setByteLength(byteLength, usage = this.usage) {\n    assert(byteLength >= 0);\n\n    this._trackDeallocatedMemory();\n\n    let data = byteLength;\n\n    if (byteLength === 0) {\n      data = new Float32Array(0);\n    }\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, data, usage);\n    this.gl.bindBuffer(target, null);\n    this.usage = usage;\n    this.debugData = null;\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    return this;\n  }\n\n  _getTarget() {\n    return this.gl.webgl2 ? 36663 : this.target;\n  }\n\n  _getAvailableElementCount(srcByteOffset) {\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n    const sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n    return this.getElementCount() - sourceElementOffset;\n  }\n\n  _inferType(data) {\n    if (!this.accessor.type) {\n      this.setAccessor(new Accessor(this.accessor, {\n        type: getGLTypeFromTypedArray(data)\n      }));\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createBuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteBuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _getParameter(pname) {\n    this.gl.bindBuffer(this.target, this.handle);\n    const value = this.gl.getBufferParameter(this.target, pname);\n    this.gl.bindBuffer(this.target, null);\n    return value;\n  }\n\n  get type() {\n    log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n    return this.accessor.type;\n  }\n\n  get bytes() {\n    log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n    return this.byteLength;\n  }\n\n  setByteLength(byteLength) {\n    log.deprecated('setByteLength', 'reallocate')();\n    return this.reallocate(byteLength);\n  }\n\n  updateAccessor(opts) {\n    log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n    this.accessor = new Accessor(this.accessor, opts);\n    return this;\n  }\n\n}\n//# sourceMappingURL=buffer.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nexport const TEXTURE_FORMATS = {\n  [6407]: {\n    dataFormat: 6407,\n    types: [5121, 33635]\n  },\n  [6408]: {\n    dataFormat: 6408,\n    types: [5121, 32819, 32820]\n  },\n  [6406]: {\n    dataFormat: 6406,\n    types: [5121]\n  },\n  [6409]: {\n    dataFormat: 6409,\n    types: [5121]\n  },\n  [6410]: {\n    dataFormat: 6410,\n    types: [5121]\n  },\n  [33326]: {\n    dataFormat: 6403,\n    types: [5126],\n    gl2: true\n  },\n  [33328]: {\n    dataFormat: 33319,\n    types: [5126],\n    gl2: true\n  },\n  [34837]: {\n    dataFormat: 6407,\n    types: [5126],\n    gl2: true\n  },\n  [34836]: {\n    dataFormat: 6408,\n    types: [5126],\n    gl2: true\n  }\n};\nexport const DATA_FORMAT_CHANNELS = {\n  [6403]: 1,\n  [36244]: 1,\n  [33319]: 2,\n  [33320]: 2,\n  [6407]: 3,\n  [36248]: 3,\n  [6408]: 4,\n  [36249]: 4,\n  [6402]: 1,\n  [34041]: 1,\n  [6406]: 1,\n  [6409]: 1,\n  [6410]: 2\n};\nexport const TYPE_SIZES = {\n  [5126]: 4,\n  [5125]: 4,\n  [5124]: 4,\n  [5123]: 2,\n  [5122]: 2,\n  [5131]: 2,\n  [5120]: 1,\n  [5121]: 1\n};\nexport function isFormatSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { assert } from '../utils/assert';\nimport { uid, isPowerOfTwo } from '../utils/utils';\nconst NPOT_MIN_FILTERS = [9729, 9728];\n\nconst WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nexport default class Texture extends Resource {\n  static isSupported(gl, opts = {}) {\n    const {\n      format,\n      linearFiltering\n    } = opts;\n    let supported = true;\n\n    if (format) {\n      supported = supported && isFormatSupported(gl, format);\n      supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n    }\n\n    return supported;\n  }\n\n  constructor(gl, props) {\n    const {\n      id = uid('texture'),\n      handle,\n      target\n    } = props;\n    super(gl, {\n      id,\n      handle\n    });\n    this.target = target;\n    this.textureUnit = undefined;\n    this.loaded = false;\n    this.width = undefined;\n    this.height = undefined;\n    this.depth = undefined;\n    this.format = undefined;\n    this.type = undefined;\n    this.dataFormat = undefined;\n    this.border = undefined;\n    this.textureUnit = undefined;\n    this.mipmaps = undefined;\n  }\n\n  toString() {\n    return `Texture(${this.id},${this.width}x${this.height})`;\n  }\n\n  initialize(props = {}) {\n    let data = props.data;\n\n    if (data instanceof Promise) {\n      data.then(resolvedImageData => this.initialize(Object.assign({}, props, {\n        pixels: resolvedImageData,\n        data: resolvedImageData\n      })));\n      return this;\n    }\n\n    const isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n    if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n      this._video = null;\n      data.addEventListener('loadeddata', () => this.initialize(props));\n      return this;\n    }\n\n    const {\n      pixels = null,\n      format = 6408,\n      border = 0,\n      recreate = false,\n      parameters = {},\n      pixelStore = {},\n      textureUnit = undefined\n    } = props;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed = false,\n      mipmaps = true\n    } = props;\n    const {\n      depth = 0\n    } = props;\n    ({\n      width,\n      height,\n      compressed,\n      dataFormat,\n      type\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n    this.format = format;\n    this.type = type;\n    this.dataFormat = dataFormat;\n    this.border = border;\n    this.textureUnit = textureUnit;\n\n    if (Number.isFinite(this.textureUnit)) {\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n    }\n\n    if (mipmaps && this._isNPOT()) {\n      log.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)();\n      mipmaps = false;\n\n      this._updateForNPOT(parameters);\n    }\n\n    this.mipmaps = mipmaps;\n    this.setImageData({\n      data,\n      width,\n      height,\n      depth,\n      format,\n      type,\n      dataFormat,\n      border,\n      mipmaps,\n      parameters: pixelStore,\n      compressed\n    });\n\n    if (mipmaps) {\n      this.generateMipmap();\n    }\n\n    this.setParameters(parameters);\n\n    if (recreate) {\n      this.data = data;\n    }\n\n    if (isVideo) {\n      this._video = {\n        video: data,\n        parameters,\n        lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n      };\n    }\n\n    return this;\n  }\n\n  update() {\n    if (this._video) {\n      const {\n        video,\n        parameters,\n        lastTime\n      } = this._video;\n\n      if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n        return;\n      }\n\n      this.setSubImageData({\n        data: video,\n        parameters\n      });\n\n      if (this.mipmaps) {\n        this.generateMipmap();\n      }\n\n      this._video.lastTime = video.currentTime;\n    }\n  }\n\n  resize({\n    height,\n    width,\n    mipmaps = false\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        type: this.type,\n        dataFormat: this.dataFormat,\n        border: this.border,\n        mipmaps\n      });\n    }\n\n    return this;\n  }\n\n  generateMipmap(params = {}) {\n    if (this._isNPOT()) {\n      log.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)();\n      return this;\n    }\n\n    this.mipmaps = true;\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, params, () => {\n      this.gl.generateMipmap(this.target);\n    });\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  setImageData(options) {\n    this._trackDeallocatedMemory('Texture');\n\n    const {\n      target = this.target,\n      pixels = null,\n      level = 0,\n      format = this.format,\n      border = this.border,\n      offset = 0,\n      parameters = {}\n    } = options;\n    let {\n      data = null,\n      type = this.type,\n      width = this.width,\n      height = this.height,\n      dataFormat = this.dataFormat,\n      compressed = false\n    } = options;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    const {\n      gl\n    } = this;\n    gl.bindTexture(this.target, this.handle);\n    let dataType = null;\n    ({\n      data,\n      dataType\n    } = this._getDataType({\n      data,\n      compressed\n    }));\n    let gl2;\n    withParameters(this.gl, parameters, () => {\n      switch (dataType) {\n        case 'null':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          break;\n\n        case 'typed-array':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n          break;\n\n        case 'buffer':\n          gl2 = assertWebGL2Context(gl);\n          gl2.bindBuffer(35052, data.handle || data);\n          gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n          break;\n\n        case 'browser-object':\n          if (isWebGL2(gl)) {\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          } else {\n            gl.texImage2D(target, level, format, dataFormat, type, data);\n          }\n\n          break;\n\n        case 'compressed':\n          for (const [levelIndex, levelData] of data.entries()) {\n            gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n          }\n\n          break;\n\n        default:\n          assert(false, 'Unknown image data type');\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n  setSubImageData({\n    target = this.target,\n    pixels = null,\n    data = null,\n    x = 0,\n    y = 0,\n    width = this.width,\n    height = this.height,\n    level = 0,\n    format = this.format,\n    type = this.type,\n    dataFormat = this.dataFormat,\n    compressed = false,\n    offset = 0,\n    border = this.border,\n    parameters = {}\n  }) {\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n    if (!data) {\n      data = pixels;\n    }\n\n    if (data && data.data) {\n      const ndarray = data;\n      data = ndarray.data;\n      width = ndarray.shape[0];\n      height = ndarray.shape[1];\n    }\n\n    if (data instanceof Buffer) {\n      data = data.handle;\n    }\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (compressed) {\n        this.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n      } else if (data === null) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n      } else if (ArrayBuffer.isView(data)) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n      } else if (data instanceof WebGLBuffer) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.bindBuffer(35052, data);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n        gl2.bindBuffer(35052, null);\n      } else if (isWebGL2(this.gl)) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n      } else {\n        this.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n      }\n    });\n    this.gl.bindTexture(this.target, null);\n  }\n\n  copyFramebuffer(opts = {}) {\n    log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(34016) - 33984;\n  }\n\n  bind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, null);\n    return textureUnit;\n  }\n\n  _getDataType({\n    data,\n    compressed = false\n  }) {\n    if (compressed) {\n      return {\n        data,\n        dataType: 'compressed'\n      };\n    }\n\n    if (data === null) {\n      return {\n        data,\n        dataType: 'null'\n      };\n    }\n\n    if (ArrayBuffer.isView(data)) {\n      return {\n        data,\n        dataType: 'typed-array'\n      };\n    }\n\n    if (data instanceof Buffer) {\n      return {\n        data: data.handle,\n        dataType: 'buffer'\n      };\n    }\n\n    if (data instanceof WebGLBuffer) {\n      return {\n        data,\n        dataType: 'buffer'\n      };\n    }\n\n    return {\n      data,\n      dataType: 'browser-object'\n    };\n  }\n\n  _deduceParameters(opts) {\n    const {\n      format,\n      data\n    } = opts;\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed\n    } = opts;\n    const textureFormat = TEXTURE_FORMATS[format];\n    dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n    type = type || textureFormat && textureFormat.types[0];\n    compressed = compressed || textureFormat && textureFormat.compressed;\n    ({\n      width,\n      height\n    } = this._deduceImageSize(data, width, height));\n    return {\n      dataFormat,\n      type,\n      compressed,\n      width,\n      height,\n      format,\n      data\n    };\n  }\n\n  _deduceImageSize(data, width, height) {\n    let size;\n\n    if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n      size = {\n        width: data.naturalWidth,\n        height: data.naturalHeight\n      };\n    } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n      size = {\n        width: data.videoWidth,\n        height: data.videoHeight\n      };\n    } else if (!data) {\n      size = {\n        width: width >= 0 ? width : 1,\n        height: height >= 0 ? height : 1\n      };\n    } else {\n      size = {\n        width,\n        height\n      };\n    }\n\n    assert(size, 'Could not deduced texture size');\n    assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n    assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n    return size;\n  }\n\n  _createHandle() {\n    return this.gl.createTexture();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTexture(this.handle);\n\n    this._trackDeallocatedMemory('Texture');\n  }\n\n  _getParameter(pname) {\n    switch (pname) {\n      case 4096:\n        return this.width;\n\n      case 4097:\n        return this.height;\n\n      default:\n        this.gl.bindTexture(this.target, this.handle);\n        const value = this.gl.getTexParameter(this.target, pname);\n        this.gl.bindTexture(this.target, null);\n        return value;\n    }\n  }\n\n  _setParameter(pname, param) {\n    this.gl.bindTexture(this.target, this.handle);\n    param = this._getNPOTParam(pname, param);\n\n    switch (pname) {\n      case 33082:\n      case 33083:\n        this.gl.texParameterf(this.handle, pname, param);\n        break;\n\n      case 4096:\n      case 4097:\n        assert(false);\n        break;\n\n      default:\n        this.gl.texParameteri(this.target, pname, param);\n        break;\n    }\n\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  _isNPOT() {\n    if (isWebGL2(this.gl)) {\n      return false;\n    }\n\n    if (!this.width || !this.height) {\n      return false;\n    }\n\n    return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n  }\n\n  _updateForNPOT(parameters) {\n    if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n      parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n    }\n  }\n\n  _getNPOTParam(pname, param) {\n    if (this._isNPOT()) {\n      switch (pname) {\n        case 10241:\n          if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n            param = 9729;\n          }\n\n          break;\n\n        case 10242:\n        case 10243:\n          if (param !== 33071) {\n            param = 33071;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return param;\n  }\n\n}\n//# sourceMappingURL=texture.js.map","import { assert } from '../utils/assert';\nlet pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url, options = {}) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  const dataType = options.dataType || 'text';\n  return fetch(url, options).then(res => res[dataType]());\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n\n      image.onload = () => resolve(image);\n\n      image.onerror = () => reject(new Error(`Could not load image ${url}.`));\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\nexport default class Texture2D extends Texture {\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    super(gl, Object.assign({}, props, {\n      target: 3553\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n}\n//# sourceMappingURL=texture-2d.js.map","const EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default {\n  [33189]: {\n    bpp: 2\n  },\n  [33190]: {\n    gl2: true,\n    bpp: 3\n  },\n  [36012]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36168]: {\n    bpp: 1\n  },\n  [34041]: {\n    bpp: 4\n  },\n  [35056]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36013]: {\n    gl2: true,\n    bpp: 5\n  },\n  [32854]: {\n    bpp: 2\n  },\n  [36194]: {\n    bpp: 2\n  },\n  [32855]: {\n    bpp: 2\n  },\n  [33321]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33330]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33329]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33332]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33331]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33334]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33333]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33323]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33336]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33335]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33338]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33337]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33340]: {\n    gl2: true,\n    bpp: 8\n  },\n  [33339]: {\n    gl2: true,\n    bpp: 8\n  },\n  [32849]: {\n    gl2: true,\n    bpp: 3\n  },\n  [32856]: {\n    gl2: true,\n    bpp: 4\n  },\n  [32857]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36220]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36238]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36975]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36214]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36232]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36226]: {\n    gl2: true,\n    bpp: 16\n  },\n  [36208]: {\n    gl2: true,\n    bpp: 16\n  },\n  [33325]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 2\n  },\n  [33327]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [34842]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [33326]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [33328]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [34836]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 16\n  },\n  [35898]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  }\n};\n//# sourceMappingURL=renderbuffer-formats.js.map","import Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\n\nfunction isFormatSupported(gl, format, formats) {\n  const info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nexport default class Renderbuffer extends Resource {\n  static isSupported(gl, {\n    format\n  } = {\n    format: null\n  }) {\n    return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n  }\n\n  static getSamplesForFormat(gl, {\n    format\n  }) {\n    return gl.getInternalformatParameter(36161, format, 32937);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  initialize({\n    format,\n    width = 1,\n    height = 1,\n    samples = 0\n  }) {\n    assert(format, 'Needs format');\n\n    this._trackDeallocatedMemory();\n\n    this.gl.bindRenderbuffer(36161, this.handle);\n\n    if (samples !== 0 && isWebGL2(this.gl)) {\n      this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n    } else {\n      this.gl.renderbufferStorage(36161, format, width, height);\n    }\n\n    this.format = format;\n    this.width = width;\n    this.height = height;\n    this.samples = samples;\n\n    this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n    return this;\n  }\n\n  resize({\n    width,\n    height\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        samples: this.samples\n      });\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createRenderbuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteRenderbuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindRenderbuffer(36161, handle);\n  }\n\n  _syncHandle(handle) {\n    this.format = this.getParameter(36164);\n    this.width = this.getParameter(36162);\n    this.height = this.getParameter(36163);\n    this.samples = this.getParameter(36011);\n  }\n\n  _getParameter(pname) {\n    this.gl.bindRenderbuffer(36161, this.handle);\n    const value = this.gl.getRenderbufferParameter(36161, pname);\n    return value;\n  }\n\n}\n//# sourceMappingURL=renderbuffer.js.map","import { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\nconst ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl, {\n  framebuffer = null,\n  color = null,\n  depth = null,\n  stencil = null\n} = {}) {\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl, {\n  framebuffer = null,\n  buffer = GL_COLOR,\n  drawBuffer = 0,\n  value = [0, 0, 0, 0]\n} = {}) {\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer\n  }, () => {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils/assert';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nconst FACES = [34069, 34070, 34071, 34072, 34073, 34074];\nexport default class TextureCube extends Texture {\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n    super(gl, Object.assign({}, props, {\n      target: 34067\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    const {\n      mipmaps = true,\n      parameters = {}\n    } = props;\n    this.opts = props;\n    this.setCubeMapImageData(props).then(() => {\n      this.loaded = true;\n\n      if (mipmaps) {\n        this.generateMipmap(props);\n      }\n\n      this.setParameters(parameters);\n    });\n    return this;\n  }\n\n  subImage({\n    face,\n    data,\n    x = 0,\n    y = 0,\n    mipmapLevel = 0\n  }) {\n    return this._subImage({\n      target: face,\n      data,\n      x,\n      y,\n      mipmapLevel\n    });\n  }\n\n  async setCubeMapImageData({\n    width,\n    height,\n    pixels,\n    data,\n    border = 0,\n    format = 6408,\n    type = 5121\n  }) {\n    const {\n      gl\n    } = this;\n    const imageDataMap = pixels || data;\n    const resolvedFaces = await Promise.all(FACES.map(face => {\n      const facePixels = imageDataMap[face];\n      return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n    }));\n    this.bind();\n    FACES.forEach((face, index) => {\n      if (resolvedFaces[index].length > 1 && this.opts.mipmaps !== false) {\n        log.warn(`${this.id} has mipmap and multiple LODs.`)();\n      }\n\n      resolvedFaces[index].forEach((image, lodLevel) => {\n        if (width && height) {\n          gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n        } else {\n          gl.texImage2D(face, lodLevel, format, format, type, image);\n        }\n      });\n    });\n    this.unbind();\n  }\n\n  setImageDataForFace(options) {\n    const {\n      face,\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = options;\n    const {\n      gl\n    } = this;\n    const imageData = pixels || data;\n    this.bind();\n\n    if (imageData instanceof Promise) {\n      imageData.then(resolvedImageData => this.setImageDataForFace(Object.assign({}, options, {\n        face,\n        data: resolvedImageData,\n        pixels: resolvedImageData\n      })));\n    } else if (this.width || this.height) {\n      gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n    } else {\n      gl.texImage2D(face, 0, format, format, type, imageData);\n    }\n\n    return this;\n  }\n\n}\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\nexport default class Texture3D extends Texture {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    super(gl, props);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  setImageData({\n    level = 0,\n    dataFormat = 6408,\n    width,\n    height,\n    depth = 1,\n    border = 0,\n    format,\n    type = 5121,\n    offset = 0,\n    data,\n    parameters = {}\n  }) {\n    this._trackDeallocatedMemory('Texture');\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (ArrayBuffer.isView(data)) {\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, data);\n      }\n\n      if (data instanceof Buffer) {\n        this.gl.bindBuffer(35052, data.handle);\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, offset);\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n}\n//# sourceMappingURL=texture-3d.js.map","import Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils/assert';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  const TextureType = refTexture.constructor;\n  const {\n    gl,\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  } = refTexture;\n  const textureOptions = Object.assign({\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  const {\n    gl,\n    width,\n    height,\n    id\n  } = texture;\n  const framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: `framebuffer-for-${id}`,\n    width,\n    height,\n    attachments: {\n      [36064]: texture\n    }\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils/typed-array-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils/assert';\nexport function readPixelsToArray(source, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408\n  } = options;\n  let {\n    sourceAttachment = 36064,\n    target = null,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle,\n    attachments\n  } = framebuffer;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, {\n  sourceX = 0,\n  sourceY = 0,\n  sourceFormat = 6408,\n  target = null,\n  targetByteOffset = 0,\n  sourceWidth,\n  sourceHeight,\n  sourceType\n}) {\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  const gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    const components = glFormatToComponents(sourceFormat);\n    const byteCount = glTypeToBytes(sourceType);\n    const byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer\n  }, () => {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source, {\n  sourceAttachment = 36064,\n  targetMaxHeight = Number.MAX_SAFE_INTEGER\n} = {}) {\n  let data = readPixelsToArray(source, {\n    sourceAttachment\n  });\n  let {\n    width,\n    height\n  } = source;\n\n  while (height > targetMaxHeight) {\n    ({\n      data,\n      width,\n      height\n    } = scalePixels({\n      data,\n      width,\n      height\n    }));\n  }\n\n  flipRows({\n    data,\n    width,\n    height\n  });\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source, {\n  sourceAttachment = 36064,\n  targetImage = null\n} = {}) {\n  const dataUrl = copyToDataUrl(source, {\n    sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    targetMipmaplevel = 0,\n    targetInternalFormat = 6408\n  } = options;\n  let {\n    targetX,\n    targetY,\n    targetZ,\n    width,\n    height\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle\n  } = framebuffer;\n  const isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  let texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return texture;\n}\nexport function blit(source, target, options = {}) {\n  const {\n    sourceX0 = 0,\n    sourceY0 = 0,\n    targetX0 = 0,\n    targetY0 = 0,\n    color = true,\n    depth = false,\n    stencil = false,\n    filter = 9728\n  } = options;\n  let {\n    sourceX1,\n    sourceY1,\n    targetX1,\n    targetY1,\n    sourceAttachment = 36064,\n    mask = 0\n  } = options;\n  const {\n    framebuffer: srcFramebuffer,\n    deleteFramebuffer: deleteSrcFramebuffer\n  } = getFramebuffer(source);\n  const {\n    framebuffer: dstFramebuffer,\n    deleteFramebuffer: deleteDstFramebuffer\n  } = getFramebuffer(target);\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  const {\n    gl,\n    handle,\n    width,\n    height,\n    readBuffer\n  } = dstFramebuffer;\n  const gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  const prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  const prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer.delete();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer.delete();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  const ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  const components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import { getWebGL2Context, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nconst ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\nexport default class Framebuffer extends Resource {\n  static isSupported(gl, options = {}) {\n    const {\n      colorBufferFloat,\n      colorBufferHalfFloat\n    } = options;\n    let supported = true;\n\n    if (colorBufferFloat) {\n      supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n    }\n\n    if (colorBufferHalfFloat) {\n      supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n    }\n\n    return supported;\n  }\n\n  static getDefaultFramebuffer(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n      id: 'default-framebuffer',\n      handle: null,\n      attachments: {}\n    });\n    return gl.luma.defaultFramebuffer;\n  }\n\n  get MAX_COLOR_ATTACHMENTS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n  }\n\n  get MAX_DRAW_BUFFERS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.width = null;\n    this.height = null;\n    this.attachments = {};\n    this.readBuffer = 36064;\n    this.drawBuffers = [36064];\n    this.ownResources = [];\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  get color() {\n    return this.attachments[36064] || null;\n  }\n\n  get texture() {\n    return this.attachments[36064] || null;\n  }\n\n  get depth() {\n    return this.attachments[36096] || this.attachments[33306] || null;\n  }\n\n  get stencil() {\n    return this.attachments[36128] || this.attachments[33306] || null;\n  }\n\n  initialize({\n    width = 1,\n    height = 1,\n    attachments = null,\n    color = true,\n    depth = true,\n    stencil = false,\n    check = true,\n    readBuffer = undefined,\n    drawBuffers = undefined\n  }) {\n    assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n    this.width = width;\n    this.height = height;\n\n    if (attachments) {\n      for (const attachment in attachments) {\n        const target = attachments[attachment];\n        const object = Array.isArray(target) ? target[0] : target;\n        object.resize({\n          width,\n          height\n        });\n      }\n    } else {\n      attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n    }\n\n    this.update({\n      clearAttachments: true,\n      attachments,\n      readBuffer,\n      drawBuffers\n    });\n\n    if (attachments && check) {\n      this.checkStatus();\n    }\n  }\n\n  delete() {\n    for (const resource of this.ownResources) {\n      resource.delete();\n    }\n\n    super.delete();\n    return this;\n  }\n\n  update({\n    attachments = {},\n    readBuffer,\n    drawBuffers,\n    clearAttachments = false,\n    resizeAttachments = true\n  }) {\n    this.attach(attachments, {\n      clearAttachments,\n      resizeAttachments\n    });\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n    if (readBuffer) {\n      this._setReadBuffer(readBuffer);\n    }\n\n    if (drawBuffers) {\n      this._setDrawBuffers(drawBuffers);\n    }\n\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  resize(options = {}) {\n    let {\n      width,\n      height\n    } = options;\n\n    if (this.handle === null) {\n      assert(width === undefined && height === undefined);\n      this.width = this.gl.drawingBufferWidth;\n      this.height = this.gl.drawingBufferHeight;\n      return this;\n    }\n\n    if (width === undefined) {\n      width = this.gl.drawingBufferWidth;\n    }\n\n    if (height === undefined) {\n      height = this.gl.drawingBufferHeight;\n    }\n\n    if (width !== this.width && height !== this.height) {\n      log.log(2, `Resizing framebuffer ${this.id} to ${width}x${height}`)();\n    }\n\n    for (const attachmentPoint in this.attachments) {\n      this.attachments[attachmentPoint].resize({\n        width,\n        height\n      });\n    }\n\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  attach(attachments, {\n    clearAttachments = false,\n    resizeAttachments = true\n  } = {}) {\n    const newAttachments = {};\n\n    if (clearAttachments) {\n      Object.keys(this.attachments).forEach(key => {\n        newAttachments[key] = null;\n      });\n    }\n\n    Object.assign(newAttachments, attachments);\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    for (const key in newAttachments) {\n      assert(key !== undefined, 'Misspelled framebuffer binding point?');\n      const attachment = Number(key);\n      const descriptor = newAttachments[attachment];\n      let object = descriptor;\n\n      if (!object) {\n        this._unattach(attachment);\n      } else if (object instanceof Renderbuffer) {\n        this._attachRenderbuffer({\n          attachment,\n          renderbuffer: object\n        });\n      } else if (Array.isArray(descriptor)) {\n        const [texture, layer = 0, level = 0] = descriptor;\n        object = texture;\n\n        this._attachTexture({\n          attachment,\n          texture,\n          layer,\n          level\n        });\n      } else {\n        this._attachTexture({\n          attachment,\n          texture: object,\n          layer: 0,\n          level: 0\n        });\n      }\n\n      if (resizeAttachments && object) {\n        object.resize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    Object.assign(this.attachments, attachments);\n    Object.keys(this.attachments).filter(key => !this.attachments[key]).forEach(key => {\n      delete this.attachments[key];\n    });\n  }\n\n  checkStatus() {\n    const {\n      gl\n    } = this;\n    const status = this.getStatus();\n\n    if (status !== 36053) {\n      throw new Error(_getFrameBufferStatus(status));\n    }\n\n    return this;\n  }\n\n  getStatus() {\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n    const status = gl.checkFramebufferStatus(36160);\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return status;\n  }\n\n  clear(options = {}) {\n    const {\n      color,\n      depth,\n      stencil,\n      drawBuffers = []\n    } = options;\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    if (color || depth || stencil) {\n      clear(this.gl, {\n        color,\n        depth,\n        stencil\n      });\n    }\n\n    drawBuffers.forEach((value, drawBuffer) => {\n      clearBuffer(this.gl, {\n        drawBuffer,\n        value\n      });\n    });\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  readPixels(opts = {}) {\n    log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n    return null;\n  }\n\n  readPixelsToBuffer(opts = {}) {\n    log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n    return null;\n  }\n\n  copyToDataUrl(opts = {}) {\n    log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n    return null;\n  }\n\n  copyToImage(opts = {}) {\n    log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n    return null;\n  }\n\n  copyToTexture(opts = {}) {\n    log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  blit(opts = {}) {\n    log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n    return null;\n  }\n\n  invalidate({\n    attachments = [],\n    x = 0,\n    y = 0,\n    width,\n    height\n  }) {\n    const gl2 = assertWebGL2Context(this.gl);\n    const prevHandle = gl2.bindFramebuffer(36008, this.handle);\n    const invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n    if (invalidateAll) {\n      gl2.invalidateFramebuffer(36008, attachments);\n    } else {\n      gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n    }\n\n    gl2.bindFramebuffer(36008, prevHandle);\n    return this;\n  }\n\n  getAttachmentParameter(attachment, pname, keys) {\n    let value = this._getAttachmentParameterFallback(pname);\n\n    if (value === null) {\n      this.gl.bindFramebuffer(36160, this.handle);\n      value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n      this.gl.bindFramebuffer(36160, null);\n    }\n\n    if (keys && value > 1000) {\n      value = getKey(this.gl, value);\n    }\n\n    return value;\n  }\n\n  getAttachmentParameters(attachment = 36064, keys, parameters = this.constructor.ATTACHMENT_PARAMETERS || []) {\n    const values = {};\n\n    for (const pname of parameters) {\n      const key = keys ? getKey(this.gl, pname) : pname;\n      values[key] = this.getAttachmentParameter(attachment, pname, keys);\n    }\n\n    return values;\n  }\n\n  getParameters(keys = true) {\n    const attachments = Object.keys(this.attachments);\n    const parameters = {};\n\n    for (const attachmentName of attachments) {\n      const attachment = Number(attachmentName);\n      const key = keys ? getKey(this.gl, attachment) : attachment;\n      parameters[key] = this.getAttachmentParameters(attachment, keys);\n    }\n\n    return parameters;\n  }\n\n  show() {\n    if (typeof window !== 'undefined') {\n      window.open(copyToDataUrl(this), 'luma-debug-texture');\n    }\n\n    return this;\n  }\n\n  log(logLevel = 0, message = '') {\n    if (logLevel > log.level || typeof window === 'undefined') {\n      return this;\n    }\n\n    message = message || `Framebuffer ${this.id}`;\n    const image = copyToDataUrl(this, {\n      targetMaxHeight: 100\n    });\n    log.image({\n      logLevel,\n      message,\n      image\n    }, message)();\n    return this;\n  }\n\n  bind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, this.handle);\n    return this;\n  }\n\n  unbind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, null);\n    return this;\n  }\n\n  _createDefaultAttachments(color, depth, stencil, width, height) {\n    let defaultAttachments = null;\n\n    if (color) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36064] = new Texture2D(this.gl, {\n        id: `${this.id}-color0`,\n        pixels: null,\n        format: 6408,\n        type: 5121,\n        width,\n        height,\n        mipmaps: false,\n        parameters: {\n          [10241]: 9729,\n          [10240]: 9729,\n          [10242]: 33071,\n          [10243]: 33071\n        }\n      });\n      this.ownResources.push(defaultAttachments[36064]);\n    }\n\n    if (depth && stencil) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[33306] = new Renderbuffer(this.gl, {\n        id: `${this.id}-depth-stencil`,\n        format: 35056,\n        width,\n        height: 111\n      });\n      this.ownResources.push(defaultAttachments[33306]);\n    } else if (depth) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36096] = new Renderbuffer(this.gl, {\n        id: `${this.id}-depth`,\n        format: 33189,\n        width,\n        height\n      });\n      this.ownResources.push(defaultAttachments[36096]);\n    } else if (stencil) {\n      assert(false);\n    }\n\n    return defaultAttachments;\n  }\n\n  _unattach(attachment) {\n    const oldAttachment = this.attachments[attachment];\n\n    if (!oldAttachment) {\n      return;\n    }\n\n    if (oldAttachment instanceof Renderbuffer) {\n      this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n    } else {\n      this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n    }\n\n    delete this.attachments[attachment];\n  }\n\n  _attachRenderbuffer({\n    attachment = 36064,\n    renderbuffer\n  }) {\n    const {\n      gl\n    } = this;\n    gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n    this.attachments[attachment] = renderbuffer;\n  }\n\n  _attachTexture({\n    attachment = 36064,\n    texture,\n    layer,\n    level\n  }) {\n    const {\n      gl\n    } = this;\n    gl.bindTexture(texture.target, texture.handle);\n\n    switch (texture.target) {\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n        break;\n\n      case 34067:\n        const face = mapIndexToCubeMapFace(layer);\n        gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n        break;\n\n      case 3553:\n        gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n        break;\n\n      default:\n        assert(false, 'Illegal texture type');\n    }\n\n    gl.bindTexture(texture.target, null);\n    this.attachments[attachment] = texture;\n  }\n\n  _setReadBuffer(readBuffer) {\n    const gl2 = getWebGL2Context(this.gl);\n\n    if (gl2) {\n      gl2.readBuffer(readBuffer);\n    } else {\n      assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n    }\n\n    this.readBuffer = readBuffer;\n  }\n\n  _setDrawBuffers(drawBuffers) {\n    const {\n      gl\n    } = this;\n    const gl2 = assertWebGL2Context(gl);\n\n    if (gl2) {\n      gl2.drawBuffers(drawBuffers);\n    } else {\n      const ext = gl.getExtension('WEBGL_draw_buffers');\n\n      if (ext) {\n        ext.drawBuffersWEBGL(drawBuffers);\n      } else {\n        assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n      }\n    }\n\n    this.drawBuffers = drawBuffers;\n  }\n\n  _getAttachmentParameterFallback(pname) {\n    const caps = getFeatures(this.gl);\n\n    switch (pname) {\n      case 36052:\n        return !caps.WEBGL2 ? 0 : null;\n\n      case 33298:\n      case 33299:\n      case 33300:\n      case 33301:\n      case 33302:\n      case 33303:\n        return !caps.WEBGL2 ? 8 : null;\n\n      case 33297:\n        return !caps.WEBGL2 ? 5125 : null;\n\n      case 33296:\n        return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n      default:\n        return null;\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createFramebuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteFramebuffer(this.handle);\n  }\n\n  _bindHandle(handle) {\n    return this.gl.bindFramebuffer(36160, handle);\n  }\n\n}\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  const STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || `Framebuffer error ${status}`;\n}\n\nexport const FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  const testFb = new Framebuffer(gl, {\n    id: `test-framebuffer`,\n    check: false,\n    attachments: {\n      [36064]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === 36053;\n}\n\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n//# sourceMappingURL=webgl-features-table.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (const cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, `Feature: ${cap} not supported`)();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  let isSupported;\n  const featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    for (const extension of featureDefinition) {\n      isSupported = isSupported && Boolean(gl.getExtension(extension));\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","export default class ShaderAttribute {\n  constructor(dataColumn, opts) {\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  get value() {\n    return this.source.value;\n  }\n\n  getValue() {\n    const buffer = this.source.getBuffer();\n    const accessor = this.getAccessor();\n\n    if (buffer) {\n      return [buffer, accessor];\n    }\n\n    const {\n      value\n    } = this.source;\n    const {\n      size\n    } = accessor;\n    let constantValue = value;\n\n    if (value && value.length !== size) {\n      constantValue = new Float32Array(size);\n      const index = accessor.elementOffset || 0;\n\n      for (let i = 0; i < size; ++i) {\n        constantValue[i] = value[index + i];\n      }\n    }\n\n    return constantValue;\n  }\n\n  getAccessor() {\n    return { ...this.source.getAccessor(),\n      ...this.opts\n    };\n  }\n\n}\n//# sourceMappingURL=shader-attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","export class TypedArrayManager {\n  constructor(props) {\n    this._pool = [];\n    this.props = {\n      overAlloc: 2,\n      poolSize: 100\n    };\n    this.setProps(props);\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.props.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.props.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.props.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  const planes = {};\n  planes.left = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]);\n  planes.right = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]);\n  planes.bottom = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]);\n  planes.top = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]);\n  planes.near = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]);\n  planes.far = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14]);\n  return planes;\n}\nconst scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nexport function toDoublePrecisionArray(typedArray, {\n  size = 1,\n  startIndex = 0,\n  endIndex\n}) {\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  const count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","import { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  const stride = getStride(baseAccessor);\n  const vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  const elementOffset = shaderAttributeOptions.elementOffset || 0;\n  const offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return { ...shaderAttributeOptions,\n    offset,\n    stride\n  };\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: { ...resolvedOptions,\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    }\n  };\n}\n\nexport default class DataColumn {\n  constructor(gl, opts) {\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    const logicalType = opts.logicalType || opts.type;\n    const doublePrecision = logicalType === 5130;\n    let {\n      defaultValue\n    } = opts;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    let bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    let defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  get buffer() {\n    if (!this._buffer) {\n      const {\n        isIndexed,\n        type\n      } = this.settings;\n      this._buffer = new Buffer(this.gl, {\n        id: this.id,\n        target: isIndexed ? 34963 : 34962,\n        accessor: {\n          type\n        }\n      });\n    }\n\n    return this._buffer;\n  }\n\n  get byteOffset() {\n    const accessor = this.getAccessor();\n\n    if (accessor.vertexOffset) {\n      return accessor.vertexOffset * getStride(accessor);\n    }\n\n    return 0;\n  }\n\n  delete() {\n    if (this._buffer) {\n      this._buffer.delete();\n\n      this._buffer = null;\n    }\n\n    typedArrayManager.release(this.state.allocatedValue);\n  }\n\n  getShaderAttributes(id, options) {\n    if (this.doublePrecision) {\n      const shaderAttributes = {};\n      const isBuffer64Bit = this.value instanceof Float64Array;\n      const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n      shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n      shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n      return shaderAttributes;\n    }\n\n    if (options) {\n      const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n      return {\n        [id]: new ShaderAttribute(this, shaderAttributeDef)\n      };\n    }\n\n    return {\n      [id]: this\n    };\n  }\n\n  getBuffer() {\n    if (this.state.constant) {\n      return null;\n    }\n\n    return this.state.externalBuffer || this._buffer;\n  }\n\n  getValue() {\n    if (this.state.constant) {\n      return this.value;\n    }\n\n    return [this.getBuffer(), this.getAccessor()];\n  }\n\n  getAccessor() {\n    return this.state.bufferAccessor;\n  }\n\n  setData(opts) {\n    const {\n      state\n    } = this;\n\n    if (ArrayBuffer.isView(opts)) {\n      opts = {\n        value: opts\n      };\n    } else if (opts instanceof Buffer) {\n      opts = {\n        buffer: opts\n      };\n    }\n\n    const accessor = { ...this.settings,\n      ...opts\n    };\n    state.bufferAccessor = accessor;\n\n    if (opts.constant) {\n      let value = opts.value;\n      value = this._normalizeValue(value, [], 0);\n\n      if (this.settings.normalized) {\n        value = this._normalizeConstant(value);\n      }\n\n      const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n      if (!hasChanged) {\n        return false;\n      }\n\n      state.externalBuffer = null;\n      state.constant = true;\n      this.value = value;\n    } else if (opts.buffer) {\n      const buffer = opts.buffer;\n      state.externalBuffer = buffer;\n      state.constant = false;\n      this.value = opts.value;\n      const isBuffer64Bit = opts.value instanceof Float64Array;\n      accessor.type = opts.type || buffer.accessor.type;\n      accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n      accessor.stride = getStride(accessor);\n    } else if (opts.value) {\n      this._checkExternalBuffer(opts);\n\n      let value = opts.value;\n      state.externalBuffer = null;\n      state.constant = false;\n      this.value = value;\n      accessor.bytesPerElement = value.BYTES_PER_ELEMENT;\n      accessor.stride = getStride(accessor);\n      const {\n        buffer,\n        byteOffset\n      } = this;\n\n      if (this.doublePrecision && value instanceof Float64Array) {\n        value = toDoublePrecisionArray(value, accessor);\n      }\n\n      const requiredBufferSize = value.byteLength + byteOffset + accessor.stride * 2;\n\n      if (buffer.byteLength < requiredBufferSize) {\n        buffer.reallocate(requiredBufferSize);\n      }\n\n      buffer.setAccessor(null);\n      buffer.subData({\n        data: value,\n        offset: byteOffset\n      });\n      accessor.type = opts.type || buffer.accessor.type;\n    }\n\n    return true;\n  }\n\n  updateSubBuffer(opts = {}) {\n    const {\n      value\n    } = this;\n    const {\n      startOffset = 0,\n      endOffset\n    } = opts;\n    this.buffer.subData({\n      data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n        size: this.size,\n        startIndex: startOffset,\n        endIndex: endOffset\n      }) : value.subarray(startOffset, endOffset),\n      offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n    });\n  }\n\n  allocate({\n    numInstances,\n    copy = false\n  }) {\n    const {\n      state\n    } = this;\n    const oldValue = state.allocatedValue;\n    const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n      size: this.size,\n      type: this.defaultType,\n      copy\n    });\n    this.value = value;\n    const {\n      buffer,\n      byteOffset\n    } = this;\n\n    if (buffer.byteLength < value.byteLength + byteOffset) {\n      buffer.reallocate(value.byteLength + byteOffset);\n\n      if (copy && oldValue) {\n        buffer.subData({\n          data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n          offset: byteOffset\n        });\n      }\n    }\n\n    state.allocatedValue = value;\n    state.constant = false;\n    state.externalBuffer = null;\n    state.bufferAccessor = this.settings;\n    return true;\n  }\n\n  _checkExternalBuffer(opts) {\n    const {\n      value\n    } = opts;\n\n    if (!opts.constant && value) {\n      const ArrayType = this.defaultType;\n      let illegalArrayType = false;\n\n      if (this.doublePrecision) {\n        illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n      }\n\n      if (illegalArrayType) {\n        throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n      }\n\n      if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n        log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n      }\n    }\n  }\n\n  _normalizeConstant(value) {\n    switch (this.settings.type) {\n      case 5120:\n        return new Float32Array(value).map(x => (x + 128) / 255 * 2 - 1);\n\n      case 5122:\n        return new Float32Array(value).map(x => (x + 32768) / 65535 * 2 - 1);\n\n      case 5121:\n        return new Float32Array(value).map(x => x / 255);\n\n      case 5123:\n        return new Float32Array(value).map(x => x / 65535);\n\n      default:\n        return value;\n    }\n  }\n\n  _normalizeValue(value, out, start) {\n    const {\n      defaultValue,\n      size\n    } = this.settings;\n\n    if (Number.isFinite(value)) {\n      out[start] = value;\n      return out;\n    }\n\n    if (!value) {\n      out[start] = defaultValue[0];\n      return out;\n    }\n\n    switch (size) {\n      case 4:\n        out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n      case 3:\n        out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n      case 2:\n        out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n      case 1:\n        out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n        break;\n\n      default:\n        let i = size;\n\n        while (--i >= 0) {\n          out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n        }\n\n    }\n\n    return out;\n  }\n\n  _areValuesEqual(value1, value2) {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    const {\n      size\n    } = this;\n\n    for (let i = 0; i < size; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=data-column.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const EMPTY_ARRAY = [];\nconst placeholderArray = [];\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, {\n  size,\n  stride,\n  offset,\n  startIndices,\n  nested\n}) {\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","export function flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","export const EMPTY = [];\nexport const FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","function padArrayChunk({\n  source,\n  target,\n  start = 0,\n  end,\n  size,\n  getData\n}) {\n  end = end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nconst DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: t => t\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return { ...DEFAULT_TRANSITION_SETTINGS[userSettings.type],\n    ...layerSettings,\n    ...userSettings\n  };\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  const buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  const {\n    doublePrecision,\n    settings,\n    value,\n    size\n  } = attribute;\n  const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer({\n  buffer,\n  numInstances,\n  attribute,\n  fromLength,\n  fromStartIndices,\n  getData = x => x\n}) {\n  const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  const size = attribute.size * precisionMultiplier;\n  const byteOffset = attribute.byteOffset;\n  const toStartIndices = attribute.startIndices;\n  const hasStartIndices = fromStartIndices && toStartIndices;\n  const toLength = getAttributeBufferLength(attribute, numInstances);\n  const isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  const toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    const getter = getData;\n\n    getData = (value, chunk) => attribute._normalizeConstant(getter(value, chunk));\n  }\n\n  const getMissingData = isConstant ? (i, chunk) => getData(toData, chunk) : (i, chunk) => getData(toData.subarray(i, i + size), chunk);\n  const source = buffer.getData({\n    length: fromLength\n  });\n  const data = new Float32Array(toLength);\n  padArray({\n    source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\nexport default class Attribute extends DataColumn {\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    const {\n      transition = false,\n      noAlloc = false,\n      update = null,\n      accessor = null,\n      transform = null,\n      startIndices = null\n    } = opts;\n    Object.assign(this.settings, {\n      transition,\n      noAlloc,\n      update: update || accessor && this._autoUpdater,\n      accessor,\n      transform\n    });\n    Object.assign(this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices\n    });\n    Object.seal(this.settings);\n    Object.seal(this.state);\n\n    this._validateAttributeUpdaters();\n  }\n\n  get startIndices() {\n    return this.state.startIndices;\n  }\n\n  set startIndices(layout) {\n    this.state.startIndices = layout;\n  }\n\n  needsUpdate() {\n    return this.state.needsUpdate;\n  }\n\n  needsRedraw({\n    clearChangedFlags = false\n  } = {}) {\n    const needsRedraw = this.state.needsRedraw;\n    this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n    return needsRedraw;\n  }\n\n  getUpdateTriggers() {\n    const {\n      accessor\n    } = this.settings;\n    return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n  }\n\n  supportsTransition() {\n    return Boolean(this.settings.transition);\n  }\n\n  getTransitionSetting(opts) {\n    if (!opts || !this.supportsTransition()) {\n      return null;\n    }\n\n    const {\n      accessor\n    } = this.settings;\n    const layerSettings = this.settings.transition;\n    const userSettings = Array.isArray(accessor) ? opts[accessor.find(a => opts[a])] : opts[accessor];\n    return normalizeTransitionSettings(userSettings, layerSettings);\n  }\n\n  setNeedsUpdate(reason = this.id, dataRange) {\n    this.state.needsUpdate = this.state.needsUpdate || reason;\n    this.setNeedsRedraw(reason);\n\n    if (dataRange) {\n      const {\n        startRow = 0,\n        endRow = Infinity\n      } = dataRange;\n      this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n    } else {\n      this.state.updateRanges = range.FULL;\n    }\n  }\n\n  clearNeedsUpdate() {\n    this.state.needsUpdate = false;\n    this.state.updateRanges = range.EMPTY;\n  }\n\n  setNeedsRedraw(reason = this.id) {\n    this.state.needsRedraw = this.state.needsRedraw || reason;\n  }\n\n  update(opts) {\n    this.setData(opts);\n  }\n\n  allocate(numInstances) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (settings.update) {\n      super.allocate({\n        numInstances,\n        copy: state.updateRanges !== range.FULL\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  updateBuffer({\n    numInstances,\n    data,\n    props,\n    context\n  }) {\n    if (!this.needsUpdate()) {\n      return false;\n    }\n\n    const {\n      state: {\n        updateRanges\n      },\n      settings: {\n        update,\n        noAlloc\n      }\n    } = this;\n    let updated = true;\n\n    if (update) {\n      for (const [startRow, endRow] of updateRanges) {\n        update.call(context, this, {\n          data,\n          startRow,\n          endRow,\n          props,\n          numInstances\n        });\n      }\n\n      if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n        this.setData({\n          value: this.value,\n          constant: this.constant\n        });\n        this.constant = false;\n      } else {\n        for (const [startRow, endRow] of updateRanges) {\n          const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n          const endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n          super.updateSubBuffer({\n            startOffset,\n            endOffset\n          });\n        }\n      }\n\n      this._checkAttributeArray();\n    } else {\n      updated = false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setNeedsRedraw();\n    return updated;\n  }\n\n  setConstantValue(value) {\n    if (value === undefined || typeof value === 'function') {\n      return false;\n    }\n\n    const hasChanged = this.setData({\n      constant: true,\n      value\n    });\n\n    if (hasChanged) {\n      this.setNeedsRedraw();\n    }\n\n    this.clearNeedsUpdate();\n    return true;\n  }\n\n  setExternalBuffer(buffer) {\n    const {\n      state\n    } = this;\n\n    if (!buffer) {\n      state.lastExternalBuffer = null;\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n\n    if (state.lastExternalBuffer === buffer) {\n      return true;\n    }\n\n    state.lastExternalBuffer = buffer;\n    this.setNeedsRedraw();\n    this.setData(buffer);\n    return true;\n  }\n\n  setBinaryValue(buffer, startIndices = null) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (!buffer) {\n      state.binaryValue = null;\n      state.binaryAccessor = null;\n      return false;\n    }\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (state.binaryValue === buffer) {\n      this.clearNeedsUpdate();\n      return true;\n    }\n\n    state.binaryValue = buffer;\n    this.setNeedsRedraw();\n\n    if (ArrayBuffer.isView(buffer)) {\n      buffer = {\n        value: buffer\n      };\n    }\n\n    const needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n    if (needsUpdate) {\n      assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n      const needsNormalize = buffer.size && buffer.size !== this.size;\n      state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n        size: buffer.size || this.size,\n        stride: buffer.stride,\n        offset: buffer.offset,\n        startIndices,\n        nested: needsNormalize\n      });\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setData(buffer);\n    return true;\n  }\n\n  getVertexOffset(row) {\n    const {\n      startIndices\n    } = this;\n    const vertexIndex = startIndices ? startIndices[row] : row;\n    return vertexIndex * this.size;\n  }\n\n  getShaderAttributes() {\n    const shaderAttributeDefs = this.settings.shaderAttributes || {\n      [this.id]: null\n    };\n    const shaderAttributes = {};\n\n    for (const shaderAttributeName in shaderAttributeDefs) {\n      Object.assign(shaderAttributes, super.getShaderAttributes(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n    }\n\n    return shaderAttributes;\n  }\n\n  _autoUpdater(attribute, {\n    data,\n    startRow,\n    endRow,\n    props,\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const {\n      settings,\n      state,\n      value,\n      size,\n      startIndices\n    } = attribute;\n    const {\n      accessor,\n      transform\n    } = settings;\n    const accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n    assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n    let i = attribute.getVertexOffset(startRow);\n    const {\n      iterable,\n      objectInfo\n    } = createIterable(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      let objectValue = accessorFunc(object, objectInfo);\n\n      if (transform) {\n        objectValue = transform.call(this, objectValue);\n      }\n\n      if (startIndices) {\n        const numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n        if (objectValue && Array.isArray(objectValue[0])) {\n          let startIndex = i;\n\n          for (const item of objectValue) {\n            attribute._normalizeValue(item, value, startIndex);\n\n            startIndex += size;\n          }\n        } else if (objectValue && objectValue.length > size) {\n          value.set(objectValue, i);\n        } else {\n          attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n          fillArray({\n            target: value,\n            source: objectInfo.target,\n            start: i,\n            count: numVertices\n          });\n        }\n\n        i += numVertices * size;\n      } else {\n        attribute._normalizeValue(objectValue, value, i);\n\n        i += size;\n      }\n    }\n  }\n\n  _validateAttributeUpdaters() {\n    const {\n      settings\n    } = this;\n    const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n    if (!hasUpdater) {\n      throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n    }\n  }\n\n  _checkAttributeArray() {\n    const {\n      value\n    } = this;\n    const limit = Math.min(4, this.size);\n\n    if (value && value.length >= limit) {\n      let valid = true;\n\n      switch (limit) {\n        case 4:\n          valid = valid && Number.isFinite(value[3]);\n\n        case 3:\n          valid = valid && Number.isFinite(value[2]);\n\n        case 2:\n          valid = valid && Number.isFinite(value[1]);\n\n        case 1:\n          valid = valid && Number.isFinite(value[0]);\n          break;\n\n        default:\n          valid = false;\n      }\n\n      if (!valid) {\n        throw new Error(\"Illegal attribute generated for \".concat(this.id));\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=attribute.js.map","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nlet loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    loggers[eventType].call(...arguments);\n  }\n}\n//# sourceMappingURL=index.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '../utils';\nconst FS100 = `void main() {gl_FragColor = vec4(0);}`;\nconst FS_GLES = `\\\nout vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}`;\nconst FS300 = `#version 300 es\\n${FS_GLES}`;\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  const words = line.replace(/^\\s+/, '').split(/\\s+/);\n  const [qualifier, type, definition] = words;\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  const name = definition.split(';')[0];\n  return {\n    qualifier,\n    type,\n    name\n  };\n}\nexport function getPassthroughFS(options = {}) {\n  const {\n    version = 100,\n    input,\n    inputType,\n    output\n  } = options;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return `#version ${version}\\n${FS_GLES}`;\n    }\n\n    return FS100;\n  }\n\n  const outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return `\\\n#version ${version} ${version === 300 ? 'es' : ''}\nin ${inputType} ${input};\nout vec4 ${output};\nvoid main() {\n  ${output} = ${outputValue};\n}`;\n  }\n\n  return `\\\nvarying ${inputType} ${input};\nvoid main() {\n  gl_FragColor = ${outputValue};\n}`;\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return `vec4(${variable}, 0.0, 0.0, 1.0)`;\n\n    case 'vec2':\n      return `vec4(${variable}, 0.0, 1.0)`;\n\n    case 'vec3':\n      return `vec4(${variable}, 1.0)`;\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","import { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils/utils';\nexport default class TransformFeedback extends Resource {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    super(gl, props);\n    this.initialize(props);\n    this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    this.buffers = {};\n    this.unused = {};\n    this.configuration = null;\n    this.bindOnUse = true;\n\n    if (!isObjectEmpty(this.buffers)) {\n      this.bind(() => this._unbindBuffers());\n    }\n\n    this.setProps(props);\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    if ('buffers' in props) {\n      this.setBuffers(props.buffers);\n    }\n  }\n\n  setBuffers(buffers = {}) {\n    this.bind(() => {\n      for (const bufferName in buffers) {\n        this.setBuffer(bufferName, buffers[bufferName]);\n      }\n    });\n    return this;\n  }\n\n  setBuffer(locationOrName, bufferOrParams) {\n    const location = this._getVaryingIndex(locationOrName);\n\n    const {\n      buffer,\n      byteSize,\n      byteOffset\n    } = this._getBufferParams(bufferOrParams);\n\n    if (location < 0) {\n      this.unused[locationOrName] = buffer;\n      log.warn(() => `${this.id} unused varying buffer ${locationOrName}`)();\n      return this;\n    }\n\n    this.buffers[location] = bufferOrParams;\n\n    if (!this.bindOnUse) {\n      this._bindBuffer(location, buffer, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  begin(primitiveMode = 0) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n\n    this._bindBuffers();\n\n    this.gl.beginTransformFeedback(primitiveMode);\n    return this;\n  }\n\n  end() {\n    this.gl.endTransformFeedback();\n\n    this._unbindBuffers();\n\n    this.gl.bindTransformFeedback(36386, null);\n    return this;\n  }\n\n  _getBufferParams(bufferOrParams) {\n    let byteOffset;\n    let byteSize;\n    let buffer;\n\n    if (bufferOrParams instanceof Buffer === false) {\n      buffer = bufferOrParams.buffer;\n      byteSize = bufferOrParams.byteSize;\n      byteOffset = bufferOrParams.byteOffset;\n    } else {\n      buffer = bufferOrParams;\n    }\n\n    if (byteOffset !== undefined || byteSize !== undefined) {\n      byteOffset = byteOffset || 0;\n      byteSize = byteSize || buffer.byteLength - byteOffset;\n    }\n\n    return {\n      buffer,\n      byteOffset,\n      byteSize\n    };\n  }\n\n  _getVaryingInfo(locationOrName) {\n    return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n  }\n\n  _getVaryingIndex(locationOrName) {\n    if (this.configuration) {\n      return this.configuration.getVaryingInfo(locationOrName).location;\n    }\n\n    const location = Number(locationOrName);\n    return Number.isFinite(location) ? location : -1;\n  }\n\n  _bindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        const {\n          buffer,\n          byteSize,\n          byteOffset\n        } = this._getBufferParams(this.buffers[bufferIndex]);\n\n        this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n      }\n    }\n  }\n\n  _unbindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        this._bindBuffer(bufferIndex, null);\n      }\n    }\n  }\n\n  _bindBuffer(index, buffer, byteOffset = 0, byteSize) {\n    const handle = buffer && buffer.handle;\n\n    if (!handle || byteSize === undefined) {\n      this.gl.bindBufferBase(35982, index, handle);\n    } else {\n      this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createTransformFeedback();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTransformFeedback(this.handle);\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n  }\n\n}\n//# sourceMappingURL=transform-feedback.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\nexport default class BufferTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  setupResources(opts) {\n    for (const binding of this.bindings) {\n      this._setupTransformFeedback(binding, opts);\n    }\n  }\n\n  updateModelProps(props = {}) {\n    const {\n      varyings\n    } = this;\n\n    if (varyings.length > 0) {\n      props = Object.assign({}, props, {\n        varyings\n      });\n    }\n\n    return props;\n  }\n\n  getDrawOptions(opts = {}) {\n    const binding = this.bindings[this.currentIndex];\n    const {\n      sourceBuffers,\n      transformFeedback\n    } = binding;\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    return {\n      attributes,\n      transformFeedback\n    };\n  }\n\n  swap() {\n    if (this.feedbackMap) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupBuffers(opts);\n  }\n\n  getBuffer(varyingName) {\n    const {\n      feedbackBuffers\n    } = this.bindings[this.currentIndex];\n    const bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n    if (!bufferOrParams) {\n      return null;\n    }\n\n    return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n  }\n\n  getData(options = {}) {\n    const {\n      varyingName\n    } = options;\n    const buffer = this.getBuffer(varyingName);\n\n    if (buffer) {\n      return buffer.getData();\n    }\n\n    return null;\n  }\n\n  delete() {\n    for (const name in this.resources) {\n      this.resources[name].delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    this._setupBuffers(props);\n\n    this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n    if (this.varyings.length > 0) {\n      assert(isWebGL2(this.gl));\n    }\n  }\n\n  _getFeedbackBuffers(props) {\n    const {\n      sourceBuffers = {}\n    } = props;\n    const feedbackBuffers = {};\n\n    if (this.bindings[this.currentIndex]) {\n      Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n    }\n\n    if (this.feedbackMap) {\n      for (const sourceName in this.feedbackMap) {\n        const feedbackName = this.feedbackMap[sourceName];\n\n        if (sourceName in sourceBuffers) {\n          feedbackBuffers[feedbackName] = sourceName;\n        }\n      }\n    }\n\n    Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n    for (const bufferName in feedbackBuffers) {\n      const bufferOrRef = feedbackBuffers[bufferName];\n\n      if (typeof bufferOrRef === 'string') {\n        const sourceBuffer = sourceBuffers[bufferOrRef];\n        const {\n          byteLength,\n          usage,\n          accessor\n        } = sourceBuffer;\n        feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n          byteLength,\n          usage,\n          accessor\n        });\n      }\n    }\n\n    return feedbackBuffers;\n  }\n\n  _setupBuffers(props = {}) {\n    const {\n      sourceBuffers = null\n    } = props;\n    Object.assign(this.feedbackMap, props.feedbackMap);\n\n    const feedbackBuffers = this._getFeedbackBuffers(props);\n\n    this._updateBindings({\n      sourceBuffers,\n      feedbackBuffers\n    });\n  }\n\n  _setupTransformFeedback(binding, {\n    model\n  }) {\n    const {\n      program\n    } = model;\n    binding.transformFeedback = new TransformFeedback(this.gl, {\n      program,\n      buffers: binding.feedbackBuffers\n    });\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this.feedbackMap) {\n      const {\n        sourceBuffers,\n        feedbackBuffers\n      } = this._swapBuffers(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceBuffers,\n        feedbackBuffers\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    if (!binding) {\n      return {\n        sourceBuffers: Object.assign({}, opts.sourceBuffers),\n        feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n      };\n    }\n\n    Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n    Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n    if (binding.transformFeedback) {\n      binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n    }\n\n    return binding;\n  }\n\n  _swapBuffers(opts) {\n    if (!this.feedbackMap) {\n      return null;\n    }\n\n    const sourceBuffers = Object.assign({}, opts.sourceBuffers);\n    const feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n    for (const srcName in this.feedbackMap) {\n      const dstName = this.feedbackMap[srcName];\n      sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n      feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n      assert(feedbackBuffers[dstName] instanceof Buffer);\n    }\n\n    return {\n      sourceBuffers,\n      feedbackBuffers\n    };\n  }\n\n  _createNewBuffer(name, opts) {\n    const buffer = new Buffer(this.gl, opts);\n\n    if (this.resources[name]) {\n      this.resources[name].delete();\n    }\n\n    this.resources[name] = buffer;\n    return buffer;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n}\n//# sourceMappingURL=buffer-transform.js.map","export default function getShaderVersion(source) {\n  let version = 100;\n  const words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    const v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","export const MODULE_INJECTORS_VS = `\\\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n`;\nexport const MODULE_INJECTORS_FS = `\\\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n`;\n//# sourceMappingURL=module-injectors.js.map","export const VERTEX_SHADER = 'vs';\nexport const FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","import { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nconst MODULE_INJECTORS = {\n  [VERTEX_SHADER]: MODULE_INJECTORS_VS,\n  [FRAGMENT_SHADER]: MODULE_INJECTORS_FS\n};\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nconst fragments = [];\nexport default function injectShader(source, type, inject, injectStandardStubs = false) {\n  const isVertex = type === VERTEX_SHADER;\n\n  for (const key in inject) {\n    const fragmentData = inject[key];\n    fragmentData.sort((a, b) => a.order - b.order);\n    fragments.length = fragmentData.length;\n\n    for (let i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    const fragmentString = `${fragments.join('\\n')}\\n`;\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, match => match + fragmentString);\n    }\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, match => match + MODULE_INJECTORS[type]);\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  const result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(inject => {\n    for (const key in inject) {\n      result[key] = result[key] ? `${result[key]}\\n${inject[key]}` : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","const vs = `\\\nattribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n`;\nexport const transform = {\n  name: 'transform',\n  vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nconst SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nconst SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nconst VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures({\n  vs,\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const texAttributeNames = Object.keys(sourceTextureMap);\n  let sourceCount = texAttributeNames.length;\n  let targetTextureType = null;\n  const samplerTextureMap = {};\n  let updatedVs = vs;\n  let finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    const vsLines = updatedVs.split('\\n');\n    const updateVsLines = vsLines.slice();\n    vsLines.forEach((line, index, lines) => {\n      if (sourceCount > 0) {\n        const updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          const {\n            updatedLine,\n            inject\n          } = updated;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      const sizeName = `${SIZE_UNIFORM_PREFIX}${targetTextureVarying}`;\n      const uniformDeclaration = `uniform vec2 ${sizeName};\\n`;\n      const posInstructions = `\\\n     vec2 ${VS_POS_VARIABLE} = transform_getPos(${sizeName});\n     gl_Position = vec4(${VS_POS_VARIABLE}, 0, 1.);\\n`;\n      const inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType,\n    inject: finalInject,\n    samplerTextureMap\n  };\n}\nexport function getSizeUniforms({\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const uniforms = {};\n  let width;\n  let height;\n\n  if (targetTextureVarying) {\n    ({\n      width,\n      height\n    } = targetTexture);\n    uniforms[`${SIZE_UNIFORM_PREFIX}${targetTextureVarying}`] = [width, height];\n  }\n\n  for (const textureName in sourceTextureMap) {\n    ({\n      width,\n      height\n    } = sourceTextureMap[textureName]);\n    uniforms[`${SIZE_UNIFORM_PREFIX}${textureName}`] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  const samplerName = `${SAMPLER_UNIFORM_PREFIX}${textureName}`;\n  const sizeName = `${SIZE_UNIFORM_PREFIX}${textureName}`;\n  const uniformDeclerations = `\\\n  uniform sampler2D ${samplerName};\n  uniform vec2 ${sizeName};`;\n  return {\n    samplerName,\n    sizeName,\n    uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  const qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  const samplerTextureMap = {};\n  const attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  const {\n    type,\n    name\n  } = attributeData;\n\n  if (name && textureMap[name]) {\n    const updatedLine = `\\// ${line} => Replaced by Transform with a sampler`;\n    const {\n      samplerName,\n      sizeName,\n      uniformDeclerations\n    } = getSamplerDeclerations(name);\n    const channels = typeToChannelSuffix(type);\n    const sampleInstruction = `  ${type} ${name} = transform_getInput(${samplerName}, ${sizeName}).${channels};\\n`;\n    samplerTextureMap[samplerName] = name;\n    const inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine,\n      inject,\n      samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nconst SRC_TEX_PARAMETER_OVERRIDES = {\n  [10241]: 9728,\n  [10240]: 9728,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst FS_OUTPUT_VARIABLE = 'transform_output';\nexport default class TextureTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  updateModelProps(props = {}) {\n    const updatedModelProps = this._processVertexShader(props);\n\n    return Object.assign({}, props, updatedModelProps);\n  }\n\n  getDrawOptions(opts = {}) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      framebuffer,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    const uniforms = Object.assign({}, opts.uniforms);\n    const parameters = Object.assign({}, opts.parameters);\n    let discard = opts.discard;\n\n    if (this.hasSourceTextures || this.hasTargetTexture) {\n      attributes.transform_elementID = this.elementIDBuffer;\n\n      for (const sampler in this.samplerTextureMap) {\n        const textureName = this.samplerTextureMap[sampler];\n        uniforms[sampler] = sourceTextures[textureName];\n      }\n\n      this._setSourceTextureParameters();\n\n      const sizeUniforms = getSizeUniforms({\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture\n      });\n      Object.assign(uniforms, sizeUniforms);\n    }\n\n    if (this.hasTargetTexture) {\n      discard = false;\n      parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n    }\n\n    return {\n      attributes,\n      framebuffer,\n      uniforms,\n      discard,\n      parameters\n    };\n  }\n\n  swap() {\n    if (this._swapTexture) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupTextures(opts);\n  }\n\n  getTargetTexture() {\n    const {\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    return targetTexture;\n  }\n\n  getData({\n    packed = false\n  } = {}) {\n    const {\n      framebuffer\n    } = this.bindings[this.currentIndex];\n    const pixels = readPixelsToArray(framebuffer);\n\n    if (!packed) {\n      return pixels;\n    }\n\n    const ArrayType = pixels.constructor;\n    const channelCount = typeToChannelCount(this.targetTextureType);\n    const packedPixels = new ArrayType(pixels.length * channelCount / 4);\n    let packCount = 0;\n\n    for (let i = 0; i < pixels.length; i += 4) {\n      for (let j = 0; j < channelCount; j++) {\n        packedPixels[packCount++] = pixels[i + j];\n      }\n    }\n\n    return packedPixels;\n  }\n\n  getFramebuffer() {\n    const currentResources = this.bindings[this.currentIndex];\n    return currentResources.framebuffer;\n  }\n\n  delete() {\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    if (this.elementIDBuffer) {\n      this.elementIDBuffer.delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      _targetTextureVarying,\n      _swapTexture\n    } = props;\n    this._swapTexture = _swapTexture;\n    this.targetTextureVarying = _targetTextureVarying;\n    this.hasTargetTexture = _targetTextureVarying;\n\n    this._setupTextures(props);\n  }\n\n  _createTargetTexture(props) {\n    const {\n      sourceTextures,\n      textureOrReference\n    } = props;\n\n    if (textureOrReference instanceof Texture2D) {\n      return textureOrReference;\n    }\n\n    const refTexture = sourceTextures[textureOrReference];\n\n    if (!refTexture) {\n      return null;\n    }\n\n    this._targetRefTexName = textureOrReference;\n    return this._createNewTexture(refTexture);\n  }\n\n  _setupTextures(props = {}) {\n    const {\n      sourceBuffers,\n      _sourceTextures = {},\n      _targetTexture\n    } = props;\n\n    const targetTexture = this._createTargetTexture({\n      sourceTextures: _sourceTextures,\n      textureOrReference: _targetTexture\n    });\n\n    this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n    this._updateBindings({\n      sourceBuffers,\n      sourceTextures: _sourceTextures,\n      targetTexture\n    });\n\n    if ('elementCount' in props) {\n      this._updateElementIDBuffer(props.elementCount);\n    }\n  }\n\n  _updateElementIDBuffer(elementCount) {\n    if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n      return;\n    }\n\n    const elementIds = new Float32Array(elementCount);\n    elementIds.forEach((_, index, array) => {\n      array[index] = index;\n    });\n\n    if (!this.elementIDBuffer) {\n      this.elementIDBuffer = new Buffer(this.gl, {\n        data: elementIds,\n        accessor: {\n          size: 1\n        }\n      });\n    } else {\n      this.elementIDBuffer.setData({\n        data: elementIds\n      });\n    }\n\n    this.elementCount = elementCount;\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this._swapTexture) {\n      const {\n        sourceTextures,\n        targetTexture\n      } = this._swapTextures(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceTextures,\n        targetTexture\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      targetTexture\n    } = opts;\n\n    if (!binding) {\n      binding = {\n        sourceBuffers: {},\n        sourceTextures: {},\n        targetTexture: null\n      };\n    }\n\n    Object.assign(binding.sourceTextures, sourceTextures);\n    Object.assign(binding.sourceBuffers, sourceBuffers);\n\n    if (targetTexture) {\n      binding.targetTexture = targetTexture;\n      const {\n        width,\n        height\n      } = targetTexture;\n      const {\n        framebuffer\n      } = binding;\n\n      if (framebuffer) {\n        framebuffer.update({\n          attachments: {\n            [36064]: targetTexture\n          },\n          resizeAttachments: false\n        });\n        framebuffer.resize({\n          width,\n          height\n        });\n      } else {\n        binding.framebuffer = new Framebuffer(this.gl, {\n          id: `transform-framebuffer`,\n          width,\n          height,\n          attachments: {\n            [36064]: targetTexture\n          }\n        });\n      }\n    }\n\n    return binding;\n  }\n\n  _setSourceTextureParameters() {\n    const index = this.currentIndex;\n    const {\n      sourceTextures\n    } = this.bindings[index];\n\n    for (const name in sourceTextures) {\n      sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n    }\n  }\n\n  _swapTextures(opts) {\n    if (!this._swapTexture) {\n      return null;\n    }\n\n    const sourceTextures = Object.assign({}, opts.sourceTextures);\n    sourceTextures[this._swapTexture] = opts.targetTexture;\n    const targetTexture = opts.sourceTextures[this._swapTexture];\n    return {\n      sourceTextures,\n      targetTexture\n    };\n  }\n\n  _createNewTexture(refTexture) {\n    const texture = cloneTextureFrom(refTexture, {\n      parameters: {\n        [10241]: 9728,\n        [10240]: 9728,\n        [10242]: 33071,\n        [10243]: 33071\n      },\n      pixelStore: {\n        [37440]: false\n      }\n    });\n\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    this.ownTexture = texture;\n    return texture;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n  _processVertexShader(props = {}) {\n    const {\n      sourceTextures,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const {\n      vs,\n      uniforms,\n      targetTextureType,\n      inject,\n      samplerTextureMap\n    } = updateForTextures({\n      vs: props.vs,\n      sourceTextureMap: sourceTextures,\n      targetTextureVarying: this.targetTextureVarying,\n      targetTexture\n    });\n    const combinedInject = combineInjects([props.inject || {}, inject]);\n    this.targetTextureType = targetTextureType;\n    this.samplerTextureMap = samplerTextureMap;\n    const fs = props._fs || getPassthroughFS({\n      version: getShaderVersion(vs),\n      input: this.targetTextureVarying,\n      inputType: targetTextureType,\n      output: FS_OUTPUT_VARIABLE\n    });\n    const modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n    return {\n      vs,\n      fs,\n      modules,\n      uniforms,\n      inject: combinedInject\n    };\n  }\n\n}\n//# sourceMappingURL=texture-transform.js.map","const TYPE_DEFINITIONS = {\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n\n  }\n};\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n\n  for (const propName in propDefs) {\n    const propDef = propDefs[propName];\n    const propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  let type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nconst VERTEX_SHADER = 'vs';\nconst FRAGMENT_SHADER = 'fs';\nexport default class ShaderModule {\n  constructor({\n    name,\n    vs,\n    fs,\n    dependencies = [],\n    uniforms,\n    getUniforms,\n    deprecations = [],\n    defines = {},\n    inject = {},\n    vertexShader,\n    fragmentShader\n  }) {\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  getModuleSource(type) {\n    let moduleSource;\n\n    switch (type) {\n      case VERTEX_SHADER:\n        moduleSource = this.vs || '';\n        break;\n\n      case FRAGMENT_SHADER:\n        moduleSource = this.fs || '';\n        break;\n\n      default:\n        assert(false);\n    }\n\n    return `\\\n#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_')}\n${moduleSource}\\\n// END MODULE_${this.name}\n\n`;\n  }\n\n  getUniforms(opts, uniforms) {\n    if (this.getModuleUniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    }\n\n    if (this.uniforms) {\n      return this._defaultGetUniforms(opts);\n    }\n\n    return {};\n  }\n\n  getDefines() {\n    return this.defines;\n  }\n\n  checkDeprecations(shaderSource, log) {\n    this.deprecations.forEach(def => {\n      if (def.regex.test(shaderSource)) {\n        if (def.deprecated) {\n          log.deprecated(def.old, def.new)();\n        } else {\n          log.removed(def.old, def.new)();\n        }\n      }\n    });\n  }\n\n  _parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n      switch (def.type) {\n        case 'function':\n          def.regex = new RegExp(`\\\\b${def.old}\\\\(`);\n          break;\n\n        default:\n          def.regex = new RegExp(`${def.type} ${def.old};`);\n      }\n    });\n    return deprecations;\n  }\n\n  _defaultGetUniforms(opts = {}) {\n    const uniforms = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), `${this.name}: invalid ${key}`);\n        }\n\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n\n}\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      const shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (const hook in injections) {\n    let injection = injections[hook];\n    const stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  const moduleMap = {};\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules,\n    level: 0,\n    moduleMap,\n    moduleDepth\n  });\n  return Object.keys(moduleDepth).sort((a, b) => moduleDepth[b] - moduleDepth[a]).map(name => moduleMap[name]);\n}\n\nfunction getDependencyGraph({\n  modules,\n  level,\n  moduleMap,\n  moduleDepth\n}) {\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  for (const module of modules) {\n    moduleMap[module.name] = module;\n\n    if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n      moduleDepth[module.name] = level;\n    }\n  }\n\n  for (const module of modules) {\n    if (module.dependencies) {\n      getDependencyGraph({\n        modules: module.dependencies,\n        level: level + 1,\n        moduleMap,\n        moduleDepth\n      });\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(module => {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', `Shader module use by name is deprecated. Import shader module '${module}' and use it directly.`);\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport const TEST_EXPORTS = {\n  getShaderDependencies,\n  getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","export default function isOldIE(opts = {}) {\n  const navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  const userAgent = opts.userAgent || navigator.userAgent || '';\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nconst GL_VENDOR = 0x1f00;\nconst GL_RENDERER = 0x1f01;\nconst GL_VERSION = 0x1f02;\nconst GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nconst WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nconst FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(key => {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  const info = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  const renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  const gpuVendor = identifyGPUVendor(vendor, renderer);\n  const gpuInfo = {\n    gpuVendor,\n    vendor,\n    renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nconst compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap, opts = {}) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const behavior = opts.behavior || 'enable';\n  const source = `#extension GL_${extensionName} : ${behavior}\\nvoid main(void) {}`;\n  const shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  const extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  const value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => getFeature(gl, feature));\n}\n//# sourceMappingURL=webgl-info.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  const debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return `\\\n#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n`;\n\n    case 'intel':\n      return `\\\n#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n\n    case 'amd':\n      return `\\\n#define AMD_GPU\n`;\n\n    default:\n      return `\\\n#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  let versionDefines = `\\\n#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n`;\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += `\\\n\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n`;\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += `\\\n\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n`;\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += `\\\n\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n`;\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += `\\\n// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n`;\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","function testVariable(qualifier) {\n  return new RegExp(`\\\\b${qualifier}[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)`, 'g');\n}\n\nconst ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nconst ES300_VERTEX_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('attribute'), 'in $1'], [testVariable('varying'), 'out $1']];\nconst ES300_FRAGMENT_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('varying'), 'in $1']];\nconst ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nconst ES100_VERTEX_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'attribute $1'], [testVariable('out'), 'varying $1']];\nconst ES100_FRAGMENT_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'varying $1']];\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertShader(source, ES300_VERTEX_REPLACEMENTS) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(`unknown GLSL version ${targetGLSLVersion}`);\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(`\\\\b${ES100_FRAGMENT_OUTPUT_NAME}\\\\b`, 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source.replace(REGEX_START_OF_MAIN, match => `out vec4 ${outputName};\\n${match}`).replace(new RegExp(`\\\\b${ES100_FRAGMENT_OUTPUT_NAME}\\\\b`, 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(ES300_FRAGMENT_OUTPUT_REGEX, '').replace(new RegExp(`\\\\b${outputName}\\\\b`, 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nconst INJECT_SHADER_DECLARATIONS = `\\n\\n${DECLARATION_INJECT_MARKER}\\n\\n`;\nconst SHADER_TYPE = {\n  [VERTEX_SHADER]: 'vertex',\n  [FRAGMENT_SHADER]: 'fragment'\n};\nconst FRAGMENT_SHADER_PROLOGUE = `\\\nprecision highp float;\n\n`;\nexport function assembleShaders(gl, opts) {\n  const {\n    vs,\n    fs\n  } = opts;\n  const modules = resolveModules(opts.modules || []);\n  return {\n    gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, {\n  id,\n  source,\n  type,\n  modules,\n  defines = {},\n  hookFunctions = [],\n  inject = {},\n  transpileToGLSL100 = false,\n  prologue = true,\n  log\n}) {\n  assert(typeof source === 'string', 'shader source must be a string');\n  const isVertex = type === VERTEX_SHADER;\n  const sourceLines = source.split('\\n');\n  let glslVersion = 100;\n  let versionLine = '';\n  let coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = `#version ${glslVersion}`;\n  }\n\n  const allDefines = {};\n  modules.forEach(module => {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  let assembledSource = prologue ? `\\\n${versionLine}\n${getShaderName({\n    id,\n    source,\n    type\n  })}\n${getShaderType({\n    type\n  })}\n${getPlatformShaderDefines(gl)}\n${getVersionDefines(gl, glslVersion, !isVertex)}\n${getApplicationDefines(allDefines)}\n${isVertex ? '' : FRAGMENT_SHADER_PROLOGUE}\n` : `${versionLine}\n`;\n  const hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  const hookInjections = {};\n  const declInjections = {};\n  const mainInjections = {};\n\n  for (const key in inject) {\n    const injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    const match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      const hash = match[2];\n      const name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  for (const module of modules) {\n    if (log) {\n      module.checkDeprecations(coreSource, log);\n    }\n\n    const moduleSource = module.getModuleSource(type, glslVersion);\n    assembledSource += moduleSource;\n    const injections = module.injections[type];\n\n    for (const key in injections) {\n      const match = key.match(/^(v|f)s:#([\\w-]+)$/);\n\n      if (match) {\n        const name = match[2];\n        const injectionType = name === 'decl' ? declInjections : mainInjections;\n        injectionType[key] = injectionType[key] || [];\n        injectionType[key].push(injections[key]);\n      } else {\n        hookInjections[key] = hookInjections[key] || [];\n        hookInjections[key].push(injections[key]);\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    const uniforms = {};\n\n    for (const module of modules) {\n      const moduleUniforms = module.getUniforms(opts, uniforms);\n      Object.assign(uniforms, moduleUniforms);\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType({\n  type\n}) {\n  return `\n#define SHADER_TYPE_${SHADER_TYPE[type].toUpperCase()}\n`;\n}\n\nfunction getShaderName({\n  id,\n  source,\n  type\n}) {\n  const injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? `\n#define SHADER_NAME ${id}_${SHADER_TYPE[type]}\n\n` : '';\n}\n\nfunction getApplicationDefines(defines = {}) {\n  let count = 0;\n  let sourceText = '';\n\n  for (const define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    const value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += `#define ${define.toUpperCase()} ${defines[define]}\\n`;\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  let result = '';\n\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += `void ${hookFunction.signature} {\\n`;\n\n    if (hookFunction.header) {\n      result += `  ${hookFunction.header}`;\n    }\n\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a, b) => a.order - b.order);\n\n      for (const injection of injections) {\n        result += `  ${injection.injection}\\n`;\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += `  ${hookFunction.footer}`;\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(hook => {\n    let opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils/assert';\nconst UNIFORM_SETTERS = {\n  [5126]: getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform),\n  [35664]: getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform),\n  [35665]: getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform),\n  [35666]: getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform),\n  [5124]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35667]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35668]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35669]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35670]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35671]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35672]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35673]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35674]: getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform),\n  [35675]: getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform),\n  [35676]: getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [5125]: getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform),\n  [36294]: getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform),\n  [36295]: getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform),\n  [36296]: getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform),\n  [35685]: getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform),\n  [35686]: getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform),\n  [35687]: getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform),\n  [35688]: getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform),\n  [35689]: getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform),\n  [35690]: getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [35679]: getSamplerSetter,\n  [35682]: getSamplerSetter,\n  [36289]: getSamplerSetter,\n  [36292]: getSamplerSetter,\n  [36293]: getSamplerSetter,\n  [36298]: getSamplerSetter,\n  [36299]: getSamplerSetter,\n  [36300]: getSamplerSetter,\n  [36303]: getSamplerSetter,\n  [36306]: getSamplerSetter,\n  [36307]: getSamplerSetter,\n  [36308]: getSamplerSetter,\n  [36311]: getSamplerSetter\n};\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\nconst array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  const length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(`Uniform size should be multiples of ${uniformLength}`, value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  let result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(`Unknown GLSL uniform type ${info.type}`);\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  const UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(`Failed to parse GLSL uniform name ${name}`);\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? `${source} ` : '';\n      console.error(`${source} Bad uniform ${uniformName}`, value);\n      throw new Error(`${source} Bad uniform ${uniformName}`);\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      const dest = uniforms[key];\n\n      for (let i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  let cache = null;\n  return (gl, location, value) => {\n    const update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  let cache = null;\n  let cacheLength = null;\n  return (gl, location, value) => {\n    const arrayValue = toArray(value, size);\n    const length = arrayValue.length;\n    let update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (let i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","export default function getShaderName(shader, defaultName = 'unnamed') {\n  const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  const match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","const GL_FRAGMENT_SHADER = 0x8b30;\nconst GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  const {\n    shaderName,\n    errors,\n    warnings\n  } = parseGLSLCompilerError(errLog, src, shaderType);\n  return `GLSL compilation error in ${shaderName}\\n\\n${errors}\\n${warnings}`;\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  const errorStrings = errLog.split(/\\r?\\n/);\n  const errors = {};\n  const warnings = {};\n  const name = shaderName || getShaderName(src) || '(unnamed)';\n  const shaderDescription = `${getShaderTypeName(shaderType)} shader ${name}`;\n\n  for (let i = 0; i < errorStrings.length; i++) {\n    const errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    const segments = errorString.split(':');\n    const type = segments[0];\n    const line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(`GLSL compilation error in ${shaderDescription}: ${errLog}`);\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  const lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  let message = '';\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += `${line}\\n`;\n\n    if (errors[i + 1]) {\n      const error = errors[i + 1];\n      const segments = error.split(':', 3);\n      const type = segments[0];\n      const column = parseInt(segments[1], 10) || 0;\n      const err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(`^^^ ${type}: ${err}\\n\\n`, column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string, start = 1, delim = ': ') {\n  const lines = string.split(/\\r?\\n/);\n  const maxDigits = String(lines.length + start - 1).length;\n  return lines.map((line, i) => {\n    const lineNumber = String(i + start);\n    const digits = lineNumber.length;\n    const prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  let result = '';\n\n  for (let i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return `${result}${string}`;\n}\n//# sourceMappingURL=format-glsl-error.js.map","import { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport Resource from './resource';\nconst ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport class Shader extends Resource {\n  static getTypeName(shaderType) {\n    switch (shaderType) {\n      case 35633:\n        return 'vertex-shader';\n\n      case 35632:\n        return 'fragment-shader';\n\n      default:\n        assert(false);\n        return 'unknown';\n    }\n  }\n\n  constructor(gl, props) {\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    const id = getShaderName(props.source, null) || props.id || uid(`unnamed ${Shader.getTypeName(props.shaderType)}`);\n    super(gl, {\n      id\n    });\n    this.shaderType = props.shaderType;\n    this.source = props.source;\n    this.initialize(props);\n  }\n\n  initialize({\n    source\n  }) {\n    const shaderName = getShaderName(source, null);\n\n    if (shaderName) {\n      this.id = uid(shaderName);\n    }\n\n    this._compile(source);\n  }\n\n  getParameter(pname) {\n    return this.gl.getShaderParameter(this.handle, pname);\n  }\n\n  toString() {\n    return `${Shader.getTypeName(this.shaderType)}:${this.id}`;\n  }\n\n  getName() {\n    return getShaderName(this.source) || 'unnamed-shader';\n  }\n\n  getSource() {\n    return this.gl.getShaderSource(this.handle);\n  }\n\n  getTranslatedSource() {\n    const extension = this.gl.getExtension('WEBGL_debug_shaders');\n    return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n  }\n\n  _compile(source = this.source) {\n    if (!source.startsWith('#version ')) {\n      source = `#version 100\\n${source}`;\n    }\n\n    this.source = source;\n    this.gl.shaderSource(this.handle, this.source);\n    this.gl.compileShader(this.handle);\n    const compileStatus = this.getParameter(35713);\n\n    if (!compileStatus) {\n      const infoLog = this.gl.getShaderInfoLog(this.handle);\n      const {\n        shaderName,\n        errors,\n        warnings\n      } = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id);\n      log.error(`GLSL compilation errors in ${shaderName}\\n${errors}`)();\n      log.warn(`GLSL compilation warnings in ${shaderName}\\n${warnings}`)();\n      throw new Error(`GLSL compilation errors in ${shaderName}`);\n    }\n  }\n\n  _deleteHandle() {\n    this.gl.deleteShader(this.handle);\n  }\n\n  _getOptsFromHandle() {\n    return {\n      type: this.getParameter(35663),\n      source: this.getSource()\n    };\n  }\n\n}\nexport class VertexShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35633);\n  }\n\n}\nexport class FragmentShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35632);\n  }\n\n}\n//# sourceMappingURL=shader.js.map","import { assert } from '../utils/assert';\nconst GL_BYTE = 0x1400;\nconst GL_UNSIGNED_BYTE = 0x1401;\nconst GL_SHORT = 0x1402;\nconst GL_UNSIGNED_SHORT = 0x1403;\nconst GL_POINTS = 0x0;\nconst GL_LINES = 0x1;\nconst GL_LINE_LOOP = 0x2;\nconst GL_LINE_STRIP = 0x3;\nconst GL_TRIANGLES = 0x4;\nconst GL_TRIANGLE_STRIP = 0x5;\nconst GL_TRIANGLE_FAN = 0x6;\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8b50;\nconst GL_FLOAT_VEC3 = 0x8b51;\nconst GL_FLOAT_VEC4 = 0x8b52;\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8b53;\nconst GL_INT_VEC3 = 0x8b54;\nconst GL_INT_VEC4 = 0x8b55;\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nconst GL_BOOL = 0x8b56;\nconst GL_BOOL_VEC2 = 0x8b57;\nconst GL_BOOL_VEC3 = 0x8b58;\nconst GL_BOOL_VEC4 = 0x8b59;\nconst GL_FLOAT_MAT2 = 0x8b5a;\nconst GL_FLOAT_MAT3 = 0x8b5b;\nconst GL_FLOAT_MAT4 = 0x8b5c;\nconst GL_FLOAT_MAT2x3 = 0x8b65;\nconst GL_FLOAT_MAT2x4 = 0x8b66;\nconst GL_FLOAT_MAT3x2 = 0x8b67;\nconst GL_FLOAT_MAT3x4 = 0x8b68;\nconst GL_FLOAT_MAT4x2 = 0x8b69;\nconst GL_FLOAT_MAT4x3 = 0x8b6a;\nconst COMPOSITE_GL_TYPES = {\n  [GL_FLOAT]: [GL_FLOAT, 1, 'float'],\n  [GL_FLOAT_VEC2]: [GL_FLOAT, 2, 'vec2'],\n  [GL_FLOAT_VEC3]: [GL_FLOAT, 3, 'vec3'],\n  [GL_FLOAT_VEC4]: [GL_FLOAT, 4, 'vec4'],\n  [GL_INT]: [GL_INT, 1, 'int'],\n  [GL_INT_VEC2]: [GL_INT, 2, 'ivec2'],\n  [GL_INT_VEC3]: [GL_INT, 3, 'ivec3'],\n  [GL_INT_VEC4]: [GL_INT, 4, 'ivec4'],\n  [GL_UNSIGNED_INT]: [GL_UNSIGNED_INT, 1, 'uint'],\n  [GL_UNSIGNED_INT_VEC2]: [GL_UNSIGNED_INT, 2, 'uvec2'],\n  [GL_UNSIGNED_INT_VEC3]: [GL_UNSIGNED_INT, 3, 'uvec3'],\n  [GL_UNSIGNED_INT_VEC4]: [GL_UNSIGNED_INT, 4, 'uvec4'],\n  [GL_BOOL]: [GL_FLOAT, 1, 'bool'],\n  [GL_BOOL_VEC2]: [GL_FLOAT, 2, 'bvec2'],\n  [GL_BOOL_VEC3]: [GL_FLOAT, 3, 'bvec3'],\n  [GL_BOOL_VEC4]: [GL_FLOAT, 4, 'bvec4'],\n  [GL_FLOAT_MAT2]: [GL_FLOAT, 8, 'mat2'],\n  [GL_FLOAT_MAT2x3]: [GL_FLOAT, 8, 'mat2x3'],\n  [GL_FLOAT_MAT2x4]: [GL_FLOAT, 8, 'mat2x4'],\n  [GL_FLOAT_MAT3]: [GL_FLOAT, 12, 'mat3'],\n  [GL_FLOAT_MAT3x2]: [GL_FLOAT, 12, 'mat3x2'],\n  [GL_FLOAT_MAT3x4]: [GL_FLOAT, 12, 'mat3x4'],\n  [GL_FLOAT_MAT4]: [GL_FLOAT, 16, 'mat4'],\n  [GL_FLOAT_MAT4x2]: [GL_FLOAT, 16, 'mat4x2'],\n  [GL_FLOAT_MAT4x3]: [GL_FLOAT, 16, 'mat4x3']\n};\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount({\n  drawMode,\n  vertexCount\n}) {\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount({\n  drawMode,\n  vertexCount\n}) {\n  const primitiveCount = getPrimitiveCount({\n    drawMode,\n    vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  const typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  const [type, components] = typeAndSize;\n  return {\n    type,\n    components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (const glType in COMPOSITE_GL_TYPES) {\n    const [compType, compComponents, name] = COMPOSITE_GL_TYPES[glType];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType,\n        name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\nexport default class ProgramConfiguration {\n  constructor(program) {\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  getAttributeInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.attributeInfosByLocation[location];\n    }\n\n    return this.attributeInfosByName[locationOrName] || null;\n  }\n\n  getAttributeLocation(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.location : -1;\n  }\n\n  getAttributeAccessor(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.accessor : null;\n  }\n\n  getVaryingInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.varyingInfos[location];\n    }\n\n    return this.varyingInfosByName[locationOrName] || null;\n  }\n\n  getVaryingIndex(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.location : -1;\n  }\n\n  getVaryingAccessor(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.accessor : null;\n  }\n\n  _readAttributesFromProgram(program) {\n    const {\n      gl\n    } = program;\n    const count = gl.getProgramParameter(program.handle, 35721);\n\n    for (let index = 0; index < count; index++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getActiveAttrib(program.handle, index);\n      const location = gl.getAttribLocation(program.handle, name);\n\n      if (location >= 0) {\n        this._addAttribute(location, name, type, size);\n      }\n    }\n\n    this.attributeInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _readVaryingsFromProgram(program) {\n    const {\n      gl\n    } = program;\n\n    if (!isWebGL2(gl)) {\n      return;\n    }\n\n    const count = gl.getProgramParameter(program.handle, 35971);\n\n    for (let location = 0; location < count; location++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getTransformFeedbackVarying(program.handle, location);\n\n      this._addVarying(location, name, type, size);\n    }\n\n    this.varyingInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _addAttribute(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = {\n      type,\n      size: size * components\n    };\n\n    this._inferProperties(location, name, accessor);\n\n    const attributeInfo = {\n      location,\n      name,\n      accessor: new Accessor(accessor)\n    };\n    this.attributeInfos.push(attributeInfo);\n    this.attributeInfosByLocation[location] = attributeInfo;\n    this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n  }\n\n  _inferProperties(location, name, accessor) {\n    if (/instance/i.test(name)) {\n      accessor.divisor = 1;\n    }\n  }\n\n  _addVarying(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = new Accessor({\n      type,\n      size: size * components\n    });\n    const varying = {\n      location,\n      name,\n      accessor\n    };\n    this.varyingInfos.push(varying);\n    this.varyingInfosByName[varying.name] = varying;\n  }\n\n}\n//# sourceMappingURL=program-configuration.js.map","import Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nconst LOG_PROGRAM_PERF_PRIORITY = 4;\nconst GL_SEPARATE_ATTRIBS = 0x8c8d;\nconst V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\nexport default class Program extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n    this._isCached = false;\n    this.initialize(props);\n    Object.seal(this);\n\n    this._setId(props.id);\n  }\n\n  initialize(props = {}) {\n    const {\n      hash,\n      vs,\n      fs,\n      varyings,\n      bufferMode = GL_SEPARATE_ATTRIBS\n    } = props;\n    this.hash = hash || '';\n    this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n      id: `${props.id}-vs`,\n      source: vs\n    }) : vs;\n    this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n      id: `${props.id}-fs`,\n      source: fs\n    }) : fs;\n    assert(this.vs instanceof VertexShader);\n    assert(this.fs instanceof FragmentShader);\n    this.uniforms = {};\n    this._textureUniforms = {};\n\n    if (varyings && varyings.length > 0) {\n      assertWebGL2Context(this.gl);\n      this.varyings = varyings;\n      this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n    }\n\n    this._compileAndLink();\n\n    this._readUniformLocationsFromLinkedProgram();\n\n    this.configuration = new ProgramConfiguration(this);\n    return this.setProps(props);\n  }\n\n  delete(options = {}) {\n    if (this._isCached) {\n      return this;\n    }\n\n    return super.delete(options);\n  }\n\n  setProps(props) {\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    return this;\n  }\n\n  draw({\n    logPriority,\n    drawMode = 4,\n    vertexCount,\n    offset = 0,\n    start,\n    end,\n    isIndexed = false,\n    indexType = 5123,\n    instanceCount = 0,\n    isInstanced = instanceCount > 0,\n    vertexArray = null,\n    transformFeedback,\n    framebuffer,\n    parameters = {},\n    uniforms,\n    samplers\n  }) {\n    if (uniforms || samplers) {\n      log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n      this.setUniforms(uniforms || {});\n    }\n\n    if (log.priority >= logPriority) {\n      const fb = framebuffer ? framebuffer.id : 'default';\n      const message = `mode=${getKey(this.gl, drawMode)} verts=${vertexCount} ` + `instances=${instanceCount} indexType=${getKey(this.gl, indexType)} ` + `isInstanced=${isInstanced} isIndexed=${isIndexed} ` + `Framebuffer=${fb}`;\n      log.log(logPriority, message)();\n    }\n\n    assert(vertexArray);\n    this.gl.useProgram(this.handle);\n\n    if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n      return false;\n    }\n\n    vertexArray.bindForDraw(vertexCount, instanceCount, () => {\n      if (framebuffer !== undefined) {\n        parameters = Object.assign({}, parameters, {\n          framebuffer\n        });\n      }\n\n      if (transformFeedback) {\n        const primitiveMode = getPrimitiveDrawMode(drawMode);\n        transformFeedback.begin(primitiveMode);\n      }\n\n      this._bindTextures();\n\n      withParameters(this.gl, parameters, () => {\n        if (isIndexed && isInstanced) {\n          this.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n        } else if (isIndexed && isWebGL2(this.gl) && !isNaN(start) && !isNaN(end)) {\n          this.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n        } else if (isIndexed) {\n          this.gl.drawElements(drawMode, vertexCount, indexType, offset);\n        } else if (isInstanced) {\n          this.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n        } else {\n          this.gl.drawArrays(drawMode, offset, vertexCount);\n        }\n      });\n\n      if (transformFeedback) {\n        transformFeedback.end();\n      }\n    });\n    return true;\n  }\n\n  setUniforms(uniforms = {}) {\n    if (log.priority >= 2) {\n      checkUniformValues(uniforms, this.id, this._uniformSetters);\n    }\n\n    this.gl.useProgram(this.handle);\n\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n      const uniformSetter = this._uniformSetters[uniformName];\n\n      if (uniformSetter) {\n        let value = uniform;\n        let textureUpdate = false;\n\n        if (value instanceof Framebuffer) {\n          value = value.texture;\n        }\n\n        if (value instanceof Texture) {\n          textureUpdate = this.uniforms[uniformName] !== uniform;\n\n          if (textureUpdate) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            }\n\n            const texture = value;\n            const {\n              textureIndex\n            } = uniformSetter;\n            texture.bind(textureIndex);\n            value = textureIndex;\n            this._textureUniforms[uniformName] = texture;\n          } else {\n            value = uniformSetter.textureIndex;\n          }\n        } else if (this._textureUniforms[uniformName]) {\n          delete this._textureUniforms[uniformName];\n        }\n\n        if (uniformSetter(value) || textureUpdate) {\n          copyUniform(this.uniforms, uniformName, uniform);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  _areTexturesRenderable() {\n    let texturesRenderable = true;\n\n    for (const uniformName in this._textureUniforms) {\n      const texture = this._textureUniforms[uniformName];\n      texture.update();\n      texturesRenderable = texturesRenderable && texture.loaded;\n    }\n\n    return texturesRenderable;\n  }\n\n  _bindTextures() {\n    for (const uniformName in this._textureUniforms) {\n      const textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n      this._textureUniforms[uniformName].bind(textureIndex);\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createProgram();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteProgram(this.handle);\n  }\n\n  _getOptionsFromHandle(handle) {\n    const shaderHandles = this.gl.getAttachedShaders(handle);\n    const opts = {};\n\n    for (const shaderHandle of shaderHandles) {\n      const type = this.gl.getShaderParameter(this.handle, 35663);\n\n      switch (type) {\n        case 35633:\n          opts.vs = new VertexShader({\n            handle: shaderHandle\n          });\n          break;\n\n        case 35632:\n          opts.fs = new FragmentShader({\n            handle: shaderHandle\n          });\n          break;\n\n        default:\n      }\n    }\n\n    return opts;\n  }\n\n  _getParameter(pname) {\n    return this.gl.getProgramParameter(this.handle, pname);\n  }\n\n  _setId(id) {\n    if (!id) {\n      const programName = this._getName();\n\n      this.id = uid(programName);\n    }\n  }\n\n  _getName() {\n    let programName = this.vs.getName() || this.fs.getName();\n    programName = programName.replace(/shader/i, '');\n    programName = programName ? `${programName}-program` : 'program';\n    return programName;\n  }\n\n  _compileAndLink() {\n    const {\n      gl\n    } = this;\n    gl.attachShader(this.handle, this.vs.handle);\n    gl.attachShader(this.handle, this.fs.handle);\n    log.time(LOG_PROGRAM_PERF_PRIORITY, `linkProgram for ${this._getName()}`)();\n    gl.linkProgram(this.handle);\n    log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, `linkProgram for ${this._getName()}`)();\n\n    if (gl.debug || log.level > 0) {\n      const linked = gl.getProgramParameter(this.handle, 35714);\n\n      if (!linked) {\n        throw new Error(`Error linking: ${gl.getProgramInfoLog(this.handle)}`);\n      }\n\n      gl.validateProgram(this.handle);\n      const validated = gl.getProgramParameter(this.handle, 35715);\n\n      if (!validated) {\n        throw new Error(`Error validating: ${gl.getProgramInfoLog(this.handle)}`);\n      }\n    }\n  }\n\n  _readUniformLocationsFromLinkedProgram() {\n    const {\n      gl\n    } = this;\n    this._uniformSetters = {};\n    this._uniformCount = this._getParameter(35718);\n\n    for (let i = 0; i < this._uniformCount; i++) {\n      const info = this.gl.getActiveUniform(this.handle, i);\n      const {\n        name\n      } = parseUniformName(info.name);\n      let location = gl.getUniformLocation(this.handle, name);\n      this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n      if (info.size > 1) {\n        for (let l = 0; l < info.size; l++) {\n          location = gl.getUniformLocation(this.handle, `${name}[${l}]`);\n          this._uniformSetters[`${name}[${l}]`] = getUniformSetter(gl, location, info);\n        }\n      }\n    }\n\n    this._textureIndexCounter = 0;\n  }\n\n  getActiveUniforms(uniformIndices, pname) {\n    return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n  }\n\n  getUniformBlockIndex(blockName) {\n    return this.gl2.getUniformBlockIndex(this.handle, blockName);\n  }\n\n  getActiveUniformBlockParameter(blockIndex, pname) {\n    return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n  }\n\n  uniformBlockBinding(blockIndex, blockBinding) {\n    this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n  }\n\n}\n//# sourceMappingURL=program.js.map","import { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\nexport default class ProgramManager {\n  static getDefaultProgramManager(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n    return gl.luma.defaultProgramManager;\n  }\n\n  constructor(gl) {\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  addDefaultModule(module) {\n    if (!this._defaultModules.find(m => m.name === module.name)) {\n      this._defaultModules.push(module);\n    }\n\n    this.stateHash++;\n  }\n\n  removeDefaultModule(module) {\n    const moduleName = typeof module === 'string' ? module : module.name;\n    this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    this.stateHash++;\n  }\n\n  addShaderHook(hook, opts) {\n    if (opts) {\n      hook = Object.assign(opts, {\n        hook\n      });\n    }\n\n    this._hookFunctions.push(hook);\n\n    this.stateHash++;\n  }\n\n  get(props = {}) {\n    const {\n      vs = '',\n      fs = '',\n      defines = {},\n      inject = {},\n      varyings = [],\n      bufferMode = 0x8c8d,\n      transpileToGLSL100 = false\n    } = props;\n\n    const modules = this._getModuleList(props.modules);\n\n    const vsHash = this._getHash(vs);\n\n    const fsHash = this._getHash(fs);\n\n    const moduleHashes = modules.map(m => this._getHash(m.name)).sort();\n    const varyingHashes = varyings.map(v => this._getHash(v));\n    const defineKeys = Object.keys(defines).sort();\n    const injectKeys = Object.keys(inject).sort();\n    const defineHashes = [];\n    const injectHashes = [];\n\n    for (const key of defineKeys) {\n      defineHashes.push(this._getHash(key));\n      defineHashes.push(this._getHash(defines[key]));\n    }\n\n    for (const key of injectKeys) {\n      injectHashes.push(this._getHash(key));\n      injectHashes.push(this._getHash(inject[key]));\n    }\n\n    const hash = `${vsHash}/${fsHash}D${defineHashes.join('/')}M${moduleHashes.join('/')}I${injectHashes.join('/')}V${varyingHashes.join('/')}H${this.stateHash}B${bufferMode}${transpileToGLSL100 ? 'T' : ''}`;\n\n    if (!this._programCache[hash]) {\n      const assembled = assembleShaders(this.gl, {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        hookFunctions: this._hookFunctions,\n        transpileToGLSL100\n      });\n      this._programCache[hash] = new Program(this.gl, {\n        hash,\n        vs: assembled.vs,\n        fs: assembled.fs,\n        varyings,\n        bufferMode\n      });\n\n      this._getUniforms[hash] = assembled.getUniforms || (x => {});\n\n      this._useCounts[hash] = 0;\n    }\n\n    this._useCounts[hash]++;\n    return this._programCache[hash];\n  }\n\n  getUniforms(program) {\n    return this._getUniforms[program.hash] || null;\n  }\n\n  release(program) {\n    const hash = program.hash;\n    this._useCounts[hash]--;\n\n    if (this._useCounts[hash] === 0) {\n      this._programCache[hash].delete();\n\n      delete this._programCache[hash];\n      delete this._getUniforms[hash];\n      delete this._useCounts[hash];\n    }\n  }\n\n  _getHash(key) {\n    if (this._hashes[key] === undefined) {\n      this._hashes[key] = this._hashCounter++;\n    }\n\n    return this._hashes[key];\n  }\n\n  _getModuleList(appModules = []) {\n    const modules = new Array(this._defaultModules.length + appModules.length);\n    const seen = {};\n    let count = 0;\n\n    for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n      const module = this._defaultModules[i];\n      const name = module.name;\n      modules[count++] = module;\n      seen[name] = true;\n    }\n\n    for (let i = 0, len = appModules.length; i < len; ++i) {\n      const module = appModules[i];\n      const name = module.name;\n\n      if (!seen[name]) {\n        modules[count++] = module;\n        seen[name] = true;\n      }\n    }\n\n    modules.length = count;\n    return modules;\n  }\n\n}\n//# sourceMappingURL=program-manager.js.map","let arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  const navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  const userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils/assert';\nimport { getBrowser } from 'probe.gl';\nconst ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\nexport default class VertexArrayObject extends Resource {\n  static isSupported(gl, options = {}) {\n    if (options.constantAttributeZero) {\n      return isWebGL2(gl) || getBrowser() === 'Chrome';\n    }\n\n    return true;\n  }\n\n  static getDefaultArray(gl) {\n    gl.luma = gl.luma || {};\n\n    if (!gl.luma.defaultVertexArray) {\n      gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n        handle: null,\n        isDefaultArray: true\n      });\n    }\n\n    return gl.luma.defaultVertexArray;\n  }\n\n  static getMaxAttributes(gl) {\n    VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n    return VertexArrayObject.MAX_ATTRIBUTES;\n  }\n\n  static setConstant(gl, location, array) {\n    switch (array.constructor) {\n      case Float32Array:\n        VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n        break;\n\n      case Int32Array:\n        VertexArrayObject._setConstantIntArray(gl, location, array);\n\n        break;\n\n      case Uint32Array:\n        VertexArrayObject._setConstantUintArray(gl, location, array);\n\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    super(gl, Object.assign({}, opts, {\n      id\n    }));\n    this.buffer = null;\n    this.bufferValue = null;\n    this.isDefaultArray = opts.isDefaultArray || false;\n    this.gl2 = gl;\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    super.delete();\n\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    return this;\n  }\n\n  get MAX_ATTRIBUTES() {\n    return VertexArrayObject.getMaxAttributes(this.gl);\n  }\n\n  initialize(props = {}) {\n    return this.setProps(props);\n  }\n\n  setProps(props) {\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, opts = {}) {\n    assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n    this.bind(() => {\n      this.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n    });\n    return this;\n  }\n\n  setBuffer(location, buffer, accessor) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, accessor);\n    }\n\n    const {\n      size,\n      type,\n      stride,\n      offset,\n      normalized,\n      integer,\n      divisor\n    } = accessor;\n    const {\n      gl,\n      gl2\n    } = this;\n    location = Number(location);\n    this.bind(() => {\n      gl.bindBuffer(34962, buffer.handle);\n\n      if (integer) {\n        assert(isWebGL2(gl));\n        gl2.vertexAttribIPointer(location, size, type, stride, offset);\n      } else {\n        gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n      }\n\n      gl.enableVertexAttribArray(location);\n      gl2.vertexAttribDivisor(location, divisor || 0);\n    });\n    return this;\n  }\n\n  enable(location, enable = true) {\n    const disablingAttributeZero = !enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    });\n\n    if (!disablingAttributeZero) {\n      location = Number(location);\n      this.bind(() => enable ? this.gl.enableVertexAttribArray(location) : this.gl.disableVertexAttribArray(location));\n    }\n\n    return this;\n  }\n\n  getConstantBuffer(elementCount, value) {\n    const constantValue = this._normalizeConstantArrayValue(value);\n\n    const byteLength = constantValue.byteLength * elementCount;\n    const length = constantValue.length * elementCount;\n    let updateNeeded = !this.buffer;\n    this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n    updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n    updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n    if (updateNeeded) {\n      const typedArray = getScratchArray(value.constructor, length);\n      fillArray({\n        target: typedArray,\n        source: constantValue,\n        start: 0,\n        count: length\n      });\n      this.buffer.subData(typedArray);\n      this.bufferValue = value;\n    }\n\n    return this.buffer;\n  }\n\n  _normalizeConstantArrayValue(arrayValue) {\n    if (Array.isArray(arrayValue)) {\n      return new Float32Array(arrayValue);\n    }\n\n    return arrayValue;\n  }\n\n  _compareConstantArrayValues(v1, v2) {\n    if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; ++i) {\n      if (v1[i] !== v2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static _setConstantFloatArray(gl, location, array) {\n    switch (array.length) {\n      case 1:\n        gl.vertexAttrib1fv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttrib2fv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttrib3fv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttrib4fv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantIntArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1iv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2iv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3iv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4iv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantUintArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1uiv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2uiv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3uiv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4uiv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  _createHandle() {\n    const gl2 = this.gl;\n    return gl2.createVertexArray();\n  }\n\n  _deleteHandle(handle) {\n    this.gl2.deleteVertexArray(handle);\n    return [this.elements];\n  }\n\n  _bindHandle(handle) {\n    this.gl2.bindVertexArray(handle);\n  }\n\n  _getParameter(pname, {\n    location\n  }) {\n    assert(Number.isFinite(location));\n    return this.bind(() => {\n      switch (pname) {\n        case 34373:\n          return this.gl.getVertexAttribOffset(location, pname);\n\n        default:\n          return this.gl.getVertexAttrib(location, pname);\n      }\n    });\n  }\n\n}\n//# sourceMappingURL=vertex-array-object.js.map","import { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nconst MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nconst DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\nexport default class VertexArray {\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    this.vertexArrayObject.delete();\n  }\n\n  initialize(props = {}) {\n    this.reset();\n    this.configuration = null;\n    this.bindOnUse = false;\n    return this.setProps(props);\n  }\n\n  reset() {\n    this.elements = null;\n    this.elementsAccessor = null;\n    const {\n      MAX_ATTRIBUTES\n    } = this.vertexArrayObject;\n    this.values = new Array(MAX_ATTRIBUTES).fill(null);\n    this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n    this.unused = {};\n    this.drawParams = null;\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('elements' in props) {\n      this.setElementBuffer(props.elements);\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    return this;\n  }\n\n  clearDrawParams() {\n    this.drawParams = null;\n  }\n\n  getDrawParams() {\n    this.drawParams = this.drawParams || this._updateDrawParams();\n    return this.drawParams;\n  }\n\n  setAttributes(attributes) {\n    Object.assign(this.attributes, attributes);\n    this.vertexArrayObject.bind(() => {\n      for (const locationOrName in attributes) {\n        const value = attributes[locationOrName];\n\n        this._setAttribute(locationOrName, value);\n      }\n\n      this.gl.bindBuffer(34962, null);\n    });\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, accessor = {}) {\n    this.elements = elementBuffer;\n    this.elementsAccessor = accessor;\n    this.clearDrawParams();\n    this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n    return this;\n  }\n\n  setBuffer(locationOrName, buffer, appAccessor = {}) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, appAccessor);\n    }\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor);\n\n    if (location >= 0) {\n      this.values[location] = buffer;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setBuffer(location, buffer, accessor);\n    }\n\n    return this;\n  }\n\n  setConstant(locationOrName, arrayValue, appAccessor = {}) {\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n      size: arrayValue.length\n    }, appAccessor));\n\n    if (location >= 0) {\n      arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n      this.values[location] = arrayValue;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.enable(location, false);\n    }\n\n    return this;\n  }\n\n  unbindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.vertexArrayObject.setElementBuffer(null);\n      }\n\n      this.buffer = this.buffer || new Buffer(this.gl, {\n        accessor: {\n          size: 4\n        }\n      });\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(34962, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.setElementBuffer(this.elements);\n      }\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        const buffer = this.values[location];\n\n        if (buffer instanceof Buffer) {\n          this.setBuffer(location, buffer);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindForDraw(vertexCount, instanceCount, func) {\n    let value;\n    this.vertexArrayObject.bind(() => {\n      this._setConstantAttributes(vertexCount, instanceCount);\n\n      value = func();\n    });\n    return value;\n  }\n\n  _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n    const INVALID_RESULT = {\n      location: -1,\n      accessor: null\n    };\n\n    const {\n      location,\n      name\n    } = this._getAttributeIndex(locationOrName);\n\n    if (!Number.isFinite(location) || location < 0) {\n      this.unused[locationOrName] = value;\n      log.once(3, () => `unused value ${locationOrName} in ${this.id}`)();\n      return INVALID_RESULT;\n    }\n\n    const accessInfo = this._getAttributeInfo(name || location);\n\n    if (!accessInfo) {\n      return INVALID_RESULT;\n    }\n\n    const currentAccessor = this.accessors[location] || {};\n    const accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n    const {\n      size,\n      type\n    } = accessor;\n    assert(Number.isFinite(size) && Number.isFinite(type));\n    return {\n      location,\n      accessor\n    };\n  }\n\n  _getAttributeInfo(attributeName) {\n    return this.configuration && this.configuration.getAttributeInfo(attributeName);\n  }\n\n  _getAttributeIndex(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return {\n        location\n      };\n    }\n\n    const multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n    const name = multiLocation ? multiLocation[1] : locationOrName;\n    const locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n    if (this.configuration) {\n      return {\n        location: this.configuration.getAttributeLocation(name) + locationOffset,\n        name\n      };\n    }\n\n    return {\n      location: -1\n    };\n  }\n\n  _setAttribute(locationOrName, value) {\n    if (value instanceof Buffer) {\n      this.setBuffer(locationOrName, value);\n    } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n      const buffer = value[0];\n      const accessor = value[1];\n      this.setBuffer(locationOrName, buffer, accessor);\n    } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n      const constant = value;\n      this.setConstant(locationOrName, constant);\n    } else if (value.buffer instanceof Buffer) {\n      const accessor = value;\n      this.setBuffer(locationOrName, accessor.buffer, accessor);\n    } else {\n      throw new Error(ERR_ATTRIBUTE_TYPE);\n    }\n  }\n\n  _setConstantAttributes(vertexCount, instanceCount) {\n    const elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n    let constant = this.values[0];\n\n    if (ArrayBuffer.isView(constant)) {\n      this._setConstantAttributeZero(constant, elementCount);\n    }\n\n    for (let location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      constant = this.values[location];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttribute(location, constant);\n      }\n    }\n  }\n\n  _setConstantAttributeZero(constant, elementCount) {\n    if (VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    })) {\n      this._setConstantAttribute(0, constant);\n\n      return;\n    }\n\n    const buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n    this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n  }\n\n  _setConstantAttribute(location, constant) {\n    VertexArrayObject.setConstant(this.gl, location, constant);\n  }\n\n  _updateDrawParams() {\n    const drawParams = {\n      isIndexed: false,\n      isInstanced: false,\n      indexCount: Infinity,\n      vertexCount: Infinity,\n      instanceCount: Infinity\n    };\n\n    for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      this._updateDrawParamsForLocation(drawParams, location);\n    }\n\n    if (this.elements) {\n      drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n      drawParams.isIndexed = true;\n      drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n      drawParams.indexOffset = this.elementsAccessor.offset || 0;\n    }\n\n    if (drawParams.indexCount === Infinity) {\n      drawParams.indexCount = 0;\n    }\n\n    if (drawParams.vertexCount === Infinity) {\n      drawParams.vertexCount = 0;\n    }\n\n    if (drawParams.instanceCount === Infinity) {\n      drawParams.instanceCount = 0;\n    }\n\n    return drawParams;\n  }\n\n  _updateDrawParamsForLocation(drawParams, location) {\n    const value = this.values[location];\n    const accessor = this.accessors[location];\n\n    if (!value) {\n      return;\n    }\n\n    const {\n      divisor\n    } = accessor;\n    const isInstanced = divisor > 0;\n    drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n    if (value instanceof Buffer) {\n      const buffer = value;\n\n      if (isInstanced) {\n        const instanceCount = buffer.getVertexCount(accessor);\n        drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n      } else {\n        const vertexCount = buffer.getVertexCount(accessor);\n        drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n      }\n    }\n  }\n\n  setElements(elementBuffer = null, accessor = {}) {\n    log.deprecated('setElements', 'setElementBuffer')();\n    return this.setElementBuffer(elementBuffer, accessor);\n  }\n\n}\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${i % size === 0 ? ' ' : ''}`;\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForVertexArray({\n  vertexArray,\n  header = 'Attributes'\n}) {\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  const table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  const attributes = vertexArray.values;\n\n  for (const attributeLocation in attributes) {\n    const info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      let rowHeader = `${attributeLocation}: ${info.name}`;\n      const accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = `${attributeLocation}: ${getGLSLDeclaration(info.name, accessor)}`;\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  const {\n    gl\n  } = vertexArray;\n\n  if (!attribute) {\n    return {\n      [header]: 'null',\n      'Format ': 'N/A'\n    };\n  }\n\n  let type = 'NOT PROVIDED';\n  let size = 1;\n  let verts = 0;\n  let bytes = 0;\n  let isInteger;\n  let marker;\n  let value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    const buffer = attribute;\n    const {\n      data,\n      changed\n    } = buffer.getDebugData();\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    let format;\n\n    if (accessor) {\n      const instanced = accessor.divisor > 0;\n      format = `${instanced ? 'I ' : 'P '} ${verts} (x${size}=${bytes} bytes ${getKey(gl, type)})`;\n    } else {\n      isInteger = true;\n      format = `${bytes} bytes`;\n    }\n\n    return {\n      [header]: `${marker}${formatValue(value, {\n        size,\n        isInteger\n      })}`,\n      'Format ': format\n    };\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return {\n    [header]: `${formatValue(value, {\n      size,\n      isInteger\n    })} (constant)`,\n    'Format ': `${size}x${type} (constant)`\n  };\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  const {\n    type,\n    size\n  } = accessor;\n  const typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? `${name} (${typeAndName.name})` : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import { assert } from '../utils/assert';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForUniforms({\n  header = 'Uniforms',\n  program,\n  uniforms,\n  undefinedOnly = false\n}) {\n  assert(program);\n  const SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  const PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  const uniformLocations = program._uniformSetters;\n  const table = {};\n  const uniformNames = Object.keys(uniformLocations).sort();\n  let count = 0;\n\n  for (const uniformName of uniformNames) {\n    if (!uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (!table[uniformName]) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  let unusedCount = 0;\n  const unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = {\n          Type: `NOT USED: ${uniform}`,\n          [header]: formatValue(uniform)\n        };\n      }\n    }\n  }\n\n  return {\n    table,\n    count,\n    unusedTable,\n    unusedCount\n  };\n}\n\nfunction addUniformToTable({\n  table,\n  header,\n  uniforms,\n  uniformName,\n  undefinedOnly\n}) {\n  const value = uniforms[uniformName];\n  const isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    table[uniformName] = {\n      [header]: isDefined ? formatValue(value) : 'N/A',\n      'Uniform Type': isDefined ? value : 'NOT PROVIDED'\n    };\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  const table = {};\n  const header = `Accessors for ${config.id}`;\n\n  for (const attributeInfo of config.attributeInfos) {\n    if (attributeInfo) {\n      const glslDeclaration = getGLSLDeclaration(attributeInfo);\n      table[`in ${glslDeclaration}`] = {\n        [header]: JSON.stringify(attributeInfo.accessor)\n      };\n    }\n  }\n\n  for (const varyingInfo of config.varyingInfos) {\n    if (varyingInfo) {\n      const glslDeclaration = getGLSLDeclaration(varyingInfo);\n      table[`out ${glslDeclaration}`] = {\n        [header]: JSON.stringify(varyingInfo.accessor)\n      };\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  const {\n    type,\n    size\n  } = attributeInfo.accessor;\n  const typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return `${typeAndName.name} ${attributeInfo.name}`;\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import { Buffer, assert } from '@luma.gl/webgl';\nconst GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  const buffers = {};\n  let indices = geometry.indices;\n\n  for (const name in geometry.attributes) {\n    const attribute = geometry.attributes[name];\n    const remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      const typedArray = attribute.value;\n      const accessor = { ...attribute\n      };\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    const data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    const accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data,\n      target: 34963\n    }), accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  const {\n    attributeMap = GLTF_TO_LUMA_ATTRIBUTE_MAP\n  } = options || {};\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  let category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), `attribute ${attributeName} needs size`);\n}\n//# sourceMappingURL=model-utils.js.map","import { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\nconst ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nconst NOOP = () => {};\n\nconst DRAW_PARAMS = {};\nexport default class Model {\n  constructor(gl, props = {}) {\n    const {\n      id = uid('model')\n    } = props;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  initialize(props) {\n    this.props = {};\n    this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n    this._programManagerState = -1;\n    this._managedProgram = false;\n    const {\n      program = null,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this.program = null;\n    this.vertexArray = null;\n    this._programDirty = true;\n    this.userData = {};\n    this.needsRedraw = true;\n    this._attributes = {};\n    this.attributes = {};\n    this.uniforms = {};\n    this.pickable = true;\n\n    this._checkProgram();\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n    this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n    this.vertexCount = props.vertexCount || 0;\n    this.geometryBuffers = {};\n    this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n    this._setModelProps(props);\n\n    this.geometry = {};\n    assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n  }\n\n  setProps(props) {\n    this._setModelProps(props);\n  }\n\n  delete() {\n    for (const key in this._attributes) {\n      if (this._attributes[key] !== this.attributes[key]) {\n        this._attributes[key].delete();\n      }\n    }\n\n    if (this._managedProgram) {\n      this.programManager.release(this.program);\n      this._managedProgram = false;\n    }\n\n    this.vertexArray.delete();\n\n    this._deleteGeometryBuffers();\n  }\n\n  getDrawMode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getInstanceCount() {\n    return this.instanceCount;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  setProgram(props) {\n    const {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this._programDirty = true;\n  }\n\n  getUniforms() {\n    return this.uniforms;\n  }\n\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n    return this;\n  }\n\n  setVertexCount(vertexCount) {\n    assert(Number.isFinite(vertexCount));\n    this.vertexCount = vertexCount;\n    return this;\n  }\n\n  setInstanceCount(instanceCount) {\n    assert(Number.isFinite(instanceCount));\n    this.instanceCount = instanceCount;\n    return this;\n  }\n\n  setGeometry(geometry) {\n    this.drawMode = geometry.drawMode;\n    this.vertexCount = geometry.getVertexCount();\n\n    this._deleteGeometryBuffers();\n\n    this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n    this.vertexArray.setAttributes(this.geometryBuffers);\n    return this;\n  }\n\n  setAttributes(attributes = {}) {\n    if (isObjectEmpty(attributes)) {\n      return this;\n    }\n\n    const normalizedAttributes = {};\n\n    for (const name in attributes) {\n      const attribute = attributes[name];\n      normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n    }\n\n    this.vertexArray.setAttributes(normalizedAttributes);\n    return this;\n  }\n\n  setUniforms(uniforms = {}) {\n    Object.assign(this.uniforms, uniforms);\n    return this;\n  }\n\n  getModuleUniforms(opts) {\n    this._checkProgram();\n\n    const getUniforms = this.programManager.getUniforms(this.program);\n\n    if (getUniforms) {\n      return getUniforms(opts);\n    }\n\n    return {};\n  }\n\n  updateModuleSettings(opts) {\n    const uniforms = this.getModuleUniforms(opts || {});\n    return this.setUniforms(uniforms);\n  }\n\n  clear(opts) {\n    clear(this.program.gl, opts);\n    return this;\n  }\n\n  draw(opts = {}) {\n    this._checkProgram();\n\n    const {\n      moduleSettings = null,\n      framebuffer,\n      uniforms = {},\n      attributes = {},\n      transformFeedback = this.transformFeedback,\n      parameters = {},\n      vertexArray = this.vertexArray\n    } = opts;\n    this.setAttributes(attributes);\n    this.updateModuleSettings(moduleSettings);\n    this.setUniforms(uniforms);\n    let logPriority;\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n    }\n\n    const drawParams = this.vertexArray.getDrawParams();\n    const {\n      isIndexed = drawParams.isIndexed,\n      indexType = drawParams.indexType,\n      indexOffset = drawParams.indexOffset,\n      vertexArrayInstanced = drawParams.isInstanced\n    } = this.props;\n\n    if (vertexArrayInstanced && !this.isInstanced) {\n      log.warn('Found instanced attributes on non-instanced model', this.id)();\n    }\n\n    const {\n      isInstanced,\n      instanceCount\n    } = this;\n    const {\n      onBeforeRender = NOOP,\n      onAfterRender = NOOP\n    } = this.props;\n    onBeforeRender();\n    this.program.setUniforms(this.uniforms);\n    const didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n      logPriority,\n      uniforms: null,\n      framebuffer,\n      parameters,\n      drawMode: this.getDrawMode(),\n      vertexCount: this.getVertexCount(),\n      vertexArray,\n      transformFeedback,\n      isIndexed,\n      indexType,\n      isInstanced,\n      instanceCount,\n      offset: isIndexed ? indexOffset : 0\n    }));\n    onAfterRender();\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n    }\n\n    return didDraw;\n  }\n\n  transform(opts = {}) {\n    const {\n      discard = true,\n      feedbackBuffers,\n      unbindModels = []\n    } = opts;\n    let {\n      parameters\n    } = opts;\n\n    if (feedbackBuffers) {\n      this._setFeedbackBuffers(feedbackBuffers);\n    }\n\n    if (discard) {\n      parameters = Object.assign({}, parameters, {\n        [35977]: discard\n      });\n    }\n\n    unbindModels.forEach(model => model.vertexArray.unbindBuffers());\n\n    try {\n      this.draw(Object.assign({}, opts, {\n        parameters\n      }));\n    } finally {\n      unbindModels.forEach(model => model.vertexArray.bindBuffers());\n    }\n\n    return this;\n  }\n\n  render(uniforms = {}) {\n    log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n    return this.setUniforms(uniforms).draw();\n  }\n\n  _setModelProps(props) {\n    Object.assign(this.props, props);\n\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    if ('pickable' in props) {\n      this.pickable = props.pickable;\n    }\n\n    if ('instanceCount' in props) {\n      this.instanceCount = props.instanceCount;\n    }\n\n    if ('geometry' in props) {\n      this.setGeometry(props.geometry);\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('_feedbackBuffers' in props) {\n      this._setFeedbackBuffers(props._feedbackBuffers);\n    }\n  }\n\n  _checkProgram() {\n    const needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    let {\n      program\n    } = this.programProps;\n\n    if (program) {\n      this._managedProgram = false;\n    } else {\n      const {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      } = this.programProps;\n      program = this.programManager.get({\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      });\n\n      if (this.program && this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this._programManagerState = this.programManager.stateHash;\n      this._managedProgram = true;\n    }\n\n    assert(program instanceof Program, 'Model needs a program');\n    this._programDirty = false;\n\n    if (program === this.program) {\n      return;\n    }\n\n    this.program = program;\n\n    if (this.vertexArray) {\n      this.vertexArray.setProps({\n        program: this.program,\n        attributes: this.vertexArray.attributes\n      });\n    } else {\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      });\n    }\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n  }\n\n  _deleteGeometryBuffers() {\n    for (const name in this.geometryBuffers) {\n      const buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n      if (buffer instanceof Buffer) {\n        buffer.delete();\n      }\n    }\n  }\n\n  _setAnimationProps(animationProps) {\n    if (this.animated) {\n      assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n    }\n  }\n\n  _setFeedbackBuffers(feedbackBuffers = {}) {\n    if (isObjectEmpty(feedbackBuffers)) {\n      return this;\n    }\n\n    const {\n      gl\n    } = this.program;\n    this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n      program: this.program\n    });\n    this.transformFeedback.setBuffers(feedbackBuffers);\n    return this;\n  }\n\n  _logDrawCallStart(logLevel) {\n    const logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n    if (Date.now() - this.lastLogTime < logDrawTimeout) {\n      return undefined;\n    }\n\n    this.lastLogTime = Date.now();\n    log.group(LOG_DRAW_PRIORITY, `>>> DRAWING MODEL ${this.id}`, {\n      collapsed: log.level <= 2\n    })();\n    return logLevel;\n  }\n\n  _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n    if (logLevel === undefined) {\n      return;\n    }\n\n    const attributeTable = getDebugTableForVertexArray({\n      vertexArray,\n      header: `${this.id} attributes`,\n      attributes: this._attributes\n    });\n    const {\n      table: uniformTable,\n      unusedTable,\n      unusedCount\n    } = getDebugTableForUniforms({\n      header: `${this.id} uniforms`,\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms)\n    });\n    const {\n      table: missingTable,\n      count: missingCount\n    } = getDebugTableForUniforms({\n      header: `${this.id} uniforms`,\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms),\n      undefinedOnly: true\n    });\n\n    if (missingCount > 0) {\n      log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n    }\n\n    if (unusedCount > 0) {\n      log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n    }\n\n    const configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n    log.table(logLevel, attributeTable)();\n    log.table(logLevel, uniformTable)();\n    log.table(logLevel + 1, configTable)();\n\n    if (framebuffer) {\n      framebuffer.log({\n        logLevel: LOG_DRAW_PRIORITY,\n        message: `Rendered to ${framebuffer.id}`\n      });\n    }\n\n    log.groupEnd(LOG_DRAW_PRIORITY, `>>> DRAWING MODEL ${this.id}`)();\n  }\n\n}\n//# sourceMappingURL=model.js.map","import { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\nexport default class Transform {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  delete() {\n    const {\n      model,\n      bufferTransform,\n      textureTransform\n    } = this;\n\n    if (model) {\n      model.delete();\n    }\n\n    if (bufferTransform) {\n      bufferTransform.delete();\n    }\n\n    if (textureTransform) {\n      textureTransform.delete();\n    }\n  }\n\n  run(opts = {}) {\n    const {\n      clearRenderTarget = true\n    } = opts;\n\n    const updatedOpts = this._updateDrawOptions(opts);\n\n    if (clearRenderTarget && updatedOpts.framebuffer) {\n      updatedOpts.framebuffer.clear({\n        color: true\n      });\n    }\n\n    this.model.transform(updatedOpts);\n  }\n\n  swap() {\n    let swapped = false;\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      swapped = swapped || resourceTransform.swap();\n    }\n\n    assert(swapped, 'Nothing to swap');\n  }\n\n  getBuffer(varyingName = null) {\n    return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n  }\n\n  getData(opts = {}) {\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      const data = resourceTransform.getData(opts);\n\n      if (data) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  getFramebuffer() {\n    return this.textureTransform && this.textureTransform.getFramebuffer();\n  }\n\n  update(opts = {}) {\n    if ('elementCount' in opts) {\n      this.model.setVertexCount(opts.elementCount);\n    }\n\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      resourceTransform.update(opts);\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      gl\n    } = this;\n\n    this._buildResourceTransforms(gl, props);\n\n    props = this._updateModelProps(props);\n    this.model = new Model(gl, Object.assign({}, props, {\n      fs: props.fs || getPassthroughFS({\n        version: getShaderVersion(props.vs)\n      }),\n      id: props.id || 'transform-model',\n      drawMode: props.drawMode || 0,\n      vertexCount: props.elementCount\n    }));\n    this.bufferTransform && this.bufferTransform.setupResources({\n      model: this.model\n    });\n  }\n\n  _updateModelProps(props) {\n    let updatedProps = Object.assign({}, props);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedProps = resourceTransform.updateModelProps(updatedProps);\n    }\n\n    return updatedProps;\n  }\n\n  _buildResourceTransforms(gl, props) {\n    if (canCreateBufferTransform(props)) {\n      this.bufferTransform = new BufferTransform(gl, props);\n    }\n\n    if (canCreateTextureTransform(props)) {\n      this.textureTransform = new TextureTransform(gl, props);\n    }\n\n    assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n  }\n\n  _updateDrawOptions(opts) {\n    let updatedOpts = Object.assign({}, opts);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n    }\n\n    return updatedOpts;\n  }\n\n}\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","function noop() {}\n\nconst DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\nexport default class Transition {\n  constructor(timeline) {\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(props) {\n    this.cancel();\n    this.settings = { ...DEFAULT_SETTINGS,\n      ...props\n    };\n    this._inProgress = true;\n    this.settings.onStart(this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n      this.settings.onEnd(this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      this.settings.onInterrupt(this);\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this.timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    this.settings.onUpdate(this);\n\n    if (this.timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map","import { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\nexport default class GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    cycleBuffers(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: getSourceBufferAttribute(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        time,\n        settings: {\n          duration,\n          easing\n        }\n      } = this.transition;\n      const t = easing(time / duration);\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n  }\n\n}\nconst vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\nexport default class GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: getSourceBufferAttribute(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: transition.settings.stiffness,\n        damping: transition.settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    cycleBuffers(buffers);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n\n    this.texture.delete();\n    this.texture = null;\n    this.framebuffer.delete();\n    this.framebuffer = null;\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n  constructor(gl, {\n    id,\n    timeline\n  }) {\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  finalize() {\n    for (const attributeName in this.transitions) {\n      this._removeTransition(attributeName);\n    }\n  }\n\n  update({\n    attributes,\n    transitions,\n    numInstances\n  }) {\n    this.numInstances = numInstances || 1;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const settings = attribute.getTransitionSetting(transitions);\n      if (!settings) continue;\n\n      this._updateAttribute(attributeName, attribute, settings);\n    }\n\n    for (const attributeName in this.transitions) {\n      const attribute = attributes[attributeName];\n\n      if (!attribute || !attribute.getTransitionSetting(transitions)) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }\n\n  hasAttribute(attributeName) {\n    const transition = this.transitions[attributeName];\n    return transition && transition.inProgress;\n  }\n\n  getAttributes() {\n    const animatedAttributes = {};\n\n    for (const attributeName in this.transitions) {\n      const transition = this.transitions[attributeName];\n\n      if (transition.inProgress) {\n        animatedAttributes[attributeName] = transition.attributeInTransition;\n      }\n    }\n\n    return animatedAttributes;\n  }\n\n  run() {\n    if (!this.isSupported || this.numInstances === 0) {\n      return false;\n    }\n\n    for (const attributeName in this.transitions) {\n      const updated = this.transitions[attributeName].update();\n\n      if (updated) {\n        this.needsRedraw = true;\n      }\n    }\n\n    const needsRedraw = this.needsRedraw;\n    this.needsRedraw = false;\n    return needsRedraw;\n  }\n\n  _removeTransition(attributeName) {\n    this.transitions[attributeName].cancel();\n    delete this.transitions[attributeName];\n  }\n\n  _updateAttribute(attributeName, attribute, settings) {\n    const transition = this.transitions[attributeName];\n    let isNew = !transition || transition.type !== settings.type;\n\n    if (isNew) {\n      if (!this.isSupported) {\n        log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n        return;\n      }\n\n      if (transition) {\n        this._removeTransition(attributeName);\n      }\n\n      const TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (TransitionType) {\n        this.transitions[attributeName] = new TransitionType({\n          attribute,\n          timeline: this.timeline,\n          gl: this.gl\n        });\n      } else {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        isNew = false;\n      }\n    }\n\n    if (isNew || attribute.needsRedraw()) {\n      this.needsRedraw = true;\n      this.transitions[attributeName].start(settings, this.numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","import Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n  constructor(gl, {\n    id = 'attribute-manager',\n    stats,\n    timeline\n  } = {}) {\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline\n    });\n    Object.seal(this);\n  }\n\n  finalize() {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].delete();\n    }\n\n    this.attributeTransitionManager.finalize();\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this.needsRedraw;\n    this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n    return redraw && this.id;\n  }\n\n  setNeedsRedraw(redraw = true) {\n    this.needsRedraw = true;\n    return this;\n  }\n\n  add(attributes, updaters) {\n    this._add(attributes, updaters);\n  }\n\n  addInstanced(attributes, updaters) {\n    this._add(attributes, updaters, {\n      instanced: 1\n    });\n  }\n\n  remove(attributeNameArray) {\n    for (let i = 0; i < attributeNameArray.length; i++) {\n      const name = attributeNameArray[i];\n\n      if (this.attributes[name] !== undefined) {\n        this.attributes[name].delete();\n        delete this.attributes[name];\n      }\n    }\n  }\n\n  invalidate(triggerName, dataRange) {\n    const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n    debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n  }\n\n  invalidateAll(dataRange) {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n    }\n\n    debug(TRACE_INVALIDATE, this, 'all');\n  }\n\n  update({\n    data,\n    numInstances,\n    startIndices = null,\n    transitions,\n    props = {},\n    buffers = {},\n    context = {}\n  } = {}) {\n    let updated = false;\n    debug(TRACE_UPDATE_START, this);\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeStart();\n    }\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      const accessorName = attribute.settings.accessor;\n      attribute.startIndices = startIndices;\n\n      if (props[attributeName]) {\n        log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n      }\n\n      if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n        updated = true;\n\n        this._updateAttribute({\n          attribute,\n          numInstances,\n          data,\n          props,\n          context\n        });\n      }\n\n      this.needsRedraw |= attribute.needsRedraw();\n    }\n\n    if (updated) {\n      debug(TRACE_UPDATE_END, this, numInstances);\n    }\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeEnd();\n    }\n\n    this.attributeTransitionManager.update({\n      attributes: this.attributes,\n      numInstances,\n      transitions\n    });\n  }\n\n  updateTransition() {\n    const {\n      attributeTransitionManager\n    } = this;\n    const transitionUpdated = attributeTransitionManager.run();\n    this.needsRedraw = this.needsRedraw || transitionUpdated;\n    return transitionUpdated;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getChangedAttributes(opts = {\n    clearChangedFlags: false\n  }) {\n    const {\n      attributes,\n      attributeTransitionManager\n    } = this;\n    const changedAttributes = { ...attributeTransitionManager.getAttributes()\n    };\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n\n      if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n        changedAttributes[attributeName] = attribute;\n      }\n    }\n\n    return changedAttributes;\n  }\n\n  getShaderAttributes(attributes, excludeAttributes = {}) {\n    if (!attributes) {\n      attributes = this.getAttributes();\n    }\n\n    const shaderAttributes = {};\n\n    for (const attributeName in attributes) {\n      if (!excludeAttributes[attributeName]) {\n        Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n      }\n    }\n\n    return shaderAttributes;\n  }\n\n  getAccessors() {\n    return this.updateTriggers;\n  }\n\n  _add(attributes, updaters, extraProps = {}) {\n    if (updaters) {\n      log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n    }\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      this.attributes[attributeName] = this._createAttribute(attributeName, attribute, extraProps);\n    }\n\n    this._mapUpdateTriggersToAttributes();\n  }\n\n  _createAttribute(name, attribute, extraProps) {\n    const props = { ...attribute,\n      id: name,\n      isIndexed: attribute.isIndexed || attribute.elements || false,\n      constant: attribute.constant || false,\n      size: attribute.elements && 1 || attribute.size || 1,\n      value: attribute.value || null,\n      divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor || 0\n    };\n    return new Attribute(this.gl, props);\n  }\n\n  _mapUpdateTriggersToAttributes() {\n    const triggers = {};\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      attribute.getUpdateTriggers().forEach(triggerName => {\n        if (!triggers[triggerName]) {\n          triggers[triggerName] = [];\n        }\n\n        triggers[triggerName].push(attributeName);\n      });\n    }\n\n    this.updateTriggers = triggers;\n  }\n\n  _invalidateTrigger(triggerName, dataRange) {\n    const {\n      attributes,\n      updateTriggers\n    } = this;\n    const invalidatedAttributes = updateTriggers[triggerName];\n\n    if (invalidatedAttributes) {\n      invalidatedAttributes.forEach(name => {\n        const attribute = attributes[name];\n\n        if (attribute) {\n          attribute.setNeedsUpdate(attribute.id, dataRange);\n        }\n      });\n    }\n\n    return invalidatedAttributes;\n  }\n\n  _updateAttribute(opts) {\n    const {\n      attribute,\n      numInstances\n    } = opts;\n    debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n    if (attribute.constant) {\n      attribute.setConstantValue(attribute.value);\n      return;\n    }\n\n    if (attribute.allocate(numInstances)) {\n      debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n    }\n\n    const updated = attribute.updateBuffer(opts);\n\n    if (updated) {\n      this.needsRedraw = true;\n      debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-manager.js.map","import { lerp } from 'math.gl';\nimport Transition from './transition';\nexport default class CPUInterpolationTransition extends Transition {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = lerp(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import Transition from './transition';\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nexport default class CPUSpringTransition extends Transition {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","import { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = normalizeTransitionSettings(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","export const LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport const PROP_SYMBOLS = {\n  COMPONENT: Symbol.for('component'),\n  ASYNC_DEFAULTS: Symbol.for('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol.for('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol.for('asyncPropResolved')\n};\n//# sourceMappingURL=constants.js.map","import { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT\n} = PROP_SYMBOLS;\nexport function validateProps(props) {\n  const propTypes = getPropTypes(props);\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  const result = {};\n  const propTypes = getPropTypes(props);\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = 'props'\n} = {}) {\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (typeof newProps !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (typeof oldProps !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  let dataChanged = null;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const triggerChanged = {};\n  let reason = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  const layer = props[COMPONENT];\n  const LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","const ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","export function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        geospatialOrigin = [0, 0, 0];\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let originCommon = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    originCommon = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - originCommon[0], cameraPosCommon[1] - originCommon[1], cameraPosCommon[2] - originCommon[2]];\n    originCommon[3] = 1;\n    projectionCenter = vec4.transformMat4([], originCommon, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin,\n  autoWrapLongitude = false\n} = {}) {\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = vec4.transformMat4([], [0, 0, -viewport.focalDistance, 1], viewport.projectionMatrix)[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCommonOrigin: originCommon.slice(0, 3),\n    project_uCenter: projectionCenter,\n    project_uPseudoMeters: Boolean(viewport._pseudoMeters),\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        if (!viewport._pseudoMeters) {\n          uniforms.project_uCommonUnitsPerMeter = distanceScalesAtOrigin.unitsPerMeter;\n        }\n\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  const result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n\nfunction ieLog2(x) {\n  return Math.log(x) * Math.LOG2E;\n}\n\nexport const log2 = Math.log2 || ieLog2;\n//# sourceMappingURL=math-utils.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { createMat4, transformVector, log2 } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nexport const DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return log2(scale);\n}\nexport function lngLatToWorld([lng, lat]) {\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  const lambda2 = lng * DEGREES_TO_RADIANS;\n  const phi2 = lat * DEGREES_TO_RADIANS;\n  const x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  const y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat([x, y]) {\n  const lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  const phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom({\n  latitude\n}) {\n  assert(Number.isFinite(latitude));\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales({\n  latitude,\n  longitude,\n  highPrecision = false\n}) {\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  const result = {};\n  const worldSize = TILE_SIZE;\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  const unitsPerDegreeX = worldSize / 360;\n  const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.unitsPerMeter = [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter];\n  result.metersPerUnit = [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter];\n  result.unitsPerDegree = [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter];\n  result.degreesPerUnit = [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter];\n\n  if (highPrecision) {\n    const latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    const unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    const altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    const altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  const [longitude, latitude, z0] = lngLatZ;\n  const [x, y, z] = xyz;\n  const {\n    unitsPerMeter,\n    unitsPerMeter2\n  } = getDistanceScales({\n    longitude,\n    latitude,\n    highPrecision: true\n  });\n  const worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  const newLngLat = worldToLngLat(worldspace);\n  const newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix({\n  height,\n  pitch,\n  bearing,\n  altitude,\n  scale,\n  center = null\n}) {\n  const vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  scale /= height;\n  mat4.scale(vm, vm, [scale, scale, scale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters({\n  width,\n  height,\n  fovy = altitudeToFovy(DEFAULT_ALTITUDE),\n  altitude,\n  pitch = 0,\n  nearZMultiplier = 1,\n  farZMultiplier = 1\n}) {\n  if (altitude !== undefined) {\n    fovy = altitudeToFovy(altitude);\n  }\n\n  const halfFov = 0.5 * fovy * DEGREES_TO_RADIANS;\n  const focalDistance = fovyToAltitude(fovy);\n  const pitchRadians = pitch * DEGREES_TO_RADIANS;\n  const topHalfSurfaceDistance = Math.sin(halfFov) * focalDistance / Math.sin(Math.min(Math.max(Math.PI / 2 - pitchRadians - halfFov, 0.01), Math.PI - 0.01));\n  const farZ = Math.sin(pitchRadians) * topHalfSurfaceDistance + focalDistance;\n  return {\n    fov: 2 * halfFov,\n    aspect: width / height,\n    focalDistance,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix({\n  width,\n  height,\n  pitch,\n  altitude,\n  fovy,\n  nearZMultiplier,\n  farZMultiplier\n}) {\n  const {\n    fov,\n    aspect,\n    near,\n    far\n  } = getProjectionParameters({\n    width,\n    height,\n    altitude,\n    fovy,\n    pitch,\n    nearZMultiplier,\n    farZMultiplier\n  });\n  const projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function altitudeToFovy(altitude) {\n  return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\nexport function fovyToAltitude(fovy) {\n  return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  const [x, y, z = 0] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n  const [x, y, z] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  const z0 = coord0[2];\n  const z1 = coord1[2];\n  const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nimport { log2 } from './math-utils';\nexport default function fitBounds({\n  width,\n  height,\n  bounds,\n  minExtent = 0,\n  maxZoom = 24,\n  padding = 0,\n  offset = [0, 0]\n}) {\n  const [[west, south], [east, north]] = bounds;\n\n  if (Number.isFinite(padding)) {\n    const p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  const viewport = new WebMercatorViewport({\n    width,\n    height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  const nw = viewport.project([west, north]);\n  const se = viewport.project([east, south]);\n  const size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  const targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  const scaleX = targetSize[0] / size[0];\n  const scaleY = targetSize[1] / size[1];\n  const offsetX = (padding.right - padding.left) / 2 / scaleX;\n  const offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  const centerLngLat = viewport.unproject(center);\n  const zoom = Math.min(maxZoom, viewport.zoom + log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom\n  };\n}\n//# sourceMappingURL=fit-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { transformVector } from './math-utils';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nexport default function getBounds(viewport, z = 0) {\n  const {\n    width,\n    height,\n    unproject\n  } = viewport;\n  const unprojectOps = {\n    targetZ: z\n  };\n  const bottomLeft = unproject([0, height], unprojectOps);\n  const bottomRight = unproject([width, height], unprojectOps);\n  let topLeft;\n  let topRight;\n  const halfFov = viewport.fovy ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS : Math.atan(0.5 / viewport.altitude);\n  const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n\n  if (halfFov > angleToGround - 0.01) {\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  const {\n    pixelUnprojectionMatrix\n  } = viewport;\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n  const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  const coord = vec2.lerp([], coord0, coord1, t);\n  const result = worldToLngLat(coord);\n  result[2] = targetZ;\n  return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import { createMat4 } from './math-utils';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, worldToPixels, altitudeToFovy, fovyToAltitude, DEFAULT_ALTITUDE, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport fitBounds from './fit-bounds';\nimport getBounds from './get-bounds';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nexport default class WebMercatorViewport {\n  constructor({\n    width,\n    height,\n    latitude = 0,\n    longitude = 0,\n    zoom = 0,\n    pitch = 0,\n    bearing = 0,\n    altitude = null,\n    fovy = null,\n    position = null,\n    nearZMultiplier = 0.02,\n    farZMultiplier = 1.01\n  } = {\n    width: 1,\n    height: 1\n  }) {\n    width = width || 1;\n    height = height || 1;\n\n    if (fovy === null && altitude === null) {\n      altitude = DEFAULT_ALTITUDE;\n      fovy = altitudeToFovy(altitude);\n    } else if (fovy === null) {\n      fovy = altitudeToFovy(altitude);\n    } else if (altitude === null) {\n      altitude = fovyToAltitude(fovy);\n    }\n\n    const scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    const distanceScales = getDistanceScales({\n      longitude,\n      latitude\n    });\n    const center = lngLatToWorld([longitude, latitude]);\n    center[2] = 0;\n\n    if (position) {\n      vec3.add(center, center, vec3.mul([], position, distanceScales.unitsPerMeter));\n    }\n\n    this.projectionMatrix = getProjectionMatrix({\n      width,\n      height,\n      pitch,\n      fovy,\n      nearZMultiplier,\n      farZMultiplier\n    });\n    this.viewMatrix = getViewMatrix({\n      height,\n      scale,\n      center,\n      pitch,\n      bearing,\n      altitude\n    });\n    this.width = width;\n    this.height = height;\n    this.scale = scale;\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.center = center;\n    this.meterOffset = position || [0, 0, 0];\n    this.distanceScales = distanceScales;\n\n    this._initMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    Object.freeze(this);\n  }\n\n  _initMatrices() {\n    const {\n      width,\n      height,\n      projectionMatrix,\n      viewMatrix\n    } = this;\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, projectionMatrix);\n    mat4.multiply(vpm, vpm, viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    const m = createMat4();\n    mat4.scale(m, m, [width / 2, -height / 2, 1]);\n    mat4.translate(m, m, [1, -1, 0]);\n    mat4.multiply(m, m, vpm);\n    const mInverse = mat4.invert(createMat4(), m);\n\n    if (!mInverse) {\n      throw new Error('Pixel project matrix not invertible');\n    }\n\n    this.pixelProjectionMatrix = m;\n    this.pixelUnprojectionMatrix = mInverse;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof WebMercatorViewport)) {\n      return false;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ = undefined\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = lngLatToWorld(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = worldToLngLat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(lngLat) {\n    return lngLatToWorld(lngLat);\n  }\n\n  unprojectFlat(xy) {\n    return worldToLngLat(xy);\n  }\n\n  getMapCenterByLngLatPosition({\n    lngLat,\n    pos\n  }) {\n    const fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n    const toLocation = lngLatToWorld(lngLat);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    return worldToLngLat(newCenter);\n  }\n\n  getLocationAtPoint({\n    lngLat,\n    pos\n  }) {\n    return this.getMapCenterByLngLatPosition({\n      lngLat,\n      pos\n    });\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds(Object.assign({\n      width,\n      height,\n      bounds\n    }, options));\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n  getBounds(options) {\n    const corners = this.getBoundingRegion(options);\n    const west = Math.min(...corners.map(p => p[0]));\n    const east = Math.max(...corners.map(p => p[0]));\n    const south = Math.min(...corners.map(p => p[1]));\n    const north = Math.max(...corners.map(p => p[1]));\n    return [[west, south], [east, north]];\n  }\n\n  getBoundingRegion(options = {}) {\n    return getBounds(this, options.z || 0);\n  }\n\n}\n//# sourceMappingURL=web-mercator-viewport.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport { mod, log2 } from './math-utils';\nconst TILE_SIZE = 512;\nexport default function normalizeViewportProps({\n  width,\n  height,\n  longitude,\n  latitude,\n  zoom,\n  pitch = 0,\n  bearing = 0\n}) {\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  const minZoom = log2(height / TILE_SIZE);\n\n  if (zoom <= minZoom) {\n    zoom = minZoom;\n    latitude = 0;\n  } else {\n    const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n    const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n\n    if (latitude < minLatitude) {\n      latitude = minLatitude;\n    } else {\n      const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n\n      if (latitude > maxLatitude) {\n        latitude = maxLatitude;\n      }\n    }\n  }\n\n  return {\n    width,\n    height,\n    longitude,\n    latitude,\n    zoom,\n    pitch,\n    bearing\n  };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","import log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_ZOOM = 0;\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\nexport default class Viewport {\n  constructor(opts = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = 1,\n      height = 1\n    } = opts;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return PROJECTION_MODE.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && equals(viewport.projectionMatrix, this.projectionMatrix) && equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      return lngLatToWorld(xyz);\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return worldToLngLat(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin = null) {\n    if (coordinateOrigin) {\n      return getDistanceScales({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  getCameraPosition() {\n    return this.cameraPosition;\n  }\n\n  getCameraDirection() {\n    return this.cameraDirection;\n  }\n\n  getCameraUp() {\n    return this.cameraUp;\n  }\n\n  _createProjectionMatrix({\n    orthographic,\n    fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) {\n    return orthographic ? new Matrix4().orthographic({\n      fovy: fovyRadians,\n      aspect,\n      focalDistance,\n      near,\n      far\n    }) : new Matrix4().perspective({\n      fovy: fovyRadians,\n      aspect,\n      near,\n      far\n    });\n  }\n\n  _initViewMatrix(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      longitude = null,\n      latitude = null,\n      zoom = null,\n      position = null,\n      modelMatrix = null,\n      focalDistance = 1,\n      distanceScales = null\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n    this.zoom = zoom;\n\n    if (!Number.isFinite(this.zoom)) {\n      this.zoom = this.isGeospatial ? getMeterZoom({\n        latitude\n      }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    this.distanceScales = this.isGeospatial ? getDistanceScales({\n      latitude,\n      longitude\n    }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = focalDistance;\n    this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n    this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n    this.position = ZERO_VECTOR;\n    this.meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      this.position = position;\n      this.modelMatrix = modelMatrix;\n      this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n    }\n\n    if (this.isGeospatial) {\n      this.longitude = longitude;\n      this.latitude = latitude;\n      this.center = this._getCenterInWorld({\n        longitude,\n        latitude\n      });\n    } else {\n      this.center = position ? this.projectPosition(position) : [0, 0, 0];\n    }\n\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n  }\n\n  _getCenterInWorld({\n    longitude,\n    latitude\n  }) {\n    const {\n      meterOffset,\n      distanceScales\n    } = this;\n    const center = new Vector3(this.projectPosition([longitude, latitude, 0]));\n\n    if (meterOffset) {\n      const commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n      center.add(commonPosition);\n    }\n\n    return center;\n  }\n\n  _initProjectionMatrix(opts) {\n    const {\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      focalDistance = 1\n    } = opts;\n    this.projectionMatrix = projectionMatrix || this._createProjectionMatrix({\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      aspect: this.width / this.height,\n      focalDistance,\n      near,\n      far\n    });\n  }\n\n  _initPixelMatrices() {\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n    const viewportMatrix = createMat4();\n    const pixelProjectionMatrix = createMat4();\n    mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.viewportMatrix = viewportMatrix;\n    this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      log.warn('Pixel project matrix not invertible')();\n    }\n  }\n\n}\nViewport.displayName = 'Viewport';\n//# sourceMappingURL=viewport.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, getProjectionParameters, altitudeToFovy, fovyToAltitude, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n\nfunction unitsPerMeter(latitude) {\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\n\nexport default class WebMercatorViewport extends Viewport {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 11,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      projectionMatrix,\n      repeat = false,\n      worldOffset = 0,\n      legacyMeterSizes = false\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    let fovy;\n    let projectionParameters = null;\n\n    if (projectionMatrix) {\n      altitude = projectionMatrix[5] / 2;\n      fovy = altitudeToFovy(altitude);\n    } else {\n      if (opts.fovy) {\n        fovy = opts.fovy;\n        altitude = fovyToAltitude(fovy);\n      } else {\n        fovy = altitudeToFovy(altitude);\n      }\n\n      projectionParameters = getProjectionParameters({\n        width,\n        height,\n        pitch,\n        fovy,\n        nearZMultiplier,\n        farZMultiplier\n      });\n    }\n\n    let viewMatrixUncentered = getViewMatrix({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      ...projectionParameters,\n      fovy,\n      focalDistance: altitude\n    });\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    this._pseudoMeters = legacyMeterSizes;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  projectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.projectPosition(xyz);\n    }\n\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * unitsPerMeter(xyz[1]);\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.unprojectPosition(xyz);\n    }\n\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) / unitsPerMeter(Y);\n    return [X, Y, Z];\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return addMetersToLngLat(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = getBounds(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\nWebMercatorViewport.displayName = 'WebMercatorViewport';\n//# sourceMappingURL=web-mercator-viewport.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const normalizedParams = { ...opts\n  };\n  let {\n    coordinateSystem\n  } = opts;\n  const {\n    viewport,\n    coordinateOrigin,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(layer, image) {\n  const gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new Texture2D(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...layer.props.textureParameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import { createTexture, destroyTexture } from '../utils/texture';\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component ? component.props : {};\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      return createTexture(component, value);\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  const len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT,\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nexport function createProps() {\n  const component = this;\n  const propsPrototype = getPropsPrototype(component.constructor);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (let i = 0; i < arguments.length; ++i) {\n    const props = arguments[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  const defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  const propTypes = { ...parentClass._propTypes,\n    ...componentPropDefs.propTypes\n  };\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  const deprecatedProps = { ...parentClass._deprecatedProps,\n    ...componentPropDefs.deprecatedProps\n  };\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  const defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  const id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          const value = this[ASYNC_RESOLVED][name];\n          return value || this[ASYNC_DEFAULTS][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          const state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n  constructor(component = null) {\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component.props;\n  }\n\n  freezeAsyncOldProps() {\n    if (!this.oldAsyncProps) {\n      this.oldProps = this.oldProps || this.component.props;\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    const resolvedValues = props[ASYNC_RESOLVED] || {};\n    const originalValues = props[ASYNC_ORIGINAL] || props;\n    const defaultValues = props[ASYNC_DEFAULTS] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === 'string') {\n      var _this$layer;\n\n      const fetch = (_this$layer = this.layer) === null || _this$layer === void 0 ? void 0 : _this$layer.props.fetch;\n      const url = value;\n\n      if (fetch) {\n        value = fetch(url, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if (isAsyncIterable(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    this.freezeAsyncOldProps();\n    const asyncProp = this.asyncProps[propName];\n    value = this._postProcessValue(asyncProp, value);\n    asyncProp.resolvedValue = value;\n    asyncProp.pendingLoadCount++;\n    asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this.freezeAsyncOldProps();\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    promise.then(data => {\n      var _this$layer2;\n\n      data = this._postProcessValue(asyncProp, data);\n\n      this._setAsyncPropValue(propName, data, loadCount);\n\n      const onDataLoad = (_this$layer2 = this.layer) === null || _this$layer2 === void 0 ? void 0 : _this$layer2.props.onDataLoad;\n\n      if (propName === 'data' && onDataLoad) {\n        onDataLoad(data, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }).catch(error => {\n      var _this$layer3;\n\n      (_this$layer3 = this.layer) === null || _this$layer3 === void 0 ? void 0 : _this$layer3.raiseError(error, \"loading \".concat(propName, \" of \").concat(this.layer));\n    });\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    var _this$layer4;\n\n    if (propName !== 'data') {\n      this._setPropValue(propName, iterable);\n    }\n\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      const {\n        dataTransform\n      } = this.component ? this.component.props : {};\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, '__diff', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    const onDataLoad = (_this$layer4 = this.layer) === null || _this$layer4 === void 0 ? void 0 : _this$layer4.props.onDataLoad;\n\n    if (onDataLoad) {\n      onDataLoad(data, {\n        propName,\n        layer: this.layer\n      });\n    }\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.constructor._propTypes;\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map","import { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nimport ComponentState from './component-state';\nconst defaultProps = {};\nlet counter = 0;\nexport default class Component {\n  constructor() {\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  get root() {\n    let component = this;\n\n    while (component.parent) {\n      component = component.parent;\n    }\n\n    return component;\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[ASYNC_DEFAULTS]) {\n      if (key in props[ASYNC_RESOLVED]) {\n        asyncProps[key] = props[ASYNC_RESOLVED][key];\n      } else if (key in props[ASYNC_ORIGINAL]) {\n        asyncProps[key] = props[ASYNC_ORIGINAL][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n  get stats() {\n    return this.internalState.stats;\n  }\n\n  _initState() {\n    this.internalState = new ComponentState({});\n  }\n\n}\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;\n//# sourceMappingURL=component.js.map","import ComponentState from '../lifecycle/component-state';\nexport default class LayerState extends ComponentState {\n  constructor({\n    attributeManager,\n    layer\n  }) {\n    super(layer);\n    this.attributeManager = attributeManager;\n    this.model = null;\n    this.needsRedraw = true;\n    this.subLayers = null;\n    this.usesPickingColorCache = false;\n  }\n\n  get layer() {\n    return this.component;\n  }\n\n  set layer(layer) {\n    this.component = layer;\n  }\n\n}\n//# sourceMappingURL=layer-state.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  var _loader2, _loader3;\n\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if ((_loader2 = loader) !== null && _loader2 !== void 0 && _loader2.parseTextSync || (_loader3 = loader) !== null && _loader3 !== void 0 && _loader3.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = \"\".concat(response.status, \" \").concat(response.statusText);\n    message = message.length > 60 ? \"\".concat(message.slice(60), \"...\") : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += \" \".concat(await response.text());\n    }\n\n    message += text;\n    message = message.length > 60 ? \"\".concat(message.slice(60), \"...\") : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return \"data:,\".concat(resource.slice(0, INITIAL_DATA_LENGTH));\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return \"data:base64,\".concat(base64);\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Log } from 'probe.gl';\nexport const probeLog = new Log({\n  id: 'loaders.gl'\n});\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n\n  info() {\n    return () => {};\n  }\n\n  warn() {\n    return () => {};\n  }\n\n  error() {\n    return () => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { ConsoleLog } from './loggers';\nexport const DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  _workerType: '',\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false,\n  transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n//# sourceMappingURL=option-defaults.js.map","import { global } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { probeLog, NullLog } from './loggers';\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from './option-defaults';\nexport function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  const {\n    loaders\n  } = global;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context !== null && context !== void 0 && context.fetch) {\n    return context === null || context === void 0 ? void 0 : context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders) {\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.deprecatedOptions && loader.deprecatedOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? \"\".concat(id, \".\") : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      if (key in deprecatedOptions) {\n        probeLog.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' no longer supported, use '\").concat(deprecatedOptions[key], \"'\"))();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' not recognized. \").concat(suggestion))();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const DEFAULT_VERSION = 'beta';\nexport const VERSION = typeof \"3.0.13\" !== 'undefined' ? \"3.0.13\" : DEFAULT_VERSION;\n\nif (typeof \"3.0.13\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}\");\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += \"worker \".concat(this.name, \". \");\n\n    if (event.message) {\n      message += \"\".concat(event.message, \" in \");\n    }\n\n    if (event.lineno) {\n      message += \":\".concat(event.lineno, \":\").concat(event.colno);\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", void 0);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", void 0);\n\n    _defineProperty(this, \"_reject\", void 0);\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n\n    this._resolve = () => {};\n\n    this._reject = () => {};\n\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'latest';\nconst VERSION = typeof \"3.0.13\" !== 'undefined' ? \"3.0.13\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? \" (worker-utils@\".concat(VERSION, \")\") : '';\n  return \"\".concat(worker.name, \"@\").concat(worker.version).concat(warning);\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = \"\".concat(worker.id, \"-worker.js\");\n  let url = workerOptions.workerUrl;\n\n  if (!url && worker.id === 'compression') {\n    url = options.workerUrl;\n  }\n\n  if (options._workerType === 'test') {\n    url = \"modules/\".concat(worker.module, \"/dist/\").concat(workerFile);\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? \"@\".concat(version) : '';\n    url = \"https://unpkg.com/@loaders.gl/\".concat(worker.module).concat(versionTag, \"/dist/\").concat(workerFile);\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","import { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(payload.error);\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(\"parse-with-worker unknown message \".concat(type));\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import * as node from '../node/buffer';\nexport function isBuffer(value) {\n  return value && typeof value === 'object' && value.isBuffer;\n}\nexport function toBuffer(data) {\n  return node.toBuffer ? node.toBuffer(data) : data;\n}\nexport function bufferToArrayBuffer(data) {\n  if (node.toArrayBuffer) {\n    return node.toArrayBuffer(data);\n  }\n\n  return data;\n}\n//# sourceMappingURL=buffer-utils.js.map","import * as node from './buffer-utils';\nexport function toArrayBuffer(data) {\n  if (node.isBuffer(data)) {\n    data = node.bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n      return data.buffer;\n    }\n\n    return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=make-string-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-array-buffer-iterator.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n    offset = end;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-blob-iterator.js.map","import { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream, options) {\n  return isBrowser ? makeBrowserStreamIterator(stream, options) : makeNodeStreamIterator(stream, options);\n}\n\nasync function* makeBrowserStreamIterator(stream, options) {\n  const reader = stream.getReader();\n  let nextBatchPromise;\n\n  try {\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n\n      if (options !== null && options !== void 0 && options._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n\n      const {\n        done,\n        value\n      } = await currentBatchPromise;\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream, options) {\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk);\n  }\n}\n//# sourceMappingURL=make-stream-iterator.js.map","import { makeStringIterator } from './make-string-iterator';\nimport { makeArrayBufferIterator } from './make-array-buffer-iterator';\nimport { makeBlobIterator } from './make-blob-iterator';\nimport { makeStreamIterator } from './make-stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data, options);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body, options);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterators/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader, options);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    const body = await response.body;\n    return makeIterator(body, options);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data, options);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIterableFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\nexport function getLoadersFromContext(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=loader-context.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","import { compareArrayBuffers } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await data.slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  let candidateLoaders = [];\n\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  normalizeLoaders(candidateLoaders);\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction selectLoaderInternal(data, loaders, options, context) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = null;\n\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  return loader;\n}\n\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found';\n\n  if (data) {\n    message += \" data: \\\"\".concat(getFirstCharacters(data), \"\\\", contentType: \\\"\").concat(type, \"\\\"\");\n  }\n\n  if (url) {\n    message += \" url: \".concat(url);\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === \"application/x.\".concat(loader.id)) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaderContext, getLoadersFromContext } from '../loader-utils/loader-context';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const typedLoaders = loaders;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(\"\".concat(loader.id, \" loader - no parser found and worker is disabled\"));\n}\n//# sourceMappingURL=parse.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","import { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps, validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\nconst areViewportsEqual = memoize(({\n  oldViewport,\n  viewport\n}) => {\n  return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: data => data && data.__diff,\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onError: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: (url, {\n      propName,\n      layer,\n      loaders,\n      loadOptions,\n      signal\n    }) => {\n      const {\n        resourceManager\n      } = layer.context;\n      loadOptions = loadOptions || layer.getLoadOptions();\n      loaders = loaders || layer.props.loaders;\n\n      if (signal) {\n        var _loadOptions;\n\n        loadOptions = { ...loadOptions,\n          fetch: { ...((_loadOptions = loadOptions) === null || _loadOptions === void 0 ? void 0 : _loadOptions.fetch),\n            signal\n          }\n        };\n      }\n\n      let inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: data => layer.internalState.reloadAsyncProp(propName, data),\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: ({\n      layerIndex\n    }) => [0, -layerIndex * 100],\n    compare: false\n  },\n  highlightedObjectIndex: -1,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\nexport default class Layer extends Component {\n  toString() {\n    const className = this.constructor.layerName || this.constructor.name;\n    return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n  }\n\n  raiseError(error, message) {\n    var _this$props$onError, _this$props;\n\n    if (message) {\n      error.message = \"\".concat(message, \": \").concat(error.message);\n    }\n\n    if (!((_this$props$onError = (_this$props = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props, error))) {\n      var _this$context, _this$context$onError;\n\n      (_this$context = this.context) === null || _this$context === void 0 ? void 0 : (_this$context$onError = _this$context.onError) === null || _this$context$onError === void 0 ? void 0 : _this$context$onError.call(_this$context, error, this);\n    }\n  }\n\n  setState(updateObject) {\n    this.setChangeFlags({\n      stateChanged: true\n    });\n    Object.assign(this.state, updateObject);\n    this.setNeedsRedraw();\n  }\n\n  setNeedsRedraw(redraw = true) {\n    if (this.internalState) {\n      this.internalState.needsRedraw = redraw;\n    }\n  }\n\n  setNeedsUpdate() {\n    this.context.layerManager.setNeedsUpdate(String(this));\n    this.internalState.needsUpdate = true;\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    return this._getNeedsRedraw(opts);\n  }\n\n  needsUpdate() {\n    return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n  }\n\n  hasUniformTransition() {\n    return this.internalState.uniformTransitions.active;\n  }\n\n  get isLoaded() {\n    return this.internalState && !this.internalState.isAsyncPropLoading();\n  }\n\n  get wrapLongitude() {\n    return this.props.wrapLongitude;\n  }\n\n  isPickable() {\n    return this.props.pickable && this.props.visible;\n  }\n\n  getModels() {\n    return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n  }\n\n  getAttributeManager() {\n    return this.internalState && this.internalState.attributeManager;\n  }\n\n  getCurrentLayer() {\n    return this.internalState && this.internalState.layer;\n  }\n\n  getLoadOptions() {\n    return this.props.loadOptions;\n  }\n\n  project(xyz) {\n    const {\n      viewport\n    } = this.context;\n    const worldPosition = getWorldPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n    const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n    return xyz.length === 2 ? [x, y] : [x, y, z];\n  }\n\n  unproject(xy) {\n    const {\n      viewport\n    } = this.context;\n    return viewport.unproject(xy);\n  }\n\n  projectPosition(xyz) {\n    return projectPosition(xyz, {\n      viewport: this.context.viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n  }\n\n  use64bitPositions() {\n    const {\n      coordinateSystem\n    } = this.props;\n    return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  onHover(info, pickingEvent) {\n    if (this.props.onHover) {\n      return this.props.onHover(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  onClick(info, pickingEvent) {\n    if (this.props.onClick) {\n      return this.props.onClick(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  nullPickingColor() {\n    return [0, 0, 0];\n  }\n\n  encodePickingColor(i, target = []) {\n    target[0] = i + 1 & 255;\n    target[1] = i + 1 >> 8 & 255;\n    target[2] = i + 1 >> 8 >> 8 & 255;\n    return target;\n  }\n\n  decodePickingColor(color) {\n    assert(color instanceof Uint8Array);\n    const [i1, i2, i3] = color;\n    const index = i1 + i2 * 256 + i3 * 65536 - 1;\n    return index;\n  }\n\n  initializeState() {\n    throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n  }\n\n  getShaders(shaders) {\n    for (const extension of this.props.extensions) {\n      shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n    }\n\n    return shaders;\n  }\n\n  shouldUpdateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    return changeFlags.propsOrDataChanged;\n  }\n\n  updateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    const attributeManager = this.getAttributeManager();\n\n    if (changeFlags.dataChanged && attributeManager) {\n      const {\n        dataChanged\n      } = changeFlags;\n\n      if (Array.isArray(dataChanged)) {\n        for (const dataRange of dataChanged) {\n          attributeManager.invalidateAll(dataRange);\n        }\n      } else {\n        attributeManager.invalidateAll();\n      }\n    }\n\n    const neededPickingBuffer = oldProps.highlightedObjectIndex >= 0 || oldProps.pickable;\n    const needPickingBuffer = props.highlightedObjectIndex >= 0 || props.pickable;\n\n    if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n      const {\n        pickingColors,\n        instancePickingColors\n      } = attributeManager.attributes;\n      const pickingColorsAttribute = pickingColors || instancePickingColors;\n\n      if (pickingColorsAttribute) {\n        if (needPickingBuffer && pickingColorsAttribute.constant) {\n          pickingColorsAttribute.constant = false;\n          attributeManager.invalidate(pickingColorsAttribute.id);\n        }\n\n        if (!pickingColorsAttribute.value && !needPickingBuffer) {\n          pickingColorsAttribute.constant = true;\n          pickingColorsAttribute.value = [0, 0, 0];\n        }\n      }\n    }\n  }\n\n  finalizeState() {\n    for (const model of this.getModels()) {\n      model.delete();\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.finalize();\n    }\n\n    this.context.resourceManager.unsubscribe({\n      consumerId: this.id\n    });\n    this.internalState.uniformTransitions.clear();\n    this.internalState.finalize();\n  }\n\n  draw(opts) {\n    for (const model of this.getModels()) {\n      model.draw(opts);\n    }\n  }\n\n  getPickingInfo({\n    info,\n    mode\n  }) {\n    const {\n      index\n    } = info;\n\n    if (index >= 0) {\n      if (Array.isArray(this.props.data)) {\n        info.object = this.props.data[index];\n      }\n    }\n\n    return info;\n  }\n\n  activateViewport(viewport) {\n    const oldViewport = this.internalState.viewport;\n    this.internalState.viewport = viewport;\n\n    if (!oldViewport || !areViewportsEqual({\n      oldViewport,\n      viewport\n    })) {\n      this.setChangeFlags({\n        viewportChanged: true\n      });\n\n      if (this.isComposite) {\n        if (this.needsUpdate()) {\n          this.setNeedsUpdate();\n        }\n      } else {\n        this._update();\n      }\n    }\n  }\n\n  invalidateAttribute(name = 'all', diffReason = '') {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    if (name === 'all') {\n      attributeManager.invalidateAll();\n    } else {\n      attributeManager.invalidate(name);\n    }\n  }\n\n  updateAttributes(changedAttributes) {\n    for (const model of this.getModels()) {\n      this._setModelAttributes(model, changedAttributes);\n    }\n  }\n\n  _updateAttributes(props) {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    const numInstances = this.getNumInstances(props);\n    const startIndices = this.getStartIndices(props);\n    attributeManager.update({\n      data: props.data,\n      numInstances,\n      startIndices,\n      props,\n      transitions: props.transitions,\n      buffers: props.data.attributes,\n      context: this,\n      ignoreUnknownAttributes: true\n    });\n    const changedAttributes = attributeManager.getChangedAttributes({\n      clearChangedFlags: true\n    });\n    this.updateAttributes(changedAttributes);\n  }\n\n  _updateAttributeTransition() {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.updateTransition();\n    }\n  }\n\n  _updateUniformTransition() {\n    const {\n      uniformTransitions\n    } = this.internalState;\n\n    if (uniformTransitions.active) {\n      const propsInTransition = uniformTransitions.update();\n      const props = Object.create(this.props);\n\n      for (const key in propsInTransition) {\n        Object.defineProperty(props, key, {\n          value: propsInTransition[key]\n        });\n      }\n\n      return props;\n    }\n\n    return this.props;\n  }\n\n  calculateInstancePickingColors(attribute, {\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const cacheSize = Math.floor(pickingColorCache.length / 3);\n    this.internalState.usesPickingColorCache = true;\n\n    if (cacheSize < numInstances) {\n      if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n        log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n      }\n\n      pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n        size: 3,\n        copy: true,\n        maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n      });\n      const newCacheSize = Math.floor(pickingColorCache.length / 3);\n      const pickingColor = [];\n\n      for (let i = cacheSize; i < newCacheSize; i++) {\n        this.encodePickingColor(i, pickingColor);\n        pickingColorCache[i * 3 + 0] = pickingColor[0];\n        pickingColorCache[i * 3 + 1] = pickingColor[1];\n        pickingColorCache[i * 3 + 2] = pickingColor[2];\n      }\n    }\n\n    attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n  }\n\n  _setModelAttributes(model, changedAttributes) {\n    const attributeManager = this.getAttributeManager();\n    const excludeAttributes = model.userData.excludeAttributes || {};\n    const shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n    model.setAttributes(shaderAttributes);\n  }\n\n  disablePickingIndex(objectIndex) {\n    this._disablePickingIndex(objectIndex);\n  }\n\n  _disablePickingIndex(objectIndex) {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n    const start = colors.getVertexOffset(objectIndex);\n    const end = colors.getVertexOffset(objectIndex + 1);\n    colors.buffer.subData({\n      data: new Uint8Array(end - start),\n      offset: start\n    });\n  }\n\n  restorePickingColors() {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n      colors.value = pickingColorCache.subarray(0, colors.value.length);\n    }\n\n    colors.updateSubBuffer({\n      startOffset: 0\n    });\n  }\n\n  getNumInstances(props) {\n    props = props || this.props;\n\n    if (props.numInstances !== undefined) {\n      return props.numInstances;\n    }\n\n    if (this.state && this.state.numInstances !== undefined) {\n      return this.state.numInstances;\n    }\n\n    return count(props.data);\n  }\n\n  getStartIndices(props) {\n    props = props || this.props;\n\n    if (props.startIndices !== undefined) {\n      return props.startIndices;\n    }\n\n    if (this.state && this.state.startIndices) {\n      return this.state.startIndices;\n    }\n\n    return null;\n  }\n\n  _initialize() {\n    debug(TRACE_INITIALIZE, this);\n\n    this._initState();\n\n    this.initializeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.initializeState.call(this, this.context, extension);\n    }\n\n    this.setChangeFlags({\n      dataChanged: true,\n      propsChanged: true,\n      viewportChanged: true,\n      extensionsChanged: true\n    });\n\n    this._updateState();\n  }\n\n  _update() {\n    const stateNeedsUpdate = this.needsUpdate();\n    debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n    if (stateNeedsUpdate) {\n      this._updateState();\n    }\n  }\n\n  _updateState() {\n    const currentProps = this.props;\n    const currentViewport = this.context.viewport;\n\n    const propsInTransition = this._updateUniformTransition();\n\n    this.internalState.propsInTransition = propsInTransition;\n    this.context.viewport = this.internalState.viewport || currentViewport;\n    this.props = propsInTransition;\n\n    try {\n      const updateParams = this._getUpdateParams();\n\n      const oldModels = this.getModels();\n\n      if (this.context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      for (const extension of this.props.extensions) {\n        extension.updateState.call(this, updateParams, extension);\n      }\n\n      const modelChanged = this.getModels()[0] !== oldModels[0];\n\n      this._updateModules(updateParams, modelChanged);\n\n      if (this.isComposite) {\n        this._renderLayers(updateParams);\n      } else {\n        this.setNeedsRedraw();\n\n        this._updateAttributes(this.props);\n\n        if (this.state.model) {\n          this.state.model.setInstanceCount(this.getNumInstances());\n        }\n      }\n    } finally {\n      this.context.viewport = currentViewport;\n      this.props = currentProps;\n      this.clearChangeFlags();\n      this.internalState.needsUpdate = false;\n      this.internalState.resetOldProps();\n    }\n  }\n\n  _finalize() {\n    debug(TRACE_FINALIZE, this);\n    this.finalizeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.finalizeState.call(this, extension);\n    }\n  }\n\n  drawLayer({\n    moduleParameters = null,\n    uniforms = {},\n    parameters = {}\n  }) {\n    this._updateAttributeTransition();\n\n    const currentProps = this.props;\n    this.props = this.internalState.propsInTransition || currentProps;\n    const {\n      opacity\n    } = this.props;\n    uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n    try {\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      const {\n        getPolygonOffset\n      } = this.props;\n      const offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(this.context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(this.context.gl, parameters, () => {\n        const opts = {\n          moduleParameters,\n          uniforms,\n          parameters,\n          context: this.context\n        };\n\n        for (const extension of this.props.extensions) {\n          extension.draw.call(this, opts, extension);\n        }\n\n        this.draw(opts);\n      });\n    } finally {\n      this.props = currentProps;\n    }\n  }\n\n  getChangeFlags() {\n    return this.internalState.changeFlags;\n  }\n\n  setChangeFlags(flags) {\n    const {\n      changeFlags\n    } = this.internalState;\n\n    for (const key in flags) {\n      if (flags[key]) {\n        let flagChanged = false;\n\n        switch (key) {\n          case 'dataChanged':\n            if (Array.isArray(changeFlags[key])) {\n              changeFlags[key] = Array.isArray(flags[key]) ? changeFlags[key].concat(flags[key]) : flags[key];\n              flagChanged = true;\n            }\n\n          default:\n            if (!changeFlags[key]) {\n              changeFlags[key] = flags[key];\n              flagChanged = true;\n            }\n\n        }\n\n        if (flagChanged) {\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n    }\n\n    const propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n    changeFlags.propsOrDataChanged = propsOrDataChanged;\n    changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n  }\n\n  clearChangeFlags() {\n    this.internalState.changeFlags = {\n      dataChanged: false,\n      propsChanged: false,\n      updateTriggersChanged: false,\n      viewportChanged: false,\n      stateChanged: false,\n      extensionsChanged: false,\n      propsOrDataChanged: false,\n      somethingChanged: false\n    };\n  }\n\n  diffProps(newProps, oldProps) {\n    const changeFlags = diffProps(newProps, oldProps);\n\n    if (changeFlags.updateTriggersChanged) {\n      for (const key in changeFlags.updateTriggersChanged) {\n        if (changeFlags.updateTriggersChanged[key]) {\n          this.invalidateAttribute(key);\n        }\n      }\n    }\n\n    if (changeFlags.transitionsChanged) {\n      for (const key in changeFlags.transitionsChanged) {\n        this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], newProps.transitions[key]);\n      }\n    }\n\n    return this.setChangeFlags(changeFlags);\n  }\n\n  validateProps() {\n    validateProps(this.props);\n  }\n\n  setModuleParameters(moduleParameters) {\n    for (const model of this.getModels()) {\n      model.updateModuleSettings(moduleParameters);\n    }\n  }\n\n  updateAutoHighlight(info) {\n    if (this.props.autoHighlight) {\n      this._updateAutoHighlight(info);\n    }\n  }\n\n  _updateAutoHighlight(info) {\n    const pickingModuleParameters = {\n      pickingSelectedColor: info.picked ? info.color : null\n    };\n    const {\n      highlightColor\n    } = this.props;\n\n    if (info.picked && typeof highlightColor === 'function') {\n      pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n    }\n\n    this.setModuleParameters(pickingModuleParameters);\n    this.setNeedsRedraw();\n  }\n\n  _updateModules({\n    props,\n    oldProps\n  }, forceUpdate) {\n    const {\n      autoHighlight,\n      highlightedObjectIndex,\n      highlightColor\n    } = props;\n\n    if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n      const parameters = {};\n\n      if (!autoHighlight) {\n        parameters.pickingSelectedColor = null;\n      }\n\n      if (Array.isArray(highlightColor)) {\n        parameters.pickingHighlightColor = highlightColor;\n      }\n\n      if (Number.isInteger(highlightedObjectIndex)) {\n        parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n      }\n\n      this.setModuleParameters(parameters);\n    }\n  }\n\n  _getUpdateParams() {\n    return {\n      props: this.props,\n      oldProps: this.internalState.getOldProps(),\n      context: this.context,\n      changeFlags: this.internalState.changeFlags\n    };\n  }\n\n  _getNeedsRedraw(opts) {\n    if (!this.internalState) {\n      return false;\n    }\n\n    let redraw = false;\n    redraw = redraw || this.internalState.needsRedraw && this.id;\n    this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n    const attributeManager = this.getAttributeManager();\n    const attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n    redraw = redraw || attributeManagerNeedsRedraw;\n    return redraw;\n  }\n\n  _getAttributeManager() {\n    return new AttributeManager(this.context.gl, {\n      id: this.props.id,\n      stats: this.context.stats,\n      timeline: this.context.timeline\n    });\n  }\n\n  _initState() {\n    assert(!this.internalState && !this.state);\n    assert(isFinite(this.props.coordinateSystem));\n\n    const attributeManager = this._getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.addInstanced({\n        instancePickingColors: {\n          type: 5121,\n          size: 3,\n          noAlloc: true,\n          update: this.calculateInstancePickingColors\n        }\n      });\n    }\n\n    this.internalState = new LayerState({\n      attributeManager,\n      layer: this\n    });\n    this.clearChangeFlags();\n    this.state = {};\n    Object.defineProperty(this.state, 'attributeManager', {\n      get: () => {\n        log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n        return attributeManager;\n      }\n    });\n    this.internalState.layer = this;\n    this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n    this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n    this.internalState.setAsyncProps(this.props);\n  }\n\n  _transferState(oldLayer) {\n    debug(TRACE_MATCHED, this, this === oldLayer);\n    const {\n      state,\n      internalState\n    } = oldLayer;\n\n    if (this === oldLayer) {\n      return;\n    }\n\n    this.internalState = internalState;\n    this.internalState.layer = this;\n    this.state = state;\n    this.internalState.setAsyncProps(this.props);\n    this.diffProps(this.props, this.internalState.getOldProps());\n  }\n\n  _onAsyncPropUpdated() {\n    this.diffProps(this.props, this.internalState.getOldProps());\n    this.setNeedsUpdate();\n  }\n\n}\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;\n//# sourceMappingURL=layer.js.map","const fp32shader = `\\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n`;\nexport const fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","const vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry = VertexGeometry(\\n  vec4(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec2(0.0),\\n  vec3(0.0)\\n);\\n\";\nconst fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs,\n  fs\n};\n//# sourceMappingURL=geometry.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE, UNIT } from '../../lib/constants';\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(key => \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\")).join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(key => \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\")).join('');\nconst UNIT_GLSL_CONSTANTS = Object.keys(UNIT).map(key => \"const int UNIT_\".concat(key.toUpperCase(), \" = \").concat(UNIT[key], \";\")).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\").concat(UNIT_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\nuniform vec3 project_uCommonOrigin;\\nuniform bool project_uPseudoMeters;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size() {\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\\n    project_uPseudoMeters == false) {\\n    \\n    if (geometry.position.w == 0.0) {\\n      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);\\n      return 1.0 / cos(radians(y));\\n    }\\n  \\n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\\n    float y2 = y * y;\\n    float y4 = y2 * y2;\\n    float y6 = y4 * y2;\\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\\n  }\\n  return 1.0;\\n}\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter * project_size();\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  ) * WORLD_SCALE;\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy),\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\\n        return vec4(\\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\\n          project_size(position_world.z),\\n          position_world.w\\n        );\\n      }\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_size_to_pixel(float size, int unit) {\\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\\n  if (unit == UNIT_COMMON) return size * project_uScale;\\n  return size;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","import { fp32 } from '@luma.gl/core';\nimport geometry from '../misc/geometry';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32, geometry],\n  vs: projectShader,\n  getUniforms\n};\n//# sourceMappingURL=project.js.map","import project from '../project/project';\nconst vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs\n};\n//# sourceMappingURL=project32.js.map","const DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nconst DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms(opts = DEFAULT_MODULE_OPTIONS) {\n  const uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      const selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    const color = Array.from(opts.pickingHighlightColor, x => x / 255);\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nconst vs = `\\\nuniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n`;\nconst fs = `\\\nuniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n`;\nexport const picking = {\n  name: 'picking',\n  vs,\n  fs,\n  getUniforms\n};\n//# sourceMappingURL=picking.js.map","import { picking } from '@luma.gl/core';\nexport default {\n  inject: {\n    'vs:DECKGL_FILTER_COLOR': \"\\n  picking_setPickingColor(geometry.pickingColor);\\n  // for picking depth values\\n  picking_setPickingAttribute(geometry.position.z);\\n  \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n  // use highlight color if this fragment belongs to the selected object.\\n  color = picking_filterHighlightColor(color);\\n\\n  // use picking color if rendering to picking FBO.\\n  color = picking_filterPickingColor(color);\\n    \"\n    }\n  },\n  ...picking\n};\n//# sourceMappingURL=picking.js.map","import { uid, assert } from '@luma.gl/webgl';\nexport const DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getAttributes() {\n    return this.indices ? {\n      indices: this.indices,\n      ...this.attributes\n    } : this.attributes;\n  }\n\n  _print(attributeName) {\n    return `Geometry ${this.id} attribute ${attributeName}`;\n  }\n\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {\n        value: indices,\n        size: 1\n      } : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n      attribute = ArrayBuffer.isView(attribute) ? {\n        value: attribute\n      } : attribute;\n      assert(ArrayBuffer.isView(attribute.value), `${this._print(attributeName)}: must be typed array or object with value as typed array`);\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n\n    let vertexCount = Infinity;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {\n        value,\n        size,\n        constant\n      } = attribute;\n\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n\n}\n//# sourceMappingURL=geometry.js.map","export default \"#define SHADER_NAME scatterplot-layer-vertex-shader\\n\\nattribute vec3 positions;\\n\\nattribute vec3 instancePositions;\\nattribute vec3 instancePositions64Low;\\nattribute float instanceRadius;\\nattribute float instanceLineWidths;\\nattribute vec4 instanceFillColors;\\nattribute vec4 instanceLineColors;\\nattribute vec3 instancePickingColors;\\n\\nuniform float opacity;\\nuniform float radiusScale;\\nuniform float radiusMinPixels;\\nuniform float radiusMaxPixels;\\nuniform float lineWidthScale;\\nuniform float lineWidthMinPixels;\\nuniform float lineWidthMaxPixels;\\nuniform float stroked;\\nuniform bool filled;\\nuniform bool billboard;\\nuniform int radiusUnits;\\nuniform int lineWidthUnits;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying vec2 unitPosition;\\nvarying float innerUnitRadius;\\nvarying float outerRadiusPixels;\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  outerRadiusPixels = clamp(\\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\\n    radiusMinPixels, radiusMaxPixels\\n  );\\n  float lineWidthPixels = clamp(\\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\\n    lineWidthMinPixels, lineWidthMaxPixels\\n  );\\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\\n  unitPosition = positions.xy;\\n  geometry.uv = unitPosition;\\n  geometry.pickingColor = instancePickingColors;\\n\\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\\n  \\n  if (billboard) {\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\\n    vec3 offset = positions * outerRadiusPixels;\\n    DECKGL_FILTER_SIZE(offset, geometry);\\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\\n  } else {\\n    vec3 offset = positions * project_pixel_size(outerRadiusPixels);\\n    DECKGL_FILTER_SIZE(offset, geometry);\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\\n  }\\n\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\\n}\\n\";\n//# sourceMappingURL=scatterplot-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME scatterplot-layer-fragment-shader\\n\\nprecision highp float;\\n\\nuniform bool filled;\\nuniform float stroked;\\nuniform bool antialiasing;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying vec2 unitPosition;\\nvarying float innerUnitRadius;\\nvarying float outerRadiusPixels;\\n\\nvoid main(void) {\\n  geometry.uv = unitPosition;\\n\\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\\n  float inCircle = antialiasing ? \\n    smoothedge(distToCenter, outerRadiusPixels) : \\n    step(distToCenter, outerRadiusPixels);\\n\\n  if (inCircle == 0.0) {\\n    discard;\\n  }\\n\\n  if (stroked > 0.5) {\\n    float isLine = antialiasing ? \\n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\\n\\n    if (filled) {\\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\\n    } else {\\n      if (isLine == 0.0) {\\n        discard;\\n      }\\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\\n    }\\n  } else if (filled) {\\n    gl_FragColor = vFillColor;\\n  } else {\\n    discard;\\n  }\\n\\n  gl_FragColor.a *= inCircle;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=scatterplot-layer-fragment.glsl.js.map","import { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './scatterplot-layer-vertex.glsl';\nimport fs from './scatterplot-layer-fragment.glsl';\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n  radiusUnits: 'meters',\n  radiusScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  radiusMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  radiusMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  lineWidthUnits: 'meters',\n  lineWidthScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  lineWidthMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  lineWidthMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  stroked: false,\n  filled: true,\n  billboard: false,\n  antialiasing: true,\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  getRadius: {\n    type: 'accessor',\n    value: 1\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  strokeWidth: {\n    deprecatedFor: 'getLineWidth'\n  },\n  outline: {\n    deprecatedFor: 'stroked'\n  },\n  getColor: {\n    deprecatedFor: ['getFillColor', 'getLineColor']\n  }\n};\nexport default class ScatterplotLayer extends Layer {\n  getShaders() {\n    return super.getShaders({\n      vs,\n      fs,\n      modules: [project32, picking]\n    });\n  }\n\n  initializeState() {\n    this.getAttributeManager().addInstanced({\n      instancePositions: {\n        size: 3,\n        type: 5130,\n        fp64: this.use64bitPositions(),\n        transition: true,\n        accessor: 'getPosition'\n      },\n      instanceRadius: {\n        size: 1,\n        transition: true,\n        accessor: 'getRadius',\n        defaultValue: 1\n      },\n      instanceFillColors: {\n        size: this.props.colorFormat.length,\n        transition: true,\n        normalized: true,\n        type: 5121,\n        accessor: 'getFillColor',\n        defaultValue: [0, 0, 0, 255]\n      },\n      instanceLineColors: {\n        size: this.props.colorFormat.length,\n        transition: true,\n        normalized: true,\n        type: 5121,\n        accessor: 'getLineColor',\n        defaultValue: [0, 0, 0, 255]\n      },\n      instanceLineWidths: {\n        size: 1,\n        transition: true,\n        accessor: 'getLineWidth',\n        defaultValue: 1\n      }\n    });\n  }\n\n  updateState({\n    props,\n    oldProps,\n    changeFlags\n  }) {\n    super.updateState({\n      props,\n      oldProps,\n      changeFlags\n    });\n\n    if (changeFlags.extensionsChanged) {\n      var _this$state$model;\n\n      const {\n        gl\n      } = this.context;\n      (_this$state$model = this.state.model) === null || _this$state$model === void 0 ? void 0 : _this$state$model.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  draw({\n    uniforms\n  }) {\n    const {\n      radiusUnits,\n      radiusScale,\n      radiusMinPixels,\n      radiusMaxPixels,\n      stroked,\n      filled,\n      billboard,\n      antialiasing,\n      lineWidthUnits,\n      lineWidthScale,\n      lineWidthMinPixels,\n      lineWidthMaxPixels\n    } = this.props;\n    this.state.model.setUniforms(uniforms).setUniforms({\n      stroked: stroked ? 1 : 0,\n      filled,\n      billboard,\n      antialiasing,\n      radiusUnits: UNIT[radiusUnits],\n      radiusScale,\n      radiusMinPixels,\n      radiusMaxPixels,\n      lineWidthUnits: UNIT[lineWidthUnits],\n      lineWidthScale,\n      lineWidthMinPixels,\n      lineWidthMaxPixels\n    }).draw();\n  }\n\n  _getModel(gl) {\n    const positions = [-1, -1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0];\n    return new Model(gl, { ...this.getShaders(),\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: 6,\n        vertexCount: 4,\n        attributes: {\n          positions: {\n            size: 3,\n            value: new Float32Array(positions)\n          }\n        }\n      }),\n      isInstanced: true\n    });\n  }\n\n}\nScatterplotLayer.layerName = 'ScatterplotLayer';\nScatterplotLayer.defaultProps = defaultProps;\n//# sourceMappingURL=scatterplot-layer.js.map","let channelHandles = 1;\nlet animationHandles = 1;\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {\n      delay = 0,\n      duration = Number.POSITIVE_INFINITY,\n      rate = 1,\n      repeat = 1\n    } = props;\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n\n    this._setChannelTime(channel, this.time);\n\n    this.channels.set(handle, channel);\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n    const channels = this.channels.values();\n\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n\n    for (const animationData of animations) {\n      const {\n        animation,\n        channel\n      } = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n    animation.setTime(this.getTime(channelHandle));\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n\n}\n//# sourceMappingURL=timeline.js.map","import { load } from '@loaders.gl/core';\nexport default class Resource {\n  constructor(id, data, context) {\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === 'string') {\n      loader = load(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = null;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = null;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import Resource from './resource';\nexport default class ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n\n        if (request.resource) {\n          request.resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n\n    if (request.resource) {\n      request.resource.unsubscribe(request);\n      request.resource = null;\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resource = resource;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nconst DEFAULT_MODULES = [project];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  const programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","import { Timeline } from '@luma.gl/core';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nconst TRACE_SET_LAYERS = 'layerManager.setLayers';\nconst TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nconst INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  resourceManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\nexport default class LayerManager {\n  constructor(gl, {\n    deck,\n    stats,\n    viewport,\n    timeline\n  } = {}) {\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl,\n      protocol: 'deck://'\n    });\n    this.context = { ...INITIAL_CONTEXT,\n      layerManager: this,\n      gl,\n      deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager\n    };\n    this._nextLayers = null;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  finalize() {\n    this.resourceManager.finalize();\n\n    for (const layer of this.layers) {\n      this._finalizeLayer(layer);\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    for (const layer of this.layers) {\n      const layerNeedsRedraw = layer.getNeedsRedraw(opts);\n      redraw = redraw || layerNeedsRedraw;\n    }\n\n    return redraw;\n  }\n\n  needsUpdate() {\n    if (this._nextLayers && this._nextLayers !== this.lastRenderedLayers) {\n      return 'layers changed';\n    }\n\n    return this._needsUpdate;\n  }\n\n  setNeedsRedraw(reason) {\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n  }\n\n  getLayers({\n    layerIds = null\n  } = {}) {\n    return layerIds ? this.layers.filter(layer => layerIds.find(layerId => layer.id.indexOf(layerId) === 0)) : this.layers;\n  }\n\n  setProps(props) {\n    if ('debug' in props) {\n      this._debug = props.debug;\n    }\n\n    if ('userData' in props) {\n      this.context.userData = props.userData;\n    }\n\n    if ('layers' in props) {\n      this._nextLayers = props.layers;\n    }\n\n    if ('onError' in props) {\n      this.context.onError = props.onError;\n    }\n  }\n\n  setLayers(newLayers, reason) {\n    debug(TRACE_SET_LAYERS, this, reason, newLayers);\n    this.lastRenderedLayers = newLayers;\n    newLayers = flatten(newLayers, Boolean);\n\n    for (const layer of newLayers) {\n      layer.context = this.context;\n    }\n\n    this._updateLayers(this.layers, newLayers);\n\n    return this;\n  }\n\n  updateLayers() {\n    const reason = this.needsUpdate();\n\n    if (reason) {\n      this.setNeedsRedraw(\"updating layers: \".concat(reason));\n      this.setLayers(this._nextLayers || this.lastRenderedLayers, reason);\n    }\n\n    this._nextLayers = null;\n  }\n\n  activateViewport(viewport) {\n    debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n    if (viewport) {\n      this.context.viewport = viewport;\n    }\n\n    return this;\n  }\n\n  _handleError(stage, error, layer) {\n    layer.raiseError(error, \"\".concat(stage, \" of \").concat(layer));\n  }\n\n  _updateLayers(oldLayers, newLayers) {\n    const oldLayerMap = {};\n\n    for (const oldLayer of oldLayers) {\n      if (oldLayerMap[oldLayer.id]) {\n        log.warn(\"Multiple old layers with same id \".concat(oldLayer.id))();\n      } else {\n        oldLayerMap[oldLayer.id] = oldLayer;\n      }\n    }\n\n    const generatedLayers = [];\n\n    this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n    this._finalizeOldLayers(oldLayerMap);\n\n    let needsUpdate = false;\n\n    for (const layer of generatedLayers) {\n      if (layer.hasUniformTransition()) {\n        needsUpdate = true;\n        break;\n      }\n    }\n\n    this._needsUpdate = needsUpdate;\n    this.layers = generatedLayers;\n  }\n\n  _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n    for (const newLayer of newLayers) {\n      newLayer.context = this.context;\n      const oldLayer = oldLayerMap[newLayer.id];\n\n      if (oldLayer === null) {\n        log.warn(\"Multiple new layers with same id \".concat(newLayer.id))();\n      }\n\n      oldLayerMap[newLayer.id] = null;\n      let sublayers = null;\n\n      try {\n        if (this._debug && oldLayer !== newLayer) {\n          newLayer.validateProps();\n        }\n\n        if (!oldLayer) {\n          this._initializeLayer(newLayer);\n        } else {\n          this._transferLayerState(oldLayer, newLayer);\n\n          this._updateLayer(newLayer);\n        }\n\n        generatedLayers.push(newLayer);\n        sublayers = newLayer.isComposite && newLayer.getSubLayers();\n      } catch (err) {\n        this._handleError('matching', err, newLayer);\n      }\n\n      if (sublayers) {\n        this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n      }\n    }\n  }\n\n  _finalizeOldLayers(oldLayerMap) {\n    for (const layerId in oldLayerMap) {\n      const layer = oldLayerMap[layerId];\n\n      if (layer) {\n        this._finalizeLayer(layer);\n      }\n    }\n  }\n\n  _initializeLayer(layer) {\n    try {\n      layer._initialize();\n\n      layer.lifecycle = LIFECYCLE.INITIALIZED;\n    } catch (err) {\n      this._handleError('initialization', err, layer);\n    }\n  }\n\n  _transferLayerState(oldLayer, newLayer) {\n    newLayer._transferState(oldLayer);\n\n    newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n    if (newLayer !== oldLayer) {\n      oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n    }\n  }\n\n  _updateLayer(layer) {\n    try {\n      layer._update();\n    } catch (err) {\n      this._handleError('update', err, layer);\n    }\n  }\n\n  _finalizeLayer(layer) {\n    this._needsRedraw = this._needsRedraw || \"finalized \".concat(layer);\n    layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n    try {\n      layer._finalize();\n\n      layer.lifecycle = LIFECYCLE.FINALIZED;\n    } catch (err) {\n      this._handleError('finalization', err, layer);\n    }\n  }\n\n}\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (const key in a) {\n    const aValue = a[key];\n    const bValue = b[key];\n    const equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\nexport default class ViewManager {\n  constructor(props = {}) {\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      if (this.controllers[key]) {\n        this.controllers[key].finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewOrViewId) {\n    return typeof viewOrViewId === 'string' ? this.views.find(view => view.id === viewOrViewId) : viewOrViewId;\n  }\n\n  getViewState(viewId) {\n    const view = this.getView(viewId);\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if ('views' in props) {\n      this._setViews(props.views);\n    }\n\n    if ('viewState' in props) {\n      this._setViewState(props.viewState);\n    }\n\n    if ('width' in props || 'height' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate('Size changed');\n    }\n  }\n\n  _setViews(views) {\n    views = flatten(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate('views changed');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !deepEqual(viewState, this.viewState);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate('viewState changed');\n      }\n\n      this.viewState = viewState;\n    } else {\n      log.warn('missing `viewState` or `initialViewState`')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    event.viewId = viewId;\n\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => view._getViewport(viewState, {\n        width: viewState.width,\n        height: viewState.height\n      }),\n      ...props\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    let controllerProps = view.controller;\n\n    if (controllerProps) {\n      controllerProps = { ...viewState,\n        ...view.props,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (controller) {\n        controller.setProps(controllerProps);\n      } else {\n        controller = this._createController(view, controllerProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      width,\n      height,\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        width,\n        height,\n        viewState\n      });\n      let oldController = oldControllers[view.id];\n\n      if (view.controller && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !view.controller) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      if (oldControllers[id] && !this.controllers[id]) {\n        oldControllers[id].finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map","const PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","import Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\nexport default class View {\n  constructor(props = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      viewportInstance,\n      type = Viewport\n    } = props;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = { ...props,\n      id: this.id\n    };\n\n    this._parseDimensions({\n      x,\n      y,\n      width,\n      height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n    }\n\n    const viewChanged = deepEqual(this.props, view.props);\n    return viewChanged;\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return this._getViewport(viewState, viewportDimensions);\n  }\n\n  getViewStateId() {\n    switch (typeof this.props.viewState) {\n      case 'string':\n        return this.props.viewState;\n\n      case 'object':\n        return this.props.viewState && this.props.viewState.id;\n\n      default:\n        return this.id;\n    }\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    return {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n  }\n\n  _getControllerProps(defaultOpts) {\n    let opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return defaultOpts;\n    }\n\n    if (typeof opts === 'function') {\n      opts = {\n        type: opts\n      };\n    }\n\n    return { ...defaultOpts,\n      ...opts\n    };\n  }\n\n  _getViewport(viewState, viewportDimensions) {\n    const {\n      type: ViewportType\n    } = this;\n    return new ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  _parseDimensions({\n    x,\n    y,\n    width,\n    height\n  }) {\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n  }\n\n}\n//# sourceMappingURL=view.js.map","import Transition from '../transitions/transition';\n\nconst noop = () => {};\n\nexport const TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nconst DEFAULT_PROPS = {\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\nexport default class TransitionManager {\n  constructor(ControllerState, props = {}) {\n    this.ControllerState = ControllerState;\n    this.props = { ...DEFAULT_PROPS,\n      ...props\n    };\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange || noop;\n    this.onStateChange = props.onStateChange || noop;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  finalize() {\n    this.transition.cancel();\n  }\n\n  getViewportInTransition() {\n    return this.propsInTransition;\n  }\n\n  processViewStateChange(nextProps) {\n    let transitionTriggered = false;\n    const currentProps = this.props;\n    nextProps = { ...DEFAULT_PROPS,\n      ...nextProps\n    };\n    this.props = nextProps;\n\n    if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n      return transitionTriggered;\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      const {\n        interruption,\n        endProps\n      } = this.transition.settings;\n      const startProps = { ...currentProps,\n        ...(interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps)\n      };\n\n      this._triggerTransition(startProps, nextProps);\n\n      transitionTriggered = true;\n    } else {\n      this.transition.cancel();\n    }\n\n    return transitionTriggered;\n  }\n\n  updateTransition() {\n    this.transition.update();\n  }\n\n  _isTransitionEnabled(props) {\n    const {\n      transitionDuration,\n      transitionInterpolator\n    } = props;\n    return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n  }\n\n  _isUpdateDueToCurrentTransition(props) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n    }\n\n    return false;\n  }\n\n  _shouldIgnoreViewportChange(currentProps, nextProps) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n    } else if (this._isTransitionEnabled(nextProps)) {\n      return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n    }\n\n    return true;\n  }\n\n  _triggerTransition(startProps, endProps) {\n    const startViewstate = new this.ControllerState(startProps);\n    const endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n    const {\n      transitionInterpolator\n    } = endProps;\n    const duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n    if (duration === 0) {\n      return;\n    }\n\n    const initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n    this.propsInTransition = {};\n    this.duration = duration;\n    this.transition.start({\n      duration,\n      easing: endProps.transitionEasing,\n      interpolator: endProps.transitionInterpolator,\n      interruption: endProps.transitionInterruption,\n      startProps: initialProps.start,\n      endProps: initialProps.end,\n      onStart: endProps.onTransitionStart,\n      onUpdate: this._onTransitionUpdate,\n      onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n      onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n    });\n    this.onStateChange({\n      inTransition: true\n    });\n    this.updateTransition();\n  }\n\n  _onTransitionEnd(callback) {\n    return transition => {\n      this.propsInTransition = null;\n      this.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n      callback(transition);\n    };\n  }\n\n  _onTransitionUpdate(transition) {\n    const {\n      time,\n      settings: {\n        interpolator,\n        startProps,\n        endProps,\n        duration,\n        easing\n      }\n    } = transition;\n    const t = easing(time / duration);\n    const viewport = interpolator.interpolateProps(startProps, endProps, t);\n    this.propsInTransition = new this.ControllerState({ ...this.props,\n      ...viewport\n    }).getViewportProps();\n    this.onViewStateChange({\n      viewState: this.propsInTransition,\n      oldViewState: this.props\n    });\n  }\n\n}\n//# sourceMappingURL=transition-manager.js.map","import { equals } from 'math.gl';\nimport assert from '../utils/assert';\nexport default class TransitionInterpolator {\n  constructor(opts = {}) {\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare || Object.keys(nextProps)) {\n      if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    let result;\n\n    if (this._propsToExtract) {\n      const startViewStateProps = {};\n      const endViewStateProps = {};\n\n      for (const key of this._propsToExtract) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n\n      result = {\n        start: startViewStateProps,\n        end: endViewStateProps\n      };\n    } else {\n      result = {\n        start: startProps,\n        end: endProps\n      };\n    }\n\n    this._checkRequiredProps(result.start);\n\n    this._checkRequiredProps(result.end);\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    return endProps;\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map","import TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    super(transitionProps || {\n      compare: DEFAULT_PROPS,\n      extract: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    });\n    this.opts = opts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map","import TransitionManager, { TRANSITION_EVENTS } from './transition-manager';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nconst LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nconst DEFAULT_INERTIA = 300;\n\nconst INERTIA_EASING = t => 1 - (1 - t) * (1 - t);\n\nconst EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\nexport default class Controller {\n  constructor(ControllerState, options = {}) {\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, { ...options,\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    });\n    const linearTransitionProps = this.linearTransitionProps;\n    this._transition = linearTransitionProps && { ...LINEAR_TRANSITION_PROPS,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: linearTransitionProps\n      })\n    };\n    this._events = null;\n    this._interactionState = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  get linearTransitionProps() {\n    return null;\n  }\n\n  set events(customEvents) {\n    this.toggleEvents(this._customEvents, false);\n    this.toggleEvents(customEvents, true);\n    this._customEvents = customEvents;\n    this.setProps(this.controllerStateProps);\n  }\n\n  finalize() {\n    for (const eventName in this._events) {\n      if (this._events[eventName]) {\n        this.eventManager.off(eventName, this.handleEvent);\n      }\n    }\n\n    this.transitionManager.finalize();\n  }\n\n  handleEvent(event) {\n    const {\n      ControllerState\n    } = this;\n    this.controllerState = new ControllerState({\n      makeViewport: this.makeViewport,\n      ...this.controllerStateProps,\n      ...this._state\n    });\n    const eventStartBlocked = this._eventStartBlocked;\n\n    switch (event.type) {\n      case 'panstart':\n        return eventStartBlocked ? false : this._onPanStart(event);\n\n      case 'panmove':\n        return this._onPan(event);\n\n      case 'panend':\n        return this._onPanEnd(event);\n\n      case 'pinchstart':\n        return eventStartBlocked ? false : this._onPinchStart(event);\n\n      case 'pinchmove':\n        return this._onPinch(event);\n\n      case 'pinchend':\n        return this._onPinchEnd(event);\n\n      case 'tripanstart':\n        return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n      case 'tripanmove':\n        return this._onTriplePan(event);\n\n      case 'tripanend':\n        return this._onTriplePanEnd(event);\n\n      case 'doubletap':\n        return this._onDoubleTap(event);\n\n      case 'wheel':\n        return this._onWheel(event);\n\n      case 'keydown':\n        return this._onKeyDown(event);\n\n      default:\n        return false;\n    }\n  }\n\n  getCenter(event) {\n    const {\n      x,\n      y\n    } = this.controllerStateProps;\n    const {\n      offsetCenter\n    } = event;\n    return [offsetCenter.x - x, offsetCenter.y - y];\n  }\n\n  isPointInBounds(pos, event) {\n    const {\n      width,\n      height\n    } = this.controllerStateProps;\n\n    if (event && event.handled) {\n      return false;\n    }\n\n    const inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n    if (inside && event) {\n      event.stopPropagation();\n    }\n\n    return inside;\n  }\n\n  isFunctionKeyPressed(event) {\n    const {\n      srcEvent\n    } = event;\n    return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n  }\n\n  isDragging() {\n    return this._interactionState.isDragging;\n  }\n\n  blockEvents(timeout) {\n    const timer = setTimeout(() => {\n      if (this._eventStartBlocked === timer) {\n        this._eventStartBlocked = null;\n      }\n    }, timeout);\n    this._eventStartBlocked = timer;\n  }\n\n  setProps(props) {\n    if ('onViewStateChange' in props) {\n      this.onViewStateChange = props.onViewStateChange;\n    }\n\n    if ('onStateChange' in props) {\n      this.onStateChange = props.onStateChange;\n    }\n\n    if ('makeViewport' in props) {\n      this.makeViewport = props.makeViewport;\n    }\n\n    if ('dragMode' in props) {\n      this.dragMode = props.dragMode;\n    }\n\n    this.controllerStateProps = props;\n\n    if ('eventManager' in props && this.eventManager !== props.eventManager) {\n      this.eventManager = props.eventManager;\n      this._events = {};\n      this.toggleEvents(this._customEvents, true);\n    }\n\n    if (!('transitionInterpolator' in props)) {\n      props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n    }\n\n    this.transitionManager.processViewStateChange(props);\n    let {\n      inertia\n    } = props;\n\n    if (inertia === true) {\n      inertia = DEFAULT_INERTIA;\n    }\n\n    this.inertia = inertia;\n    const {\n      scrollZoom = true,\n      dragPan = true,\n      dragRotate = true,\n      doubleClickZoom = true,\n      touchZoom = true,\n      touchRotate = false,\n      keyboard = true\n    } = props;\n    const isInteractive = Boolean(this.onViewStateChange);\n    this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n    this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n    this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n    this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n    this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n    this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n    this.scrollZoom = scrollZoom;\n    this.dragPan = dragPan;\n    this.dragRotate = dragRotate;\n    this.doubleClickZoom = doubleClickZoom;\n    this.touchZoom = touchZoom;\n    this.touchRotate = touchRotate;\n    this.keyboard = keyboard;\n  }\n\n  updateTransition() {\n    this.transitionManager.updateTransition();\n  }\n\n  toggleEvents(eventNames, enabled) {\n    if (this.eventManager) {\n      eventNames.forEach(eventName => {\n        if (this._events[eventName] !== enabled) {\n          this._events[eventName] = enabled;\n\n          if (enabled) {\n            this.eventManager.on(eventName, this.handleEvent);\n          } else {\n            this.eventManager.off(eventName, this.handleEvent);\n          }\n        }\n      });\n    }\n  }\n\n  updateViewport(newControllerState, extraProps = {}, interactionState = {}) {\n    const viewState = { ...newControllerState.getViewportProps(),\n      ...extraProps\n    };\n    const changed = this.controllerState !== newControllerState;\n    this._state = newControllerState.getState();\n\n    this._setInteractionState(interactionState);\n\n    if (changed) {\n      const oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState,\n          interactionState: this._interactionState,\n          oldViewState\n        });\n      }\n    }\n  }\n\n  _onTransition(params) {\n    if (this.onViewStateChange) {\n      params.interactionState = this._interactionState;\n      this.onViewStateChange(params);\n    }\n  }\n\n  _setInteractionState(newStates) {\n    Object.assign(this._interactionState, newStates);\n\n    if (this.onStateChange) {\n      this.onStateChange(this._interactionState);\n    }\n  }\n\n  _onPanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    let alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n\n    if (this.invertPan || this.dragMode === 'pan') {\n      alternateMode = !alternateMode;\n    }\n\n    const newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n      pos\n    });\n    this._panMove = alternateMode;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPan(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n  }\n\n  _onPanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n  }\n\n  _onPanMove(event) {\n    if (!this.dragPan) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.pan({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onPanMoveEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragPan && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.pan({\n        pos: endPos\n      }).panEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: true\n      });\n    } else {\n      const newControllerState = this.controllerState.panEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPanRotate(event) {\n    if (!this.dragRotate) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onPanRotateEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragRotate && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      }).rotateEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onWheel(event) {\n    if (!this.scrollZoom) {\n      return false;\n    }\n\n    event.preventDefault();\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const {\n      speed = 0.01,\n      smooth = false\n    } = this.scrollZoom;\n    const {\n      delta\n    } = event;\n    let scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale\n    });\n    this.updateViewport(newControllerState, { ...this._getTransitionProps({\n        around: pos\n      }),\n      transitionDuration: smooth ? 250 : 1\n    }, {\n      isZooming: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onTriplePanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.rotateStart({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onTriplePan(event) {\n    if (!this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    pos[0] -= event.deltaX;\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onTriplePanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n\n    if (this.touchRotate && inertia && event.velocityY) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      });\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPinchStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.zoomStart({\n      pos\n    }).rotateStart({\n      pos\n    });\n    this._startPinchRotation = event.rotation;\n    this._lastPinchEvent = event;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPinch(event) {\n    if (!this.touchZoom && !this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    let newControllerState = this.controllerState;\n\n    if (this.touchZoom) {\n      const {\n        scale\n      } = event;\n      const pos = this.getCenter(event);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale\n      });\n    }\n\n    if (this.touchRotate) {\n      const {\n        rotation\n      } = event;\n      newControllerState = newControllerState.rotate({\n        deltaAngleX: this._startPinchRotation - rotation\n      });\n    }\n\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: this.touchZoom,\n      isZooming: this.touchZoom,\n      isRotating: this.touchRotate\n    });\n    this._lastPinchEvent = event;\n    return true;\n  }\n\n  _onPinchEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia,\n      _lastPinchEvent\n    } = this;\n\n    if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n      const pos = this.getCenter(event);\n      let newControllerState = this.controllerState.rotateEnd();\n      const z = Math.log2(event.scale);\n\n      const velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n      const endScale = Math.pow(2, z + velocityZ * inertia / 2);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale: endScale\n      }).zoomEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps({\n          around: pos\n        }),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: false\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n    }\n\n    this._startPinchRotation = null;\n    this._lastPinchEvent = null;\n    return true;\n  }\n\n  _onDoubleTap(event) {\n    if (!this.doubleClickZoom) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const isZoomOut = this.isFunctionKeyPressed(event);\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale: isZoomOut ? 0.5 : 2\n    });\n    this.updateViewport(newControllerState, this._getTransitionProps({\n      around: pos\n    }), {\n      isZooming: true,\n      isPanning: true\n    });\n    this.blockEvents(100);\n    return true;\n  }\n\n  _onKeyDown(event) {\n    if (!this.keyboard) {\n      return false;\n    }\n\n    const funcKey = this.isFunctionKeyPressed(event);\n    const {\n      zoomSpeed,\n      moveSpeed,\n      rotateSpeedX,\n      rotateSpeedY\n    } = this.keyboard;\n    const {\n      controllerState\n    } = this;\n    let newControllerState;\n    const interactionState = {};\n\n    switch (event.srcEvent.code) {\n      case 'Minus':\n        newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'Equal':\n        newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'ArrowLeft':\n        if (funcKey) {\n          newControllerState = controllerState.rotateLeft(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveLeft(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowRight':\n        if (funcKey) {\n          newControllerState = controllerState.rotateRight(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveRight(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowUp':\n        if (funcKey) {\n          newControllerState = controllerState.rotateUp(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveUp(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (funcKey) {\n          newControllerState = controllerState.rotateDown(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveDown(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      default:\n        return false;\n    }\n\n    this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n    return true;\n  }\n\n  _getTransitionProps(opts) {\n    const {\n      _transition\n    } = this;\n\n    if (!_transition) {\n      return NO_TRANSITION_PROPS;\n    }\n\n    return opts ? { ..._transition,\n      transitionInterpolator: new LinearInterpolator({ ...opts,\n        transitionProps: this.linearTransitionProps,\n        makeViewport: this.controllerState.makeViewport\n      })\n    } : _transition;\n  }\n\n}\n//# sourceMappingURL=controller.js.map","export default class ViewState {\n  constructor(opts) {\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  getViewportProps() {\n    return this._viewportProps;\n  }\n\n  getState() {\n    return this._state;\n  }\n\n  shortestPathFrom(viewState) {\n    return this._viewportProps;\n  }\n\n  _applyConstraints(props) {\n    return props;\n  }\n\n}\n//# sourceMappingURL=view-state.js.map","import { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nconst PITCH_MOUSE_THRESHOLD = 5;\nconst PITCH_ACCEL = 1.2;\nconst DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5,\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nexport class MapState extends ViewState {\n  constructor({\n    makeViewport,\n    width,\n    height,\n    latitude,\n    longitude,\n    zoom,\n    bearing = DEFAULT_STATE.bearing,\n    pitch = DEFAULT_STATE.pitch,\n    altitude = DEFAULT_STATE.altitude,\n    maxZoom = DEFAULT_STATE.maxZoom,\n    minZoom = DEFAULT_STATE.minZoom,\n    maxPitch = DEFAULT_STATE.maxPitch,\n    minPitch = DEFAULT_STATE.minPitch,\n    startPanLngLat,\n    startZoomLngLat,\n    startRotatePos,\n    startBearing,\n    startPitch,\n    startZoom,\n    normalize\n  } = {}) {\n    assert(Number.isFinite(longitude));\n    assert(Number.isFinite(latitude));\n    assert(Number.isFinite(zoom));\n    super({\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing,\n      pitch,\n      altitude,\n      maxZoom,\n      minZoom,\n      maxPitch,\n      minPitch,\n      normalize\n    });\n    this._state = {\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom\n    };\n    this.makeViewport = makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanLngLat: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPos\n  }) {\n    const startPanLngLat = this._state.startPanLngLat || this._unproject(startPos);\n\n    if (!startPanLngLat) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this._viewportProps);\n    const newProps = viewport.panByPosition(startPanLngLat, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanLngLat: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startBearing: this._viewportProps.bearing,\n      startPitch: this._viewportProps.pitch\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startBearing,\n      startPitch\n    } = this._state;\n\n    if (!startRotatePos || !Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      newRotation = this._calculateNewPitchAndBearing({ ...this._getRotationParams(pos, startRotatePos),\n        startBearing,\n        startPitch\n      });\n    } else {\n      newRotation = {\n        bearing: startBearing + deltaAngleX,\n        pitch: startPitch + deltaAngleY\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startBearing: null,\n      startPitch: null\n    });\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomLngLat: this._unproject(pos),\n      startZoom: this._viewportProps.zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomLngLat\n    } = this._state;\n\n    if (!Number.isFinite(startZoom)) {\n      startZoom = this._viewportProps.zoom;\n      startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    const zoom = this._calculateNewZoom({\n      scale,\n      startZoom\n    });\n\n    const zoomedViewport = this.makeViewport({ ...this._viewportProps,\n      zoom\n    });\n    return this._getUpdatedState({\n      zoom,\n      ...zoomedViewport.panByPosition(startZoomLngLat, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomLngLat: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._zoomFromCenter(speed);\n  }\n\n  zoomOut(speed = 2) {\n    return this._zoomFromCenter(1 / speed);\n  }\n\n  moveLeft(speed = 100) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveRight(speed = 100) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveUp(speed = 100) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  moveDown(speed = 100) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch + speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch - speed\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this._viewportProps\n    };\n    const {\n      bearing,\n      longitude\n    } = props;\n\n    if (Math.abs(bearing - fromProps.bearing) > 180) {\n      props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n    }\n\n    if (Math.abs(longitude - fromProps.longitude) > 180) {\n      props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n    }\n\n    return props;\n  }\n\n  _zoomFromCenter(scale) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.zoom({\n      pos: [width / 2, height / 2],\n      scale\n    });\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.pan({\n      startPos: [width / 2, height / 2],\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this._viewportProps,\n      ...this._state,\n      ...newProps\n    });\n  }\n\n  _applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom\n    } = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n    const {\n      maxPitch,\n      minPitch,\n      pitch\n    } = props;\n    props.pitch = clamp(pitch, minPitch, maxPitch);\n    const {\n      normalize = true\n    } = props;\n\n    if (normalize) {\n      Object.assign(props, normalizeViewportProps(props));\n    }\n\n    return props;\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this._viewportProps);\n    return pos && viewport.unproject(pos);\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this._viewportProps;\n    const zoom = startZoom + Math.log2(scale);\n    return clamp(zoom, minZoom, maxZoom);\n  }\n\n  _calculateNewPitchAndBearing({\n    deltaScaleX,\n    deltaScaleY,\n    startBearing,\n    startPitch\n  }) {\n    deltaScaleY = clamp(deltaScaleY, -1, 1);\n    const {\n      minPitch,\n      maxPitch\n    } = this._viewportProps;\n    const bearing = startBearing + 180 * deltaScaleX;\n    let pitch = startPitch;\n\n    if (deltaScaleY > 0) {\n      pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n    } else if (deltaScaleY < 0) {\n      pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n    }\n\n    return {\n      pitch,\n      bearing\n    };\n  }\n\n  _getRotationParams(pos, startPos) {\n    const deltaX = pos[0] - startPos[0];\n    const deltaY = pos[1] - startPos[1];\n    const centerY = pos[1];\n    const startY = startPos[1];\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    const deltaScaleX = deltaX / width;\n    let deltaScaleY = 0;\n\n    if (deltaY > 0) {\n      if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n      }\n    } else if (deltaY < 0) {\n      if (startY > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = 1 - centerY / startY;\n      }\n    }\n\n    deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n    return {\n      deltaScaleX,\n      deltaScaleY\n    };\n  }\n\n}\nexport default class MapController extends Controller {\n  constructor(props) {\n    props.dragMode = props.dragMode || 'pan';\n    super(MapState, props);\n  }\n\n  setProps(props) {\n    const oldProps = this.controllerStateProps;\n    super.setProps(props);\n    const dimensionChanged = !oldProps || oldProps.height !== props.height;\n\n    if (dimensionChanged) {\n      this.updateViewport(new this.ControllerState({\n        makeViewport: this.makeViewport,\n        ...this.controllerStateProps,\n        ...this._state\n      }));\n    }\n  }\n\n  get linearTransitionProps() {\n    return ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n  }\n\n}\n//# sourceMappingURL=map-controller.js.map","import View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\nexport default class MapView extends View {\n  constructor(props) {\n    super({ ...props,\n      type: WebMercatorViewport\n    });\n  }\n\n  get controller() {\n    return this._getControllerProps({\n      type: MapController\n    });\n  }\n\n}\nMapView.displayName = 'MapView';\n//# sourceMappingURL=map-view.js.map","const DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nlet idCount = 0;\nexport class AmbientLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    this.id = props.id || \"ambient-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'ambient';\n  }\n\n}\n//# sourceMappingURL=ambient-light.js.map","import { Vector3 } from 'math.gl';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nlet idCount = 0;\nexport class DirectionalLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      direction = DEFAULT_LIGHT_DIRECTION\n    } = props;\n    const {\n      _shadow = false\n    } = props;\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  getProjectedLight() {\n    return this;\n  }\n\n}\n//# sourceMappingURL=directional-light.js.map","export default class Effect {\n  constructor(props = {}) {\n    const {\n      id = 'effect'\n    } = props;\n    this.id = id;\n    this.props = { ...props\n    };\n  }\n\n  preRender() {}\n\n  getModuleParameters() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=effect.js.map","export default class Pass {\n  constructor(gl, props = {}) {\n    const {\n      id = 'pass'\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map","import Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class LayersPass extends Pass {\n  render(props) {\n    const gl = this.gl;\n    setParameters(gl, {\n      framebuffer: props.target\n    });\n    return this._drawLayers(props);\n  }\n\n  _drawLayers(props) {\n    const {\n      viewports,\n      views,\n      onViewportActive,\n      clearCanvas = true\n    } = props;\n    props.pass = props.pass || 'unknown';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl);\n    }\n\n    const renderStats = [];\n\n    for (const viewportOrDescriptor of viewports) {\n      const viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n      const view = views && views[viewport.id];\n      onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, props);\n\n      props.view = view;\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        props.viewport = subViewport;\n\n        const stats = this._drawLayersInViewport(gl, props, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    layerFilter,\n    effects,\n    moduleParameters\n  }) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver();\n    const drawContext = {\n      viewport,\n      isPicking: pass.startsWith('picking'),\n      renderPass: pass\n    };\n    const layerFilterCache = {};\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache);\n\n      const layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n      const layerParam = {\n        shouldDrawLayer,\n        layerRenderIndex\n      };\n\n      if (shouldDrawLayer) {\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex, viewport);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    pass,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      withParameters(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => clear(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    setParameters(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer.drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, \"drawing \".concat(layer, \" to \").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache) {\n    const shouldDrawLayer = this.shouldDrawLayer(layer) && layer.props.visible;\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.props.visible || !parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    if (layerFilter) {\n      const rootLayerId = drawContext.layer.id;\n\n      if (!(rootLayerId in layerFilterCache)) {\n        layerFilterCache[rootLayerId] = layerFilter(drawContext);\n      }\n\n      if (!layerFilterCache[rootLayerId]) {\n        return false;\n      }\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    const moduleParameters = Object.assign(Object.create(layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        Object.assign(moduleParameters, effect.getModuleParameters(layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nexport function layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  viewport\n}) {\n  const height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  const dimensions = viewport;\n  const pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","import { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class ShadowPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n    this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    withParameters(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = cssToDeviceRatio(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: 'shadow'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nconst fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts = {}, context = {}) {\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(i, \"]\")] = viewProjectionMatrices[i];\n    uniforms[\"shadow_uProjectCenters[\".concat(i, \"]\")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      const {\n        shadowEnabled = true\n      } = opts;\n      return shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0 ? createShadowUniforms(opts, context) : {\n        shadow_uDrawShadowMap: false,\n        shadow_uUseShadowMap: false\n      };\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\nexport default class LightingEffect extends Effect {\n  constructor(props) {\n    super(props);\n    this.ambientLight = null;\n    this.directionalLights = [];\n    this.pointLights = [];\n    this.shadowColor = DEFAULT_SHADOW_COLOR;\n    this.shadowPasses = [];\n    this.shadowMaps = [];\n    this.dummyShadowMap = null;\n    this.shadow = false;\n    this.programManager = null;\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource);\n          break;\n\n        default:\n      }\n    }\n\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.shadow) return;\n    this.shadowMatrices = this._createLightMatrix();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n\n    if (!this.programManager) {\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer) {\n    const parameters = this.shadow ? {\n      shadowMaps: this.shadowMaps,\n      dummyShadowMap: this.dummyShadowMap,\n      shadowColor: this.shadowColor,\n      shadowMatrices: this.shadowMatrices\n    } : {};\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight => directionalLight.getProjectedLight({\n        layer\n      })),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({\n        layer\n      }))\n    };\n    return parameters;\n  }\n\n  cleanup() {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  _createLightMatrix() {\n    const lightMatrices = [];\n\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n      lightMatrices.push(viewMatrix);\n    }\n\n    return lightMatrices;\n  }\n\n  _createShadowPasses(gl) {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  _applyDefaultLights() {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = this;\n\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n    }\n  }\n\n}\n//# sourceMappingURL=lighting-effect.js.map","import { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nexport default class EffectManager {\n  constructor() {\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  setEffects(effects = []) {\n    this.cleanup();\n    this.effects = effects;\n\n    this._createInternalEffects();\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n\n  _createInternalEffects() {\n    this._internalEffects = this.effects.slice();\n\n    if (!this.effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n}\n//# sourceMappingURL=effect-manager.js.map","import LayersPass from './layers-pass';\nexport default class DrawLayersPass extends LayersPass {}\n//# sourceMappingURL=draw-layers-pass.js.map","import LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nimport log from '../utils/log';\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nexport default class PickLayersPass extends LayersPass {\n  render(props) {\n    if (props.pickingFBO) {\n      return this._drawPickingBuffer(props);\n    }\n\n    return super.render(props);\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    pass = 'picking',\n    redrawReason,\n    pickZ\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n    const encodedColors = !pickZ && {\n      byLayer: new Map(),\n      byAlpha: []\n    };\n    this._colors = encodedColors;\n    const renderStatus = withParameters(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => super.render({\n      target: pickingFBO,\n      layers,\n      layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pass,\n      redrawReason\n    }));\n    this._colors = null;\n    const decodePickingColor = encodedColors && decodeColor.bind(null, encodedColors);\n    return {\n      decodePickingColor,\n      stats: renderStatus\n    };\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.pickable;\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    const pickParameters = { ...layer.props.parameters\n    };\n\n    if (this.pickZ) {\n      pickParameters.blend = false;\n    } else {\n      Object.assign(pickParameters, PICKING_PARAMETERS);\n      pickParameters.blend = true;\n      pickParameters.blendColor = encodeColor(this._colors, layer, viewport);\n    }\n\n    return pickParameters;\n  }\n\n}\n\nfunction encodeColor(encoded, layer, viewport) {\n  const {\n    byLayer,\n    byAlpha\n  } = encoded;\n  let a;\n\n  if (byLayer.has(layer)) {\n    const entry = byLayer.get(layer);\n    entry.viewports.push(viewport);\n    a = entry.a;\n  } else {\n    a = byLayer.size + 1;\n\n    if (a <= 255) {\n      const entry = {\n        a,\n        layer,\n        viewports: [viewport]\n      };\n      byLayer.set(layer, entry);\n      byAlpha[a] = entry;\n    } else {\n      log.warn('Too many pickable layers, only picking the first 255')();\n      a = 0;\n    }\n  }\n\n  return [0, 0, 0, a / 255];\n}\n\nfunction decodeColor(encoded, pickedColor) {\n  const entry = encoded.byAlpha[pickedColor[3]];\n  return entry && {\n    pickedLayer: entry.layer,\n    pickedViewports: entry.viewports,\n    pickedObjectIndex: entry.layer.decodePickingColor(pickedColor)\n  };\n}\n//# sourceMappingURL=pick-layers-pass.js.map","import debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nconst TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\nexport default class DeckRenderer {\n  constructor(gl) {\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n      this.layerFilter = props.layerFilter;\n      this._needsRedraw = 'layerFilter changed';\n    }\n\n    if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n      this.drawPickingColors = props.drawPickingColors;\n      this._needsRedraw = 'drawPickingColors changed';\n    }\n  }\n\n  renderLayers(opts) {\n    const layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n    opts.layerFilter = opts.layerFilter || this.layerFilter;\n    opts.effects = opts.effects || [];\n    opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n    this._preRender(opts.effects, opts);\n\n    const outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n    const renderStats = layerPass.render({ ...opts,\n      target: outputBuffer\n    });\n\n    this._postRender(opts.effects, opts);\n\n    this.renderCount++;\n    debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  finalize() {\n    const {\n      renderBuffers\n    } = this;\n\n    for (const buffer of renderBuffers) {\n      buffer.delete();\n    }\n\n    renderBuffers.length = 0;\n  }\n\n  _preRender(effects, opts) {\n    let lastPostProcessEffect = null;\n\n    for (const effect of effects) {\n      effect.preRender(this.gl, opts);\n\n      if (effect.postRender) {\n        lastPostProcessEffect = effect;\n      }\n    }\n\n    if (lastPostProcessEffect) {\n      this._resizeRenderBuffers();\n    }\n\n    this.lastPostProcessEffect = lastPostProcessEffect;\n  }\n\n  _resizeRenderBuffers() {\n    const {\n      renderBuffers\n    } = this;\n\n    if (renderBuffers.length === 0) {\n      renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n    }\n\n    for (const buffer of renderBuffers) {\n      buffer.resize();\n    }\n  }\n\n  _postRender(effects, opts) {\n    const {\n      renderBuffers\n    } = this;\n    const params = {\n      inputBuffer: renderBuffers[0],\n      swapBuffer: renderBuffers[1],\n      target: null\n    };\n\n    for (const effect of effects) {\n      if (effect.postRender) {\n        if (effect === this.lastPostProcessEffect) {\n          params.target = opts.target;\n          effect.postRender(this.gl, params);\n          break;\n        }\n\n        const buffer = effect.postRender(this.gl, params);\n        params.inputBuffer = buffer;\n        params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject({\n  pickedColors,\n  decodePickingColor,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  if (pickedColors) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    let closestPixelIndex = -1;\n    let i = 0;\n\n    for (let row = 0; row < height; row++) {\n      const dy = row + y - deviceY;\n      const dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (let col = 0; col < width; col++) {\n          const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            const dx = col + x - deviceX;\n            const d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      const pickedObject = decodePickingColor(pickedColor);\n\n      if (pickedObject) {\n        const dy = Math.floor(closestPixelIndex / 4 / width);\n        const dx = closestPixelIndex / 4 - dy * width;\n        return { ...pickedObject,\n          pickedColor,\n          pickedX: x + dx,\n          pickedY: y + dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects({\n  pickedColors,\n  decodePickingColor\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedObject = decodePickingColor(pickedColor);\n\n          if (pickedObject) {\n            uniqueColors.set(colorKey, { ...pickedObject,\n              pickedColor\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo({\n  pickInfo,\n  viewports,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  let pickedViewport = viewports[0];\n\n  if (viewports.length > 1) {\n    pickedViewport = getViewportFromCoordinates((pickInfo === null || pickInfo === void 0 ? void 0 : pickInfo.pickedViewports) || viewports, {\n      x,\n      y\n    });\n  }\n\n  const coordinate = pickedViewport && pickedViewport.unproject([x - pickedViewport.x, y - pickedViewport.y], {\n    targetZ: z\n  });\n  return {\n    color: null,\n    layer: null,\n    viewport: pickedViewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && 'pickedX' in pickInfo ? [pickInfo.pickedX, pickInfo.pickedY] : null,\n    pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedObjectIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(info.layer.id, info);\n\n    if (mode === 'hover') {\n      info.layer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel)) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\nexport default class DeckPicker {\n  constructor(gl) {\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props) {\n      this.layerFilter = props.layerFilter;\n    }\n\n    if ('_pickable' in props) {\n      this._pickable = props._pickable;\n    }\n  }\n\n  finalize() {\n    if (this.pickingFBO) {\n      this.pickingFBO.delete();\n    }\n\n    if (this.depthFBO) {\n      this.depthFBO.color.delete();\n      this.depthFBO.delete();\n    }\n  }\n\n  pickObject(opts) {\n    return this._pickClosestObject(opts);\n  }\n\n  pickObjects(opts) {\n    return this._pickVisibleObjects(opts);\n  }\n\n  getLastPickedObject({\n    x,\n    y,\n    layers,\n    viewports\n  }, lastPickedInfo = this.lastPickedInfo.info) {\n    const lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n    const lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n    const layer = lastPickedLayerId ? layers.find(l => l.id === lastPickedLayerId) : null;\n    const viewport = lastPickedViewportId && viewports.find(v => v.id === lastPickedViewportId) || viewports[0];\n    const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n    const info = {\n      x,\n      y,\n      viewport,\n      coordinate,\n      layer\n    };\n    return { ...lastPickedInfo,\n      ...info\n    };\n  }\n\n  _resizeBuffer() {\n    const {\n      gl\n    } = this;\n\n    if (!this.pickingFBO) {\n      this.pickingFBO = new Framebuffer(gl);\n\n      if (Framebuffer.isSupported(gl, {\n        colorBufferFloat: true\n      })) {\n        this.depthFBO = new Framebuffer(gl);\n        this.depthFBO.attach({\n          [36064]: new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })\n        });\n      }\n    }\n\n    this.pickingFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n\n    if (this.depthFBO) {\n      this.depthFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n    }\n\n    return this.pickingFBO;\n  }\n\n  _getPickable(layers) {\n    if (this._pickable === false) {\n      return null;\n    }\n\n    const pickableLayers = layers.filter(layer => layer.isPickable() && !layer.isComposite);\n    return pickableLayers.length ? pickableLayers : null;\n  }\n\n  _pickClosestObject({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    radius = 0,\n    depth = 1,\n    mode = 'query',\n    unproject3D,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return {\n        result: [],\n        emptyInfo: getEmptyPickingInfo({\n          viewports,\n          x,\n          y\n        })\n      };\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n    const devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n    const deviceRadius = Math.round(radius * pixelRatio);\n    const {\n      width,\n      height\n    } = this.pickingFBO;\n\n    const deviceRect = this._getPickingRect({\n      deviceX: devicePixel[0],\n      deviceY: devicePixel[1],\n      deviceRadius,\n      deviceWidth: width,\n      deviceHeight: height\n    });\n\n    let infos;\n    const result = [];\n    const affectedLayers = new Set();\n\n    for (let i = 0; i < depth; i++) {\n      const pickedResult = deviceRect && this._drawAndSample({\n        layers,\n        views,\n        viewports,\n        onViewportActive,\n        deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      const pickInfo = getClosestObject({ ...pickedResult,\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius,\n        deviceRect\n      });\n      let z;\n\n      if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n        const pickedResultPass2 = this._drawAndSample({\n          layers: [pickInfo.pickedLayer],\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect: {\n            x: pickInfo.pickedX,\n            y: pickInfo.pickedY,\n            width: 1,\n            height: 1\n          },\n          pass: \"picking:\".concat(mode),\n          redrawReason: 'pick-z',\n          pickZ: true\n        });\n\n        z = pickedResultPass2.pickedColors[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n      }\n\n      if (pickInfo.pickedLayer && i + 1 < depth) {\n        affectedLayers.add(pickInfo.pickedLayer);\n        pickInfo.pickedLayer.disablePickingIndex(pickInfo.pickedObjectIndex);\n      }\n\n      infos = processPickInfo({\n        pickInfo,\n        lastPickedInfo: this.lastPickedInfo,\n        mode,\n        layers,\n        viewports,\n        x,\n        y,\n        z,\n        pixelRatio\n      });\n\n      for (const info of infos.values()) {\n        if (info.layer) {\n          result.push(info);\n        }\n      }\n\n      if (!pickInfo.pickedColor) {\n        break;\n      }\n    }\n\n    for (const layer of affectedLayers) {\n      layer.restorePickingColors();\n    }\n\n    return {\n      result,\n      emptyInfo: infos && infos.get(null)\n    };\n  }\n\n  _pickVisibleObjects({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    width = 1,\n    height = 1,\n    mode = 'query',\n    maxObjects = null,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return [];\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const leftTop = cssToDevicePixels(this.gl, [x, y], true);\n    const deviceLeft = leftTop.x;\n    const deviceTop = leftTop.y + leftTop.height;\n    const rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n    const deviceRight = rightBottom.x + rightBottom.width;\n    const deviceBottom = rightBottom.y;\n    const deviceRect = {\n      x: deviceLeft,\n      y: deviceBottom,\n      width: deviceRight - deviceLeft,\n      height: deviceTop - deviceBottom\n    };\n\n    const pickedResult = this._drawAndSample({\n      layers,\n      views,\n      viewports,\n      onViewportActive,\n      deviceRect,\n      pass: \"picking:\".concat(mode),\n      redrawReason: mode\n    });\n\n    const pickInfos = getUniqueObjects(pickedResult);\n    const uniqueInfos = new Map();\n    const isMaxObjects = Number.isFinite(maxObjects);\n\n    for (let i = 0; i < pickInfos.length; i++) {\n      if (isMaxObjects && uniqueInfos.size >= maxObjects) {\n        break;\n      }\n\n      const pickInfo = pickInfos[i];\n      let info = {\n        color: pickInfo.pickedColor,\n        layer: null,\n        index: pickInfo.pickedObjectIndex,\n        picked: true,\n        x,\n        y,\n        width,\n        height,\n        pixelRatio\n      };\n      info = getLayerPickingInfo({\n        layer: pickInfo.pickedLayer,\n        info,\n        mode\n      });\n\n      if (!uniqueInfos.has(info.object)) {\n        uniqueInfos.set(info.object, info);\n      }\n    }\n\n    return Array.from(uniqueInfos.values());\n  }\n\n  _drawAndSample({\n    layers,\n    views,\n    viewports,\n    onViewportActive,\n    deviceRect,\n    pass,\n    redrawReason,\n    pickZ\n  }) {\n    const pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n    const {\n      decodePickingColor\n    } = this.pickLayersPass.render({\n      layers,\n      layerFilter: this.layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pickingFBO,\n      deviceRect,\n      pass,\n      redrawReason,\n      pickZ\n    });\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    const pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n    readPixelsToArray(pickingFBO, {\n      sourceX: x,\n      sourceY: y,\n      sourceWidth: width,\n      sourceHeight: height,\n      target: pickedColors\n    });\n    return {\n      pickedColors,\n      decodePickingColor\n    };\n  }\n\n  _getPickingRect({\n    deviceX,\n    deviceY,\n    deviceRadius,\n    deviceWidth,\n    deviceHeight\n  }) {\n    const x = Math.max(0, deviceX - deviceRadius);\n    const y = Math.max(0, deviceY - deviceRadius);\n    const width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n    const height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n    if (width <= 0 || height <= 0) {\n      return null;\n    }\n\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n\n}\n//# sourceMappingURL=deck-picker.js.map","const defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\nexport default class Tooltip {\n  constructor(canvas) {\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n\n    this.isVisible = false;\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if ('text' in displayInfo) {\n        el.innerText = displayInfo.text;\n      }\n\n      if ('html' in displayInfo) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if ('className' in displayInfo) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map","export const VERSION = typeof \"3.0.13\" !== 'undefined' ? \"3.0.13\" : 'latest';\n//# sourceMappingURL=version.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","import { global, isBrowser } from '../utils/globals';\nconst {\n  _parseImageNode\n} = global;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    let xmlText = textDecoder.decode(arrayBuffer);\n\n    try {\n      if (typeof unescape === 'function' && typeof encodeURIComponent === 'function') {\n        xmlText = unescape(encodeURIComponent(xmlText));\n      }\n    } catch (error) {\n      throw new Error(error.message);\n    }\n\n    const src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { global } from '../utils/globals';\nimport { assert } from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const {\n    _parseImageNode\n  } = global;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","import { assert } from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nconst version = typeof \"8.6.4\" !== 'undefined' ? \"8.6.4\" : global.DECK_VERSION || 'untranspiled source';\nconst existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  log.log(1, \"deck.gl \".concat(version))();\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version,\n    log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default global.deck;\n//# sourceMappingURL=init.js.map","import Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_QUERY_RESULT = 0x8866;\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867;\nconst GL_TIME_ELAPSED_EXT = 0x88bf;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f;\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\nexport default class Query extends Resource {\n  static isSupported(gl, opts = []) {\n    const webgl2 = isWebGL2(gl);\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n    Object.seal(this);\n  }\n\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  beginOcclusionQuery({\n    conservative = false\n  } = {}) {\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  begin(target) {\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n    return this;\n  }\n\n  end() {\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n\n    return this;\n  }\n\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n\n    return resultAvailable;\n  }\n\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  createPoll(limit = Number.POSITIVE_INFINITY) {\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n\n}\n//# sourceMappingURL=query.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","import { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nconst isPage = isBrowser() && typeof document !== 'undefined';\nlet statIdCounter = 0;\nexport default class AnimationLoop {\n  constructor(props = {}) {\n    const {\n      onCreateContext = opts => createGLContext(opts),\n      onAddHTML = null,\n      onInitialize = () => {},\n      onRender = () => {},\n      onFinalize = () => {},\n      onError,\n      gl = null,\n      glOptions = {},\n      debug = false,\n      createFramebuffer = false,\n      autoResizeViewport = true,\n      autoResizeDrawingBuffer = true,\n      stats = lumaStats.get(`animation-loop-${statIdCounter++}`)\n    } = props;\n    let {\n      useDevicePixels = true\n    } = props;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext,\n      onAddHTML,\n      onInitialize,\n      onRender,\n      onFinalize,\n      onError,\n      gl,\n      glOptions,\n      debug,\n      createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport,\n      autoResizeDrawingBuffer,\n      useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  delete() {\n    this.stop();\n\n    this._setDisplay(null);\n  }\n\n  setNeedsRedraw(reason) {\n    assert(typeof reason === 'string');\n    this.needsRedraw = this.needsRedraw || reason;\n    return this;\n  }\n\n  setProps(props) {\n    if ('autoResizeViewport' in props) {\n      this.autoResizeViewport = props.autoResizeViewport;\n    }\n\n    if ('autoResizeDrawingBuffer' in props) {\n      this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n    }\n\n    if ('useDevicePixels' in props) {\n      this.useDevicePixels = props.useDevicePixels;\n    }\n\n    return this;\n  }\n\n  start(opts = {}) {\n    if (this._running) {\n      return this;\n    }\n\n    this._running = true;\n\n    const startPromise = this._getPageLoadPromise().then(() => {\n      if (!this._running || this._initialized) {\n        return null;\n      }\n\n      this._createWebGLContext(opts);\n\n      this._createFramebuffer();\n\n      this._startEventHandling();\n\n      this._initializeCallbackData();\n\n      this._updateCallbackData();\n\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._gpuTimeQuery = Query.isSupported(this.gl, ['timers']) ? new Query(this.gl) : null;\n      this._initialized = true;\n      return this.onInitialize(this.animationProps);\n    }).then(appContext => {\n      if (this._running) {\n        this._addCallbackData(appContext || {});\n\n        if (appContext !== false) {\n          this._startLoop();\n        }\n      }\n    });\n\n    if (this.props.onError) {\n      startPromise.catch(this.props.onError);\n    }\n\n    return this;\n  }\n\n  redraw() {\n    if (this.isContextLost()) {\n      return this;\n    }\n\n    this._beginTimers();\n\n    this._setupFrame();\n\n    this._updateCallbackData();\n\n    this._renderFrame(this.animationProps);\n\n    this._clearNeedsRedraw();\n\n    if (this.offScreen && this.gl.commit) {\n      this.gl.commit();\n    }\n\n    if (this._resolveNextFrame) {\n      this._resolveNextFrame(this);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n    }\n\n    this._endTimers();\n\n    return this;\n  }\n\n  stop() {\n    if (this._running) {\n      this._finalizeCallbackData();\n\n      this._cancelAnimationFrame(this._animationFrameId);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n      this._animationFrameId = null;\n      this._running = false;\n    }\n\n    return this;\n  }\n\n  attachTimeline(timeline) {\n    this.timeline = timeline;\n    return this.timeline;\n  }\n\n  detachTimeline() {\n    this.timeline = null;\n  }\n\n  waitForRender() {\n    this.setNeedsRedraw('waitForRender');\n\n    if (!this._nextFramePromise) {\n      this._nextFramePromise = new Promise(resolve => {\n        this._resolveNextFrame = resolve;\n      });\n    }\n\n    return this._nextFramePromise;\n  }\n\n  async toDataURL() {\n    this.setNeedsRedraw('toDataURL');\n    await this.waitForRender();\n    return this.gl.canvas.toDataURL();\n  }\n\n  isContextLost() {\n    return this.gl.isContextLost();\n  }\n\n  onCreateContext(...args) {\n    return this.props.onCreateContext(...args);\n  }\n\n  onInitialize(...args) {\n    return this.props.onInitialize(...args);\n  }\n\n  onRender(...args) {\n    return this.props.onRender(...args);\n  }\n\n  onFinalize(...args) {\n    return this.props.onFinalize(...args);\n  }\n\n  getHTMLControlValue(id, defaultValue = 1) {\n    const element = document.getElementById(id);\n    return element ? Number(element.value) : defaultValue;\n  }\n\n  setViewParameters() {\n    log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n    return this;\n  }\n\n  _startLoop() {\n    const renderFrame = () => {\n      if (!this._running) {\n        return;\n      }\n\n      this.redraw();\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    };\n\n    this._cancelAnimationFrame(this._animationFrameId);\n\n    this._animationFrameId = this._requestAnimationFrame(renderFrame);\n  }\n\n  _getPageLoadPromise() {\n    if (!this._pageLoadPromise) {\n      this._pageLoadPromise = isPage ? new Promise((resolve, reject) => {\n        if (isPage && document.readyState === 'complete') {\n          resolve(document);\n          return;\n        }\n\n        window.addEventListener('load', () => {\n          resolve(document);\n        });\n      }) : Promise.resolve({});\n    }\n\n    return this._pageLoadPromise;\n  }\n\n  _setDisplay(display) {\n    if (this.display) {\n      this.display.delete();\n      this.display.animationLoop = null;\n    }\n\n    if (display) {\n      display.animationLoop = this;\n    }\n\n    this.display = display;\n  }\n\n  _cancelAnimationFrame(animationFrameId) {\n    if (this.display && this.display.cancelAnimationFrame) {\n      return this.display.cancelAnimationFrame(animationFrameId);\n    }\n\n    return cancelAnimationFrame(animationFrameId);\n  }\n\n  _requestAnimationFrame(renderFrameCallback) {\n    if (this._running) {\n      if (this.display && this.display.requestAnimationFrame) {\n        return this.display.requestAnimationFrame(renderFrameCallback);\n      }\n\n      return requestAnimationFrame(renderFrameCallback);\n    }\n\n    return undefined;\n  }\n\n  _renderFrame(...args) {\n    if (this.display) {\n      this.display._renderFrame(...args);\n\n      return;\n    }\n\n    this.onRender(...args);\n  }\n\n  _clearNeedsRedraw() {\n    this.needsRedraw = null;\n  }\n\n  _setupFrame() {\n    this._resizeCanvasDrawingBuffer();\n\n    this._resizeViewport();\n\n    this._resizeFramebuffer();\n  }\n\n  _initializeCallbackData() {\n    this.animationProps = {\n      gl: this.gl,\n      stop: this.stop,\n      canvas: this.gl.canvas,\n      framebuffer: this.framebuffer,\n      useDevicePixels: this.useDevicePixels,\n      needsRedraw: null,\n      startTime: Date.now(),\n      engineTime: 0,\n      tick: 0,\n      tock: 0,\n      time: 0,\n      _timeline: this.timeline,\n      _loop: this,\n      _animationLoop: this,\n      _mousePosition: null\n    };\n  }\n\n  _updateCallbackData() {\n    const {\n      width,\n      height,\n      aspect\n    } = this._getSizeAndAspect();\n\n    if (width !== this.animationProps.width || height !== this.animationProps.height) {\n      this.setNeedsRedraw('drawing buffer resized');\n    }\n\n    if (aspect !== this.animationProps.aspect) {\n      this.setNeedsRedraw('drawing buffer aspect changed');\n    }\n\n    this.animationProps.width = width;\n    this.animationProps.height = height;\n    this.animationProps.aspect = aspect;\n    this.animationProps.needsRedraw = this.needsRedraw;\n    this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n    if (this.timeline) {\n      this.timeline.update(this.animationProps.engineTime);\n    }\n\n    this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n    this.animationProps.tock++;\n    this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n    this.animationProps._offScreen = this.offScreen;\n  }\n\n  _finalizeCallbackData() {\n    this.onFinalize(this.animationProps);\n  }\n\n  _addCallbackData(appContext) {\n    if (typeof appContext === 'object' && appContext !== null) {\n      this.animationProps = Object.assign({}, this.animationProps, appContext);\n    }\n  }\n\n  _createWebGLContext(opts) {\n    this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n    opts = Object.assign({}, opts, this.props.glOptions);\n    this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n    if (!isWebGL(this.gl)) {\n      throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n    }\n\n    resetParameters(this.gl);\n\n    this._createInfoDiv();\n  }\n\n  _createInfoDiv() {\n    if (this.gl.canvas && this.props.onAddHTML) {\n      const wrapperDiv = document.createElement('div');\n      document.body.appendChild(wrapperDiv);\n      wrapperDiv.style.position = 'relative';\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '10px';\n      div.style.bottom = '10px';\n      div.style.width = '300px';\n      div.style.background = 'white';\n      wrapperDiv.appendChild(this.gl.canvas);\n      wrapperDiv.appendChild(div);\n      const html = this.props.onAddHTML(div);\n\n      if (html) {\n        div.innerHTML = html;\n      }\n    }\n  }\n\n  _getSizeAndAspect() {\n    const width = this.gl.drawingBufferWidth;\n    const height = this.gl.drawingBufferHeight;\n    let aspect = 1;\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas && canvas.clientHeight) {\n      aspect = canvas.clientWidth / canvas.clientHeight;\n    } else if (width > 0 && height > 0) {\n      aspect = width / height;\n    }\n\n    return {\n      width,\n      height,\n      aspect\n    };\n  }\n\n  _resizeViewport() {\n    if (this.autoResizeViewport) {\n      this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n    }\n  }\n\n  _resizeCanvasDrawingBuffer() {\n    if (this.autoResizeDrawingBuffer) {\n      resizeGLContext(this.gl, {\n        useDevicePixels: this.useDevicePixels\n      });\n    }\n  }\n\n  _createFramebuffer() {\n    if (this.props.createFramebuffer) {\n      this.framebuffer = new Framebuffer(this.gl);\n    }\n  }\n\n  _resizeFramebuffer() {\n    if (this.framebuffer) {\n      this.framebuffer.resize({\n        width: this.gl.drawingBufferWidth,\n        height: this.gl.drawingBufferHeight\n      });\n    }\n  }\n\n  _beginTimers() {\n    this.frameRate.timeEnd();\n    this.frameRate.timeStart();\n\n    if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n      this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n    }\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.beginTimeElapsedQuery();\n    }\n\n    this.cpuTime.timeStart();\n  }\n\n  _endTimers() {\n    this.cpuTime.timeEnd();\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.end();\n    }\n  }\n\n  _startEventHandling() {\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas) {\n      canvas.addEventListener('mousemove', this._onMousemove);\n      canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }\n\n  _onMousemove(e) {\n    this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n  }\n\n  _onMouseleave(e) {\n    this.animationProps._mousePosition = null;\n  }\n\n}\n//# sourceMappingURL=animation-loop.js.map","const INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n\nfunction some(array, predict) {\n  for (let i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  const oldHandler = PointerEventInput.prototype.handler;\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    const store = this.store;\n\n    if (ev.button > 0 && ev.type === 'pointerdown') {\n      if (!some(store, e => e.pointerId === ev.pointerId)) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n}\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    let eventType = MOUSE_INPUT_MAP[ev.type];\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    }\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}\n//# sourceMappingURL=hammer-overrides.js.map","import hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport const Manager = hammerjs.Manager;\nexport default hammerjs;\n//# sourceMappingURL=hammer.browser.js.map","import Hammer from './utils/hammer';\nexport const RECOGNIZERS = Hammer ? [[Hammer.Pan, {\n  event: 'tripan',\n  pointers: 3,\n  threshold: 0,\n  enable: false\n}], [Hammer.Rotate, {\n  enable: false\n}], [Hammer.Pinch, {\n  enable: false\n}], [Hammer.Swipe, {\n  enable: false\n}], [Hammer.Pan, {\n  threshold: 0,\n  enable: false\n}], [Hammer.Press, {\n  enable: false\n}], [Hammer.Tap, {\n  event: 'doubletap',\n  taps: 2,\n  enable: false\n}], [Hammer.Tap, {\n  event: 'anytap',\n  enable: false\n}], [Hammer.Tap, {\n  enable: false\n}]] : null;\nexport const RECOGNIZER_COMPATIBLE_MAP = {\n  tripan: ['rotate', 'pinch', 'pan'],\n  rotate: ['pinch'],\n  pinch: ['pan'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n};\nexport const RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\nexport const BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\nexport const INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: ['wheel', 'mousewheel']\n};\nexport const EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  tripan: 'tripan',\n  tripanstart: 'tripan',\n  tripanmove: 'tripan',\n  tripanup: 'tripan',\n  tripandown: 'tripan',\n  tripanleft: 'tripan',\n  tripanright: 'tripan',\n  tripanend: 'tripan',\n  tripancancel: 'tripan',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\nexport const GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};\n//# sourceMappingURL=constants.js.map","import { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nconst firefox = userAgent.indexOf('firefox') !== -1;\nconst {\n  WHEEL_EVENTS\n} = INPUT_EVENT_TYPES;\nconst EVENT_TYPE = 'wheel';\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\nconst SHIFT_MULTIPLIER = 0.25;\nexport default class WheelInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent, passiveSupported ? {\n      passive: false\n    } : false));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === EVENT_TYPE) {\n      this.options.enable = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    if (!this.options.enable) {\n      return;\n    }\n\n    let value = event.deltaY;\n\n    if (window.WheelEvent) {\n      if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n        value /= window.devicePixelRatio;\n      }\n\n      if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n        value *= WHEEL_DELTA_PER_LINE;\n      }\n    }\n\n    const wheelPosition = {\n      x: event.clientX,\n      y: event.clientY\n    };\n\n    if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n      value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n    }\n\n    if (event.shiftKey && value) {\n      value = value * SHIFT_MULTIPLIER;\n    }\n\n    this._onWheel(event, -value, wheelPosition);\n  }\n\n  _onWheel(srcEvent, delta, position) {\n    this.callback({\n      type: EVENT_TYPE,\n      center: position,\n      delta,\n      srcEvent,\n      pointerType: 'mouse',\n      target: srcEvent.target\n    });\n  }\n\n}\n//# sourceMappingURL=wheel-input.js.map","import { INPUT_EVENT_TYPES } from '../constants';\nconst {\n  MOUSE_EVENTS\n} = INPUT_EVENT_TYPES;\nconst MOVE_EVENT_TYPE = 'pointermove';\nconst OVER_EVENT_TYPE = 'pointerover';\nconst OUT_EVENT_TYPE = 'pointerout';\nconst LEAVE_EVENT_TYPE = 'pointerleave';\nexport default class MoveInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === MOVE_EVENT_TYPE) {\n      this.enableMoveEvent = enabled;\n    }\n\n    if (eventType === OVER_EVENT_TYPE) {\n      this.enableOverEvent = enabled;\n    }\n\n    if (eventType === OUT_EVENT_TYPE) {\n      this.enableOutEvent = enabled;\n    }\n\n    if (eventType === LEAVE_EVENT_TYPE) {\n      this.enableLeaveEvent = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    this.handleOverEvent(event);\n    this.handleOutEvent(event);\n    this.handleLeaveEvent(event);\n    this.handleMoveEvent(event);\n  }\n\n  handleOverEvent(event) {\n    if (this.enableOverEvent) {\n      if (event.type === 'mouseover') {\n        this.callback({\n          type: OVER_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleOutEvent(event) {\n    if (this.enableOutEvent) {\n      if (event.type === 'mouseout') {\n        this.callback({\n          type: OUT_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleLeaveEvent(event) {\n    if (this.enableLeaveEvent) {\n      if (event.type === 'mouseleave') {\n        this.callback({\n          type: LEAVE_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleMoveEvent(event) {\n    if (this.enableMoveEvent) {\n      switch (event.type) {\n        case 'mousedown':\n          if (event.button >= 0) {\n            this.pressed = true;\n          }\n\n          break;\n\n        case 'mousemove':\n          if (event.which === 0) {\n            this.pressed = false;\n          }\n\n          if (!this.pressed) {\n            this.callback({\n              type: MOVE_EVENT_TYPE,\n              srcEvent: event,\n              pointerType: 'mouse',\n              target: event.target\n            });\n          }\n\n          break;\n\n        case 'mouseup':\n          this.pressed = false;\n          break;\n\n        default:\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=move-input.js.map","import { INPUT_EVENT_TYPES } from '../constants';\nconst {\n  KEY_EVENTS\n} = INPUT_EVENT_TYPES;\nconst DOWN_EVENT_TYPE = 'keydown';\nconst UP_EVENT_TYPE = 'keyup';\nexport default class KeyInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n    this.events = KEY_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.tabIndex = options.tabIndex || 0;\n    element.style.outline = 'none';\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === DOWN_EVENT_TYPE) {\n      this.enableDownEvent = enabled;\n    }\n\n    if (eventType === UP_EVENT_TYPE) {\n      this.enableUpEvent = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    const targetElement = event.target || event.srcElement;\n\n    if (targetElement.tagName === 'INPUT' && targetElement.type === 'text' || targetElement.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (this.enableDownEvent && event.type === 'keydown') {\n      this.callback({\n        type: DOWN_EVENT_TYPE,\n        srcEvent: event,\n        key: event.key,\n        target: event.target\n      });\n    }\n\n    if (this.enableUpEvent && event.type === 'keyup') {\n      this.callback({\n        type: UP_EVENT_TYPE,\n        srcEvent: event,\n        key: event.key,\n        target: event.target\n      });\n    }\n  }\n\n}\n//# sourceMappingURL=key-input.js.map","const EVENT_TYPE = 'contextmenu';\nexport default class ContextmenuInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  destroy() {\n    this.element.removeEventListener('contextmenu', this.handleEvent);\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === EVENT_TYPE) {\n      this.options.enable = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    if (!this.options.enable) {\n      return;\n    }\n\n    this.callback({\n      type: EVENT_TYPE,\n      center: {\n        x: event.clientX,\n        y: event.clientY\n      },\n      srcEvent: event,\n      pointerType: 'mouse',\n      target: event.target\n    });\n  }\n\n}\n//# sourceMappingURL=contextmenu-input.js.map","const DOWN_EVENT = 1;\nconst MOVE_EVENT = 2;\nconst UP_EVENT = 4;\nconst MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n};\nconst MOUSE_EVENT_WHICH_LEFT = 1;\nconst MOUSE_EVENT_WHICH_MIDDLE = 2;\nconst MOUSE_EVENT_WHICH_RIGHT = 3;\nconst MOUSE_EVENT_BUTTON_LEFT = 0;\nconst MOUSE_EVENT_BUTTON_MIDDLE = 1;\nconst MOUSE_EVENT_BUTTON_RIGHT = 2;\nconst MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nconst MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nconst MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\nexport function whichButtons(event) {\n  const eventType = MOUSE_EVENTS[event.srcEvent.type];\n\n  if (!eventType) {\n    return null;\n  }\n\n  const {\n    buttons,\n    button,\n    which\n  } = event.srcEvent;\n  let leftButton = false;\n  let middleButton = false;\n  let rightButton = false;\n\n  if (eventType === UP_EVENT || eventType === MOVE_EVENT && !Number.isFinite(buttons)) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {\n    leftButton,\n    middleButton,\n    rightButton\n  };\n}\nexport function getOffsetPosition(event, rootElement) {\n  const {\n    srcEvent\n  } = event;\n\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    return null;\n  }\n\n  const center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n  const rect = rootElement.getBoundingClientRect();\n  const scaleX = rect.width / rootElement.offsetWidth || 1;\n  const scaleY = rect.height / rootElement.offsetHeight || 1;\n  const offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n  return {\n    center,\n    offsetCenter\n  };\n}\n//# sourceMappingURL=event-utils.js.map","import { whichButtons, getOffsetPosition } from './event-utils';\nconst DEFAULT_OPTIONS = {\n  srcElement: 'root',\n  priority: 0\n};\nexport default class EventRegistrar {\n  constructor(eventManager) {\n    this.eventManager = eventManager;\n    this.handlers = [];\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n    this._active = false;\n  }\n\n  isEmpty() {\n    return !this._active;\n  }\n\n  add(type, handler, opts, once = false, passive = false) {\n    const {\n      handlers,\n      handlersByElement\n    } = this;\n\n    if (opts && (typeof opts !== 'object' || opts.addEventListener)) {\n      opts = {\n        srcElement: opts\n      };\n    }\n\n    opts = opts ? Object.assign({}, DEFAULT_OPTIONS, opts) : DEFAULT_OPTIONS;\n    let entries = handlersByElement.get(opts.srcElement);\n\n    if (!entries) {\n      entries = [];\n      handlersByElement.set(opts.srcElement, entries);\n    }\n\n    const entry = {\n      type,\n      handler,\n      srcElement: opts.srcElement,\n      priority: opts.priority\n    };\n\n    if (once) {\n      entry.once = true;\n    }\n\n    if (passive) {\n      entry.passive = true;\n    }\n\n    handlers.push(entry);\n    this._active = this._active || !entry.passive;\n    let insertPosition = entries.length - 1;\n\n    while (insertPosition >= 0) {\n      if (entries[insertPosition].priority >= entry.priority) {\n        break;\n      }\n\n      insertPosition--;\n    }\n\n    entries.splice(insertPosition + 1, 0, entry);\n  }\n\n  remove(type, handler) {\n    const {\n      handlers,\n      handlersByElement\n    } = this;\n\n    for (let i = handlers.length - 1; i >= 0; i--) {\n      const entry = handlers[i];\n\n      if (entry.type === type && entry.handler === handler) {\n        handlers.splice(i, 1);\n        const entries = handlersByElement.get(entry.srcElement);\n        entries.splice(entries.indexOf(entry), 1);\n\n        if (entries.length === 0) {\n          handlersByElement.delete(entry.srcElement);\n        }\n      }\n    }\n\n    this._active = handlers.some(entry => !entry.passive);\n  }\n\n  handleEvent(event) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    const mjolnirEvent = this._normalizeEvent(event);\n\n    let target = event.srcEvent.target;\n\n    while (target && target !== mjolnirEvent.rootElement) {\n      this._emit(mjolnirEvent, target);\n\n      if (mjolnirEvent.handled) {\n        return;\n      }\n\n      target = target.parentNode;\n    }\n\n    this._emit(mjolnirEvent, 'root');\n  }\n\n  _emit(event, srcElement) {\n    const entries = this.handlersByElement.get(srcElement);\n\n    if (entries) {\n      let immediatePropagationStopped = false;\n\n      const stopPropagation = () => {\n        event.handled = true;\n      };\n\n      const stopImmediatePropagation = () => {\n        event.handled = true;\n        immediatePropagationStopped = true;\n      };\n\n      const entriesToRemove = [];\n\n      for (let i = 0; i < entries.length; i++) {\n        const {\n          type,\n          handler,\n          once\n        } = entries[i];\n        handler(Object.assign({}, event, {\n          type,\n          stopPropagation,\n          stopImmediatePropagation\n        }));\n\n        if (once) {\n          entriesToRemove.push(entries[i]);\n        }\n\n        if (immediatePropagationStopped) {\n          break;\n        }\n      }\n\n      for (let i = 0; i < entriesToRemove.length; i++) {\n        const {\n          type,\n          handler\n        } = entriesToRemove[i];\n        this.remove(type, handler);\n      }\n    }\n  }\n\n  _normalizeEvent(event) {\n    const rootElement = this.eventManager.element;\n    return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n      handled: false,\n      rootElement\n    });\n  }\n\n}\n//# sourceMappingURL=event-registrar.js.map","import { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nconst DEFAULT_OPTIONS = {\n  events: null,\n  recognizers: null,\n  recognizerOptions: {},\n  Manager,\n  touchAction: 'none',\n  tabIndex: 0\n};\nexport default class EventManager {\n  constructor(element = null, options = {}) {\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n    this.setElement(element);\n    const {\n      events\n    } = options;\n\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  setElement(element) {\n    if (this.element) {\n      this.destroy();\n    }\n\n    this.element = element;\n\n    if (!element) {\n      return;\n    }\n\n    const {\n      options\n    } = this;\n    const ManagerClass = options.Manager;\n    this.manager = new ManagerClass(element, {\n      touchAction: options.touchAction,\n      recognizers: options.recognizers || RECOGNIZERS\n    }).on('hammer.input', this._onBasicInput);\n\n    if (!options.recognizers) {\n      Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(name => {\n        const recognizer = this.manager.get(name);\n\n        if (recognizer) {\n          RECOGNIZER_COMPATIBLE_MAP[name].forEach(otherName => {\n            recognizer.recognizeWith(otherName);\n          });\n        }\n      });\n    }\n\n    for (const recognizerName in options.recognizerOptions) {\n      const recognizer = this.manager.get(recognizerName);\n\n      if (recognizer) {\n        const recognizerOption = options.recognizerOptions[recognizerName];\n        delete recognizerOption.enable;\n        recognizer.set(recognizerOption);\n      }\n    }\n\n    this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.moveInput = new MoveInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.keyInput = new KeyInput(element, this._onOtherEvent, {\n      enable: false,\n      tabIndex: options.tabIndex\n    });\n    this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n      enable: false\n    });\n\n    for (const [eventAlias, eventRegistrar] of this.events) {\n      if (!eventRegistrar.isEmpty()) {\n        this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n        this.manager.on(eventAlias, eventRegistrar.handleEvent);\n      }\n    }\n  }\n\n  destroy() {\n    if (this.element) {\n      this.wheelInput.destroy();\n      this.moveInput.destroy();\n      this.keyInput.destroy();\n      this.contextmenuInput.destroy();\n      this.manager.destroy();\n      this.wheelInput = null;\n      this.moveInput = null;\n      this.keyInput = null;\n      this.contextmenuInput = null;\n      this.manager = null;\n      this.element = null;\n    }\n  }\n\n  on(event, handler, opts) {\n    this._addEventHandler(event, handler, opts, false);\n  }\n\n  once(event, handler, opts) {\n    this._addEventHandler(event, handler, opts, true);\n  }\n\n  watch(event, handler, opts) {\n    this._addEventHandler(event, handler, opts, false, true);\n  }\n\n  off(event, handler) {\n    this._removeEventHandler(event, handler);\n  }\n\n  _toggleRecognizer(name, enabled) {\n    const {\n      manager\n    } = this;\n\n    if (!manager) {\n      return;\n    }\n\n    const recognizer = manager.get(name);\n\n    if (recognizer && recognizer.options.enable !== enabled) {\n      recognizer.set({\n        enable: enabled\n      });\n      const fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n\n      if (fallbackRecognizers && !this.options.recognizers) {\n        fallbackRecognizers.forEach(otherName => {\n          const otherRecognizer = manager.get(otherName);\n\n          if (enabled) {\n            otherRecognizer.requireFailure(name);\n            recognizer.dropRequireFailure(otherName);\n          } else {\n            otherRecognizer.dropRequireFailure(name);\n          }\n        });\n      }\n    }\n\n    this.wheelInput.enableEventType(name, enabled);\n    this.moveInput.enableEventType(name, enabled);\n    this.keyInput.enableEventType(name, enabled);\n    this.contextmenuInput.enableEventType(name, enabled);\n  }\n\n  _addEventHandler(event, handler, opts, once, passive) {\n    if (typeof event !== 'string') {\n      opts = handler;\n\n      for (const eventName in event) {\n        this._addEventHandler(eventName, event[eventName], opts, once, passive);\n      }\n\n      return;\n    }\n\n    const {\n      manager,\n      events\n    } = this;\n    const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n    let eventRegistrar = events.get(eventAlias);\n\n    if (!eventRegistrar) {\n      eventRegistrar = new EventRegistrar(this);\n      events.set(eventAlias, eventRegistrar);\n      eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n\n      if (manager) {\n        manager.on(eventAlias, eventRegistrar.handleEvent);\n      }\n    }\n\n    eventRegistrar.add(event, handler, opts, once, passive);\n\n    if (!eventRegistrar.isEmpty()) {\n      this._toggleRecognizer(eventRegistrar.recognizerName, true);\n    }\n  }\n\n  _removeEventHandler(event, handler) {\n    if (typeof event !== 'string') {\n      for (const eventName in event) {\n        this._removeEventHandler(eventName, event[eventName]);\n      }\n\n      return;\n    }\n\n    const {\n      events\n    } = this;\n    const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n    const eventRegistrar = events.get(eventAlias);\n\n    if (!eventRegistrar) {\n      return;\n    }\n\n    eventRegistrar.remove(event, handler);\n\n    if (eventRegistrar.isEmpty()) {\n      const {\n        recognizerName\n      } = eventRegistrar;\n      let isRecognizerUsed = false;\n\n      for (const eh of events.values()) {\n        if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n          isRecognizerUsed = true;\n          break;\n        }\n      }\n\n      if (!isRecognizerUsed) {\n        this._toggleRecognizer(recognizerName, false);\n      }\n    }\n  }\n\n  _onBasicInput(event) {\n    const {\n      srcEvent\n    } = event;\n    const alias = BASIC_EVENT_ALIASES[srcEvent.type];\n\n    if (alias) {\n      this.manager.emit(alias, event);\n    }\n  }\n\n  _onOtherEvent(event) {\n    this.manager.emit(event.type, event);\n  }\n\n}\n//# sourceMappingURL=event-manager.js.map","import LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nconst getCursor = ({\n  isDragging\n}) => isDragging ? 'grabbing' : 'grab';\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    eventRecognizerOptions: PropTypes.object,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onInteractionStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool,\n    _pickable: PropTypes.bool,\n    _typedArrayManagerProps: PropTypes.object\n  };\n}\n\nconst defaultProps = {\n  id: '',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: (error, layer) => log.error(error)(),\n  _onMetrics: null,\n  getCursor,\n  debug: false,\n  drawPickingColors: false\n};\nexport default class Deck {\n  constructor(props) {\n    props = { ...defaultProps,\n      ...props\n    };\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isHovering: false,\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setProps(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  finalize() {\n    this.animationLoop.stop();\n    this.animationLoop = null;\n    this._lastPointerDownInfo = null;\n\n    if (this.layerManager) {\n      this.layerManager.finalize();\n      this.layerManager = null;\n      this.viewManager.finalize();\n      this.viewManager = null;\n      this.effectManager.finalize();\n      this.effectManager = null;\n      this.deckRenderer.finalize();\n      this.deckRenderer = null;\n      this.deckPicker.finalize();\n      this.deckPicker = null;\n      this.eventManager.destroy();\n      this.eventManager = null;\n      this.tooltip.remove();\n      this.tooltip = null;\n    }\n\n    if (!this.props.canvas && !this.props.gl && this.canvas) {\n      this.canvas.parentElement.removeChild(this.canvas);\n      this.canvas = null;\n    }\n  }\n\n  setProps(props) {\n    this.stats.get('setProps Time').timeStart();\n\n    if ('onLayerHover' in props) {\n      log.removed('onLayerHover', 'onHover')();\n    }\n\n    if ('onLayerClick' in props) {\n      log.removed('onLayerClick', 'onClick')();\n    }\n\n    if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n      this.viewState = props.initialViewState;\n    }\n\n    Object.assign(this.props, props);\n\n    this._setCanvasSize(this.props);\n\n    const resolvedProps = Object.create(this.props);\n    Object.assign(resolvedProps, {\n      views: this._getViews(),\n      width: this.width,\n      height: this.height,\n      viewState: this._getViewState()\n    });\n    this.animationLoop.setProps(resolvedProps);\n\n    if (this.layerManager) {\n      this.viewManager.setProps(resolvedProps);\n      this.layerManager.activateViewport(this.getViewports()[0]);\n      this.layerManager.setProps(resolvedProps);\n      this.effectManager.setProps(resolvedProps);\n      this.deckRenderer.setProps(resolvedProps);\n      this.deckPicker.setProps(resolvedProps);\n    }\n\n    this.stats.get('setProps Time').timeEnd();\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    if (this.props._animate) {\n      return 'Deck._animate';\n    }\n\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    const viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n    const layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n    const effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n    const deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n    redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n    return redraw;\n  }\n\n  redraw(force) {\n    if (!this.layerManager) {\n      return;\n    }\n\n    const redrawReason = force || this.needsRedraw({\n      clearRedrawFlags: true\n    });\n\n    if (!redrawReason) {\n      return;\n    }\n\n    this.stats.get('Redraw Count').incrementCount();\n\n    if (this.props._customRender) {\n      this.props._customRender(redrawReason);\n    } else {\n      this._drawLayers(redrawReason);\n    }\n  }\n\n  getViews() {\n    return this.viewManager.views;\n  }\n\n  getViewports(rect) {\n    return this.viewManager.getViewports(rect);\n  }\n\n  pickObject(opts) {\n    const infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n    return infos.length ? infos[0] : null;\n  }\n\n  pickMultipleObjects(opts) {\n    opts.depth = opts.depth || 10;\n    return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n  }\n\n  pickObjects(opts) {\n    return this._pick('pickObjects', 'pickObjects Time', opts);\n  }\n\n  _addResources(resources, forceUpdate = false) {\n    for (const id in resources) {\n      this.layerManager.resourceManager.add({\n        resourceId: id,\n        data: resources[id],\n        forceUpdate\n      });\n    }\n  }\n\n  _removeResources(resourceIds) {\n    for (const id of resourceIds) {\n      this.layerManager.resourceManager.remove(id);\n    }\n  }\n\n  _pick(method, statKey, opts) {\n    const {\n      stats\n    } = this;\n    stats.get('Pick Count').incrementCount();\n    stats.get(statKey).timeStart();\n    const infos = this.deckPicker[method]({\n      layers: this.layerManager.getLayers(opts),\n      views: this.viewManager.getViews(),\n      viewports: this.getViewports(opts),\n      onViewportActive: this.layerManager.activateViewport,\n      ...opts\n    });\n    stats.get(statKey).timeEnd();\n    return infos;\n  }\n\n  _createCanvas(props) {\n    let canvas = props.canvas;\n\n    if (typeof canvas === 'string') {\n      canvas = document.getElementById(canvas);\n      assert(canvas);\n    }\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.id = props.id || 'deckgl-overlay';\n      const parent = props.parent || document.body;\n      parent.appendChild(canvas);\n    }\n\n    Object.assign(canvas.style, props.style);\n    return canvas;\n  }\n\n  _setCanvasSize(props) {\n    if (!this.canvas) {\n      return;\n    }\n\n    let {\n      width,\n      height\n    } = props;\n\n    if (width || width === 0) {\n      width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n      this.canvas.style.width = width;\n    }\n\n    if (height || height === 0) {\n      height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.height = height;\n    }\n  }\n\n  _updateCanvasSize() {\n    if (this._checkForCanvasSizeChange()) {\n      const {\n        width,\n        height\n      } = this;\n      this.viewManager.setProps({\n        width,\n        height\n      });\n      this.props.onResize({\n        width: this.width,\n        height: this.height\n      });\n    }\n  }\n\n  _checkForCanvasSizeChange() {\n    const {\n      canvas\n    } = this;\n\n    if (!canvas) {\n      return false;\n    }\n\n    const newWidth = canvas.clientWidth || canvas.width;\n    const newHeight = canvas.clientHeight || canvas.height;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      this.width = newWidth;\n      this.height = newHeight;\n      return true;\n    }\n\n    return false;\n  }\n\n  _createAnimationLoop(props) {\n    const {\n      width,\n      height,\n      gl,\n      glOptions,\n      debug,\n      onError,\n      onBeforeRender,\n      onAfterRender,\n      useDevicePixels,\n      autoResizeDrawingBuffer\n    } = props;\n    return new AnimationLoop({\n      width,\n      height,\n      useDevicePixels,\n      autoResizeDrawingBuffer,\n      autoResizeViewport: false,\n      gl,\n      onCreateContext: opts => createGLContext({ ...glOptions,\n        ...opts,\n        canvas: this.canvas,\n        debug,\n        onContextLost: () => this._onContextLost()\n      }),\n      onInitialize: context => this._setGLContext(context.gl),\n      onRender: this._onRenderFrame.bind(this),\n      onBeforeRender,\n      onAfterRender,\n      onError\n    });\n  }\n\n  _getViewState() {\n    return this.props.viewState || this.viewState;\n  }\n\n  _getViews() {\n    let views = this.props.views || [new MapView({\n      id: 'default-view'\n    })];\n    views = Array.isArray(views) ? views : [views];\n\n    if (views.length && this.props.controller) {\n      views[0].props.controller = this.props.controller;\n    }\n\n    return views;\n  }\n\n  _onContextLost() {\n    const {\n      onError\n    } = this.props;\n\n    if (this.animationLoop && onError) {\n      onError(new Error(\"WebGL context is lost\"));\n    }\n  }\n\n  _onPointerMove(event) {\n    const {\n      _pickRequest\n    } = this;\n\n    if (event.type === 'pointerleave') {\n      _pickRequest.x = -1;\n      _pickRequest.y = -1;\n      _pickRequest.radius = 0;\n    } else if (event.leftButton || event.rightButton) {\n      return;\n    } else {\n      const pos = event.offsetCenter;\n\n      if (!pos) {\n        return;\n      }\n\n      _pickRequest.x = pos.x;\n      _pickRequest.y = pos.y;\n      _pickRequest.radius = this.props.pickingRadius;\n    }\n\n    if (this.layerManager) {\n      this.layerManager.context.mousePosition = {\n        x: _pickRequest.x,\n        y: _pickRequest.y\n      };\n    }\n\n    _pickRequest.event = event;\n    _pickRequest.mode = 'hover';\n  }\n\n  _pickAndCallback() {\n    const {\n      _pickRequest\n    } = this;\n\n    if (_pickRequest.event) {\n      const {\n        result,\n        emptyInfo\n      } = this._pick('pickObject', 'pickObject Time', _pickRequest);\n\n      this.interactiveState.isHovering = result.length > 0;\n      let pickedInfo = emptyInfo;\n      let handled = false;\n\n      for (const info of result) {\n        pickedInfo = info;\n        handled = info.layer.onHover(info, _pickRequest.event);\n      }\n\n      if (!handled && this.props.onHover) {\n        this.props.onHover(pickedInfo, _pickRequest.event);\n      }\n\n      if (this.props.getTooltip) {\n        const displayInfo = this.props.getTooltip(pickedInfo);\n        this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n      }\n\n      _pickRequest.event = null;\n    }\n  }\n\n  _updateCursor() {\n    const container = this.props.parent || this.canvas;\n\n    if (container) {\n      container.style.cursor = this.props.getCursor(this.interactiveState);\n    }\n  }\n\n  _setGLContext(gl) {\n    if (this.layerManager) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.canvas = gl.canvas;\n      instrumentGLContext(gl, {\n        enable: true,\n        copyState: true\n      });\n    }\n\n    this.tooltip = new Tooltip(this.canvas);\n    setParameters(gl, {\n      blend: true,\n      blendFunc: [770, 771, 1, 771],\n      polygonOffsetFill: true,\n      depthTest: true,\n      depthFunc: 515\n    });\n    this.props.onWebGLInitialized(gl);\n    const timeline = new Timeline();\n    timeline.play();\n    this.animationLoop.attachTimeline(timeline);\n    this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n      touchAction: this.props.touchAction,\n      recognizerOptions: this.props.eventRecognizerOptions,\n      events: {\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerleave: this._onPointerMove\n      }\n    });\n\n    for (const eventType in EVENTS) {\n      this.eventManager.on(eventType, this._onEvent);\n    }\n\n    this.viewManager = new ViewManager({\n      timeline,\n      eventManager: this.eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this),\n      onInteractionStateChange: this._onInteractionStateChange.bind(this),\n      views: this._getViews(),\n      viewState: this._getViewState(),\n      width: this.width,\n      height: this.height\n    });\n    const viewport = this.viewManager.getViewports()[0];\n    this.layerManager = new LayerManager(gl, {\n      deck: this,\n      stats: this.stats,\n      viewport,\n      timeline\n    });\n    this.effectManager = new EffectManager();\n    this.deckRenderer = new DeckRenderer(gl);\n    this.deckPicker = new DeckPicker(gl);\n    this.setProps(this.props);\n\n    this._updateCanvasSize();\n\n    this.props.onLoad();\n  }\n\n  _drawLayers(redrawReason, renderOptions) {\n    const {\n      gl\n    } = this.layerManager.context;\n    setParameters(gl, this.props.parameters);\n    this.props.onBeforeRender({\n      gl\n    });\n    this.deckRenderer.renderLayers({\n      target: this.props._framebuffer,\n      layers: this.layerManager.getLayers(),\n      viewports: this.viewManager.getViewports(),\n      onViewportActive: this.layerManager.activateViewport,\n      views: this.viewManager.getViews(),\n      pass: 'screen',\n      redrawReason,\n      effects: this.effectManager.getEffects(),\n      ...renderOptions\n    });\n    this.props.onAfterRender({\n      gl\n    });\n  }\n\n  _onRenderFrame(animationProps) {\n    this._getFrameStats();\n\n    if (this._metricsCounter++ % 60 === 0) {\n      this._getMetrics();\n\n      this.stats.reset();\n      log.table(4, this.metrics)();\n\n      if (this.props._onMetrics) {\n        this.props._onMetrics(this.metrics);\n      }\n    }\n\n    this._updateCanvasSize();\n\n    this._updateCursor();\n\n    if (this.tooltip.isVisible && this.viewManager.needsRedraw()) {\n      this.tooltip.setTooltip(null);\n    }\n\n    this.layerManager.updateLayers();\n\n    this._pickAndCallback();\n\n    this.redraw(false);\n\n    if (this.viewManager) {\n      this.viewManager.updateViewStates();\n    }\n  }\n\n  _onViewStateChange(params) {\n    const viewState = this.props.onViewStateChange(params) || params.viewState;\n\n    if (this.viewState) {\n      this.viewState = { ...this.viewState,\n        [params.viewId]: viewState\n      };\n\n      if (!this.props.viewState) {\n        if (this.viewManager) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }\n\n  _onInteractionStateChange(interactionState) {\n    this.interactiveState.isDragging = interactionState.isDragging;\n    this.props.onInteractionStateChange(interactionState);\n  }\n\n  _onEvent(event) {\n    const eventOptions = EVENTS[event.type];\n    const pos = event.offsetCenter;\n\n    if (!eventOptions || !pos) {\n      return;\n    }\n\n    const layers = this.layerManager.getLayers();\n    const info = this.deckPicker.getLastPickedObject({\n      x: pos.x,\n      y: pos.y,\n      layers,\n      viewports: this.getViewports(pos)\n    }, this._lastPointerDownInfo);\n    const {\n      layer\n    } = info;\n    const layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n    const rootHandler = this.props[eventOptions.handler];\n    let handled = false;\n\n    if (layerHandler) {\n      handled = layerHandler.call(layer, info, event);\n    }\n\n    if (!handled && rootHandler) {\n      rootHandler(info, event);\n    }\n  }\n\n  _onPointerDown(event) {\n    const pos = event.offsetCenter;\n\n    const pickedInfo = this._pick('pickObject', 'pickObject Time', {\n      x: pos.x,\n      y: pos.y,\n      radius: this.props.pickingRadius\n    });\n\n    this._lastPointerDownInfo = pickedInfo.result[0] || pickedInfo.emptyInfo;\n  }\n\n  _getFrameStats() {\n    const {\n      stats\n    } = this;\n    stats.get('frameRate').timeEnd();\n    stats.get('frameRate').timeStart();\n    const animationLoopStats = this.animationLoop.stats;\n    stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n    stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n  }\n\n  _getMetrics() {\n    const {\n      metrics,\n      stats\n    } = this;\n    metrics.fps = stats.get('frameRate').getHz();\n    metrics.setPropsTime = stats.get('setProps Time').time;\n    metrics.updateAttributesTime = stats.get('Update Attributes').time;\n    metrics.framesRedrawn = stats.get('Redraw Count').count;\n    metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n    metrics.pickCount = stats.get('Pick Count').count;\n    metrics.gpuTime = stats.get('GPU Time').time;\n    metrics.cpuTime = stats.get('CPU Time').time;\n    metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n    metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n    const memoryStats = lumaStats.get('Memory Usage');\n    metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n    metrics.textureMemory = memoryStats.get('Texture Memory').count;\n    metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n    metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n  }\n\n}\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;\n//# sourceMappingURL=deck.js.map","import { Deck } from '@deck.gl/core';\nimport { Matrix4 } from 'math.gl';\nconst MAX_LATITUDE = 85.05113;\nexport function createDeckInstance(map, overlay, deck, props) {\n  if (deck) {\n    if (deck.props.userData._googleMap === map) {\n      return deck;\n    }\n\n    destroyDeckInstance(deck);\n  }\n\n  const eventListeners = {\n    click: null,\n    dblclick: null,\n    mousemove: null,\n    mouseout: null\n  };\n  deck = new Deck({ ...props,\n    style: null,\n    parent: getContainer(overlay, props.style),\n    initialViewState: {\n      longitude: 0,\n      latitude: 0,\n      zoom: 1\n    },\n    controller: false,\n    userData: {\n      _googleMap: map,\n      _eventListeners: eventListeners\n    }\n  });\n\n  for (const eventType in eventListeners) {\n    eventListeners[eventType] = map.addListener(eventType, evt => handleMouseEvent(deck, eventType, evt));\n  }\n\n  return deck;\n}\n\nfunction getContainer(overlay, style) {\n  const container = document.createElement('div');\n  container.style.position = 'absolute';\n  Object.assign(container.style, style);\n\n  if (overlay.getPanes) {\n    overlay.getPanes().overlayLayer.appendChild(container);\n  } else {\n    overlay.getMap().getDiv().appendChild(container);\n  }\n\n  return container;\n}\n\nexport function destroyDeckInstance(deck) {\n  const {\n    _eventListeners: eventListeners\n  } = deck.props.userData;\n\n  for (const eventType in eventListeners) {\n    eventListeners[eventType].remove();\n  }\n\n  deck.finalize();\n}\nexport function getViewPropsFromOverlay(map, overlay) {\n  const {\n    width,\n    height\n  } = getMapSize(map);\n  const projection = overlay.getProjection();\n  const bounds = map.getBounds();\n  const ne = bounds.getNorthEast();\n  const sw = bounds.getSouthWest();\n  const topRight = projection.fromLatLngToDivPixel(ne);\n  const bottomLeft = projection.fromLatLngToDivPixel(sw);\n  const nwContainerPx = new google.maps.Point(0, 0);\n  const nw = projection.fromContainerPixelToLatLng(nwContainerPx);\n  const nwDivPx = projection.fromLatLngToDivPixel(nw);\n  let leftOffset = nwDivPx.x;\n  let topOffset = nwDivPx.y;\n  const mapWidth = projection.getWorldWidth();\n  const mapCount = Math.ceil(width / mapWidth);\n  leftOffset -= Math.floor(mapCount / 2) * mapWidth;\n  const scale = height ? (bottomLeft.y - topRight.y) / height : 1;\n  const zoom = Math.log2(scale || 1) + map.getZoom() - 1;\n  let centerPx = new google.maps.Point(width / 2, height / 2);\n  const centerContainer = projection.fromContainerPixelToLatLng(centerPx);\n  let latitude = centerContainer.lat();\n  const longitude = centerContainer.lng();\n\n  if (Math.abs(latitude) > MAX_LATITUDE) {\n    latitude = latitude > 0 ? MAX_LATITUDE : -MAX_LATITUDE;\n    const center = new google.maps.LatLng(latitude, longitude);\n    centerPx = projection.fromLatLngToContainerPixel(center);\n    topOffset += centerPx.y - height / 2;\n  }\n\n  return {\n    width,\n    height,\n    left: leftOffset,\n    top: topOffset,\n    zoom,\n    pitch: map.getTilt(),\n    latitude,\n    longitude\n  };\n}\nexport function getViewPropsFromCoordinateTransformer(map, coordinateTransformer) {\n  const {\n    width,\n    height\n  } = getMapSize(map);\n  const {\n    lat: latitude,\n    lng: longitude,\n    heading: bearing,\n    tilt: pitch,\n    zoom\n  } = coordinateTransformer.getCameraParams();\n  const fovy = 25;\n  const aspect = height ? width / height : 1;\n  const near = 0.75;\n  const far = 300000000000000;\n  const projectionMatrix = new Matrix4().perspective({\n    fovy: fovy * Math.PI / 180,\n    aspect,\n    near,\n    far\n  });\n  const focalDistance = 0.5 * projectionMatrix[5];\n  return {\n    width: false,\n    height: false,\n    viewState: {\n      altitude: focalDistance,\n      bearing,\n      latitude,\n      longitude,\n      pitch,\n      projectionMatrix,\n      repeat: true,\n      zoom: zoom - 1\n    }\n  };\n}\n\nfunction getMapSize(map) {\n  const container = map.getDiv().firstChild;\n  return {\n    width: container.offsetWidth,\n    height: container.offsetHeight\n  };\n}\n\nfunction getEventPixel(event, deck) {\n  if (event.pixel) {\n    return event.pixel;\n  }\n\n  const point = deck.getViewports()[0].project([event.latLng.lng(), event.latLng.lat()]);\n  return {\n    x: point[0],\n    y: point[1]\n  };\n}\n\nfunction handleMouseEvent(deck, type, event) {\n  const mockEvent = {\n    type,\n    offsetCenter: getEventPixel(event, deck),\n    srcEvent: event\n  };\n\n  switch (type) {\n    case 'click':\n      deck._lastPointerDownInfo = deck.pickObject({ ...mockEvent.offsetCenter,\n        radius: deck.props.pickingRadius\n      });\n      mockEvent.tapCount = 1;\n\n      deck._onEvent(mockEvent);\n\n      break;\n\n    case 'dblclick':\n      mockEvent.type = 'click';\n      mockEvent.tapCount = 2;\n\n      deck._onEvent(mockEvent);\n\n      break;\n\n    case 'mousemove':\n      mockEvent.type = 'pointermove';\n\n      deck._onPointerMove(mockEvent);\n\n      break;\n\n    case 'mouseout':\n      mockEvent.type = 'pointerleave';\n\n      deck._onPointerMove(mockEvent);\n\n      break;\n\n    default:\n      return;\n  }\n}\n//# sourceMappingURL=utils.js.map","import { getParameters, setParameters, withParameters } from '@luma.gl/core';\nimport { createDeckInstance, destroyDeckInstance, getViewPropsFromOverlay, getViewPropsFromCoordinateTransformer } from './utils';\n\nconst HIDE_ALL_LAYERS = () => false;\n\nconst GL_STATE = {\n  depthMask: true,\n  depthTest: true,\n  blend: true,\n  blendFunc: [770, 771, 1, 771],\n  blendEquation: 32774\n};\nexport default class GoogleMapsOverlay {\n  constructor(props) {\n    this.props = {};\n    this._map = null;\n    this.setProps(props);\n  }\n\n  setMap(map) {\n    if (map === this._map) {\n      return;\n    }\n\n    if (this._map) {\n      this._overlay.setMap(null);\n\n      this._map = null;\n    }\n\n    if (map) {\n      this._map = map;\n      const {\n        UNINITIALIZED\n      } = google.maps.RenderingType;\n      const renderingType = map.getRenderingType();\n\n      if (renderingType !== UNINITIALIZED) {\n        this._createOverlay(map);\n      } else {\n        map.addListener('renderingtype_changed', () => {\n          this._createOverlay(map);\n        });\n      }\n    }\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n\n    if (this._deck) {\n      if (props.style) {\n        Object.assign(this._deck.canvas.parentElement.style, props.style);\n        props.style = null;\n      }\n\n      this._deck.setProps(props);\n    }\n  }\n\n  pickObject(params) {\n    return this._deck && this._deck.pickObject(params);\n  }\n\n  pickMultipleObjects(params) {\n    return this._deck && this._deck.pickMultipleObjects(params);\n  }\n\n  pickObjects(params) {\n    return this._deck && this._deck.pickObjects(params);\n  }\n\n  finalize() {\n    this.setMap(null);\n\n    if (this._deck) {\n      destroyDeckInstance(this._deck);\n      this._deck = null;\n    }\n  }\n\n  _createOverlay(map) {\n    const {\n      VECTOR,\n      UNINITIALIZED\n    } = google.maps.RenderingType;\n    const renderingType = map.getRenderingType();\n\n    if (renderingType === UNINITIALIZED) {\n      return;\n    }\n\n    const isVectorMap = renderingType === VECTOR && google.maps.WebglOverlayView;\n    const OverlayView = isVectorMap ? google.maps.WebglOverlayView : google.maps.OverlayView;\n    const overlay = new OverlayView();\n\n    if (isVectorMap) {\n      overlay.onAdd = () => {};\n\n      overlay.onContextLost = this._onContextLost.bind(this);\n      overlay.onContextRestored = this._onContextRestored.bind(this);\n      overlay.onDraw = this._onDrawVector.bind(this);\n    } else {\n      overlay.onAdd = this._onAdd.bind(this);\n      overlay.draw = this._onDrawRaster.bind(this);\n    }\n\n    overlay.onRemove = this._onRemove.bind(this);\n    this._overlay = overlay;\n\n    this._overlay.setMap(map);\n  }\n\n  _onAdd() {\n    this._deck = createDeckInstance(this._map, this._overlay, this._deck, this.props);\n  }\n\n  _onContextRestored(gl) {\n    const _customRender = () => {\n      this._overlay.requestRedraw();\n    };\n\n    const deck = createDeckInstance(this._map, this._overlay, this._deck, {\n      gl,\n      _customRender,\n      ...this.props\n    });\n    this._deck = deck;\n\n    deck.animationLoop._renderFrame = () => {\n      const ab = gl.getParameter(34964);\n      withParameters(gl, {}, () => {\n        deck.animationLoop.onRender();\n      });\n      gl.bindBuffer(34962, ab);\n    };\n  }\n\n  _onContextLost() {\n    if (this._deck) {\n      destroyDeckInstance(this._deck);\n      this._deck = null;\n    }\n  }\n\n  _onRemove() {\n    this._deck.setProps({\n      layerFilter: HIDE_ALL_LAYERS\n    });\n  }\n\n  _onDrawRaster() {\n    const deck = this._deck;\n    const {\n      width,\n      height,\n      left,\n      top,\n      zoom,\n      pitch,\n      latitude,\n      longitude\n    } = getViewPropsFromOverlay(this._map, this._overlay);\n    const canSyncWithGoogleMaps = pitch === 0;\n    const parentStyle = deck.canvas.parentElement.style;\n    parentStyle.left = \"\".concat(left, \"px\");\n    parentStyle.top = \"\".concat(top, \"px\");\n    deck.setProps({\n      width,\n      height,\n      viewState: {\n        latitude,\n        longitude,\n        zoom,\n        repeat: true\n      },\n      layerFilter: canSyncWithGoogleMaps ? this.props.layerFilter : HIDE_ALL_LAYERS\n    });\n    deck.redraw();\n  }\n\n  _onDrawVector(gl, coordinateTransformer) {\n    if (!this._deck || !this._map) {\n      return;\n    }\n\n    const deck = this._deck;\n    deck.setProps({ ...getViewPropsFromCoordinateTransformer(this._map, coordinateTransformer)\n    });\n\n    if (deck.layerManager) {\n      const _framebuffer = getParameters(gl, 36006);\n\n      deck.setProps({\n        _framebuffer\n      });\n      deck.needsRedraw({\n        clearRedrawFlags: true\n      });\n      setParameters(gl, {\n        viewport: [0, 0, gl.canvas.width, gl.canvas.height],\n        scissor: [0, 0, gl.canvas.width, gl.canvas.height],\n        stencilFunc: [519, 0, 255, 519, 0, 255]\n      });\n      withParameters(gl, GL_STATE, () => {\n        deck._drawLayers('google-vector', {\n          clearCanvas: false\n        });\n      });\n    }\n  }\n\n}\n//# sourceMappingURL=google-maps-overlay.js.map","const mapStyle = [\n  {\n    stylers: [\n      {\n        saturation: 90,\n      },\n    ],\n  },\n  {\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#212121',\n      },\n    ],\n  },\n  {\n    elementType: 'labels.icon',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#757575',\n      },\n    ],\n  },\n  {\n    elementType: 'labels.text.stroke',\n    stylers: [\n      {\n        color: '#212121',\n      },\n    ],\n  },\n  {\n    featureType: 'administrative',\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#757575',\n      },\n    ],\n  },\n  {\n    featureType: 'administrative.country',\n    elementType: 'labels',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'administrative.country',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#9e9e9e',\n      },\n    ],\n  },\n  {\n    featureType: 'administrative.land_parcel',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'administrative.locality',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#bdbdbd',\n      },\n    ],\n  },\n  {\n    featureType: 'poi',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#757575',\n      },\n    ],\n  },\n  {\n    featureType: 'poi.park',\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#181818',\n      },\n    ],\n  },\n  {\n    featureType: 'poi.park',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#616161',\n      },\n    ],\n  },\n  {\n    featureType: 'poi.park',\n    elementType: 'labels.text.stroke',\n    stylers: [\n      {\n        color: '#1b1b1b',\n      },\n    ],\n  },\n  {\n    featureType: 'road',\n    elementType: 'geometry.fill',\n    stylers: [\n      {\n        color: '#2c2c2c',\n      },\n    ],\n  },\n  {\n    featureType: 'road',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#8a8a8a',\n      },\n    ],\n  },\n  {\n    featureType: 'road.arterial',\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#373737',\n      },\n    ],\n  },\n  {\n    featureType: 'road.highway',\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#3c3c3c',\n      },\n    ],\n  },\n  {\n    featureType: 'road.highway.controlled_access',\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#4e4e4e',\n      },\n    ],\n  },\n  {\n    featureType: 'road.local',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#616161',\n      },\n    ],\n  },\n  {\n    featureType: 'transit',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#757575',\n      },\n    ],\n  },\n  {\n    featureType: 'water',\n    stylers: [\n      {\n        color: '#ffffff',\n      },\n    ],\n  },\n  {\n    featureType: 'water',\n    elementType: 'geometry',\n    stylers: [\n      {\n        color: '#000000',\n      },\n    ],\n  },\n  {\n    featureType: 'water',\n    elementType: 'labels.text.fill',\n    stylers: [\n      {\n        color: '#3d3d3d',\n      },\n    ],\n  },\n];\nexport default mapStyle;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"auth\"},[_c('div',{staticClass:\"auth-header\"}),_c('div',{staticClass:\"auth-body\"},[_c('div',{staticClass:\"close\",on:{\"click\":function($event){return _vm.setAuthFlag($event)}}},[_vm._v(\"닫기\")]),_c('div',{staticClass:\"auth-list\"},[_c('div',{staticClass:\"company google\",on:{\"click\":function($event){return _vm.fncGMailAuth()}}},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../assets/images/gmail.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"G-Mail로 인증하기\")])])])]),_c('div',{staticClass:\"auth-footer\"},[_c('div',{staticClass:\"auth-direct\"},[_c('div',{staticClass:\"direct-title-wrapper\",on:{\"click\":function($event){return _vm.fncShowDirAuth()}}},[_c('div',{staticClass:\"title\"},[_vm._v(\"다른 이메일로 인증하기\")])]),_c('div',{staticClass:\"direct-input-wrapper\"},[_c('div',{staticClass:\"direct-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dirEmail),expression:\"dirEmail\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"이메일\"},domProps:{\"value\":(_vm.dirEmail)},on:{\"focus\":_vm.fncFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.dirEmail=$event.target.value}}})]),_c('div',{staticClass:\"direct-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dirName),expression:\"dirName\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"이름\"},domProps:{\"value\":(_vm.dirName)},on:{\"focus\":_vm.fncFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.dirName=$event.target.value}}})]),_c('div',{staticClass:\"direct-text\"},[_vm._v(_vm._s(_vm.dirStatus))]),_c('div',{staticClass:\"direct-btn\",on:{\"click\":function($event){return _vm.fncDirAuth()}}},[_vm._v(\"인증\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable no-useless-escape */\n//이메일 주소의 시작은 숫자/알파베소문자/대문자\n//첫자리뒤에는 -_.이 들어올 수 있다.\n//@는 필수로 들어와야한다.\n//@뒤에는 문자가 들어와야한다.\n//.뒤에는 2또는 3 길이의 문자열이 들어와야한다.\n// '^' 입력값의 시작과 일치\n// 표현식? :표현식이 없거나 하나만 포함된다.\n// * : 없거나 있음(여러개 포함)\n//[내부] : 내부문자들중 하나.\n//{2,3} 최소 2개 이상 최대3개 이하\nexport const emailRegExp =\n  /^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/;\n","<template>\n  <div class=\"auth\">\n    <div class=\"auth-header\"></div>\n    <div class=\"auth-body\">\n      <div class=\"close\" @click=\"setAuthFlag($event)\">닫기</div>\n      <div class=\"auth-list\">\n        <div class=\"company google\" @click=\"fncGMailAuth()\">\n          <img class=\"logo\" src=\"../assets/images/gmail.png\" alt=\"\" />\n          <div class=\"title\">G-Mail로 인증하기</div>\n        </div>\n      </div>\n    </div>\n    <div class=\"auth-footer\">\n      <div class=\"auth-direct\">\n        <div class=\"direct-title-wrapper\" @click=\"fncShowDirAuth()\">\n          <div class=\"title\">다른 이메일로 인증하기</div>\n        </div>\n        <div class=\"direct-input-wrapper\">\n          <div class=\"direct-input\">\n            <input\n              type=\"text\"\n              class=\"input\"\n              v-model=\"dirEmail\"\n              placeholder=\"이메일\"\n              @focus=\"fncFocus\"\n            />\n          </div>\n          <div class=\"direct-input\">\n            <input\n              type=\"text\"\n              class=\"input\"\n              v-model=\"dirName\"\n              placeholder=\"이름\"\n              @focus=\"fncFocus\"\n            />\n          </div>\n          <div class=\"direct-text\">{{ dirStatus }}</div>\n          <div class=\"direct-btn\" @click=\"fncDirAuth()\">인증</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions } from 'vuex';\nimport gsap from 'gsap';\nimport { sendEmailAuth } from '../util/firebase.js';\nimport { emailRegExp } from '../util/regExp.js';\nexport default {\n  data() {\n    return {\n      dirFlag: false,\n      dirName: '',\n      dirEmail: '',\n      dirStatus: '',\n    };\n  },\n  computed: {\n    ...mapState(['authStore']),\n    ...mapGetters({ authInfo: 'authStore/AuthInfo' }),\n  },\n  methods: {\n    ...mapActions({\n      setAuthInfo: 'authStore/setAuthInfo',\n      googleSignIn: 'authStore/googleSignIn',\n      googleSignOut: 'authStore/googleSignOut',\n      setError: 'setError',\n    }),\n    fncFocus() {\n      console.log(`focus`);\n      document.querySelector('.direct-input-wrapper').scrollIntoView(true);\n    },\n    setAuthFlag(e) {\n      this.$emit('setShowAuthFlag', false);\n    },\n    //gmail로 인증 이벤트\n    async fncGMailAuth() {\n      if (\n        navigator.userAgent.match(\n          /inapp|NAVER|KAKAOTALK|Snapchat|Line|WirtschaftsWoche|Thunderbird|Instagram|everytimeApp|WhatsApp|Electron|wadiz|AliApp|zumapp|iPhone(.*)Whale|Android(.*)Whale|kakaostory|band|twitter|DaumApps|DaumDevice\\/mobile|FB_IAB|FB4A|FBAN|FBIOS|FBSS|SamsungBrowser\\/[^1]/i\n        )\n      ) {\n        this.setError({\n          message:\n            '카카오/삼성/네이버등의 인앱브라우저의 경우 구글인증이 불가합니다. <br/> 크롬/사파리 브라우저로 접속 하시거나 </br> 다른 이메일로 인증하기를 이용해주세요.',\n          type: 'browser',\n        });\n        return;\n      }\n\n      if (this.authInfo.isAuth) {\n        this.$store.dispatch('moveToMaps');\n        this.$emit('setShowAuthFlag', false);\n      } else {\n        try {\n          await this.googleSignIn();\n          this.$emit('setShowAuthFlag', false);\n          this.$store.dispatch('moveToMaps');\n        } catch (e) {\n          console.log(e);\n          if (e.error) {\n            //인증화면 닫은경우\n            if (e.error === 'popup_closed_by_user') {\n              this.setError({\n                message: '사용자에 의해 gmail 인증이 취소됐습니다.',\n                type: 'browser',\n              });\n            } else {\n              this.setError({\n                message: e.error,\n                type: 'browser',\n              });\n            }\n          } else {\n            this.setError({\n              message:\n                '사용자인증 중 알 수 없는 문제가 발생했습니다. 잠시후 다시 시도바랍니다.',\n              type: 'critical',\n            });\n          }\n        }\n      }\n    },\n    //직접입력한 이메일로 인증\n    async fncDirAuth() {\n      if (this.dirEmail === '') {\n        this.dirStatus = '이메일을 입력해주세요';\n        return;\n      }\n\n      if (this.dirName === '') {\n        this.dirStatus = '이름을 입력해주세요';\n        return;\n      }\n\n      if (emailRegExp.test(this.dirEmail)) {\n        sendEmailAuth(this.dirEmail, this.dirName);\n        this.dirStatus = '입력하신 이메일로 인증메일을 전송했습니다';\n        document.querySelector('.direct-btn').style.display = 'none';\n        setTimeout(() => {\n          document.querySelector('.direct-btn').style.display = 'block';\n          this.dirStatus = '';\n        }, 3000);\n      } else {\n        this.dirStatus = '이메일 형식을 다시 확인해주세요';\n      }\n    },\n    fncShowDirAuth() {\n      const $target = document.querySelector('.auth-footer');\n      const $directInputWrapper = document.querySelector(\n        '.direct-input-wrapper'\n      );\n      if (!this.dirFlag) {\n        gsap.to($target, {\n          duration: 0.2,\n          height: '50%',\n        });\n        gsap.to($directInputWrapper, {\n          duration: 0.1,\n          display: 'block',\n        });\n      } else {\n        gsap.to($target, {\n          duration: 0.2,\n          height: '10%',\n        });\n        gsap.to($directInputWrapper, {\n          duration: 0.1,\n          display: 'none',\n        });\n      }\n      this.dirFlag = !this.dirFlag;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\n.auth {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  min-height: 700px;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 100;\n  padding-left: 15%;\n  padding-right: 15%;\n  padding-top: 50px;\n  font-size: 2em;\n  color: var(--fontColor);\n  font-weight: bold;\n}\n\n.auth .auth-header {\n  position: relative;\n  width: 100%;\n  height: 10%;\n}\n\n.auth .auth-body {\n  position: relative;\n  width: 100%;\n  height: 30%;\n  background-color: var(--backgroundColor);\n  border-top-left-radius: 15px;\n  border-top-right-radius: 15px;\n  padding-top: 30px;\n  padding-bottom: 5%;\n}\n\n.auth-body > .auth-list {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  top: 30px;\n}\n.auth-body > .close {\n  position: absolute;\n  right: 30px;\n  font-size: 0.5em;\n}\n\n.auth-body .company {\n  position: relative;\n  width: 80%;\n  background-color: var(--objectColor);\n  left: 50%;\n  margin-left: calc(80% / -2);\n  padding-top: 10px;\n  padding-bottom: 10px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 15px;\n}\n.company > .title {\n  position: relative;\n  font-size: 0.8em;\n}\n\n.company > .logo {\n  position: relative;\n  width: 1.5em;\n  height: 1.5em;\n  margin-right: 2%;\n}\n\n.auth .auth-footer {\n  position: relative;\n  width: 100%;\n  height: 10%;\n  border-bottom-left-radius: 15px;\n  border-bottom-right-radius: 15px;\n  background-color: var(--backgroundColor);\n}\n\n.auth-footer > .auth-direct {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.auth-footer > .auth-direct > .direct-title-wrapper {\n  position: relative;\n  width: 50%;\n  height: 30px;\n  left: 50%;\n  margin-left: calc(50% / -2);\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.direct-title-wrapper > .title {\n  font-size: 0.5em;\n}\n\n.auth-footer > .auth-direct > .direct-input-wrapper {\n  display: none;\n}\n\n.auth-direct > .direct-input-wrapper > .direct-input {\n  position: relative;\n  width: 90%;\n  height: 40px;\n  left: 50%;\n  margin-left: calc(90% / -2);\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--objectColor);\n  border-radius: 15px;\n  top: 10px;\n}\n.auth-direct > .direct-input-wrapper > .direct-text {\n  position: relative;\n  width: 90%;\n  height: 20px;\n  left: 50%;\n  margin-left: calc(90% / -2);\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.5em;\n  top: 5px;\n}\n\n.direct-input > input {\n  padding-left: 5%;\n  width: 80%;\n  height: 100%;\n  background-color: var(--objectColor);\n  color: var(--fontColor);\n  font-weight: lighter;\n  font-size: 0.8em;\n}\n\n.direct-input > input:focus {\n  outline: none;\n}\n.auth-direct > .direct-input-wrapper > .direct-btn {\n  position: relative;\n  padding: 5px;\n  width: 80px;\n  font-size: 0.8em;\n  background-color: var(--objectColor);\n  border-radius: 15px;\n  left: 50%;\n  margin-left: calc(80px / -2);\n  text-align: center;\n}\n\n@media only screen and (max-width: 414px) {\n  .auth {\n    font-size: 1.5em;\n  }\n  .company > .title {\n    font-size: 0.4em;\n  }\n  .direct-title-wrapper > .title {\n    font-size: 0.4em;\n  }\n  .direct-input > input {\n    font-size: 0.4em;\n  }\n  .auth-direct > .direct-input-wrapper > .direct-btn {\n    font-size: 0.4em;\n  }\n  .auth-direct > .direct-input-wrapper > .direct-text {\n    font-size: 0.4em;\n  }\n  .company > .logo {\n    width: 1em;\n    height: 1em;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.vue?vue&type=template&id=47ce6db4&scoped=true&\"\nimport script from \"./Auth.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Auth.vue?vue&type=style&index=0&id=47ce6db4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47ce6db4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home-main\">\n    <div class=\"home-header\">\n      <!-- <div class=\"home-header-btn-wrapper\">\n        <div class=\"button\">등록하기</div>\n        <div class=\"button\">로그아웃</div>\n      </div> -->\n      <div class=\"home-header-title\">SEASHEPHERD_KOREA</div>\n    </div>\n    <div class=\"home-body\" @click=\"click\">\n      <div class=\"home-cover\">\n        <div v-show=\"viewIdx === 0\" class=\"home-cover-content\" id=\"content0\">\n          <div class=\"two\">시 셰퍼드 컨저베이션 소사이어티는</div>\n          <div class=\"three\">해양생물 보호를 위해 해양쓰레기를 수거합니다.</div>\n        </div>\n        <div v-show=\"viewIdx === 1\" class=\"home-cover-content\" id=\"content1\">\n          <div class=\"one\">{{ today }} 까지 해양청소에 참여한 사람수</div>\n          <div class=\"two\" v-if=\"viewIdx === 1\">\n            <animated-number\n              :value=\"231\"\n              :duration=\"1000\"\n              :formatValue=\"menFormat\"\n            ></animated-number>\n          </div>\n          <div class=\"three\">청소를 통해 수거된 쓰레기의 무게</div>\n          <div class=\"four\" v-if=\"viewIdx === 1\">\n            <animated-number\n              :value=\"5000\"\n              :duration=\"1000\"\n              :formatValue=\"kiloFormat\"\n            ></animated-number>\n          </div>\n        </div>\n        <div v-show=\"viewIdx === 2\" class=\"home-cover-content\" id=\"content2\">\n          <div class=\"two\">환경을 위한 행동을 모두에게 공유해주세요.</div>\n          <div class=\"button\" @click=\"regist\">해양청소 등록하기</div>\n          <div class=\"button\" v-show=\"authInfo.isAuth\" @click=\"logOut\">\n            로그아웃\n          </div>\n        </div>\n      </div>\n      <div class=\"home-content\"></div>\n    </div>\n    <auth v-show=\"showAuth\" @setShowAuthFlag=\"setShowAuthFlag\"></auth>\n  </div>\n</template>\n\n<script>\nimport { ScatterplotLayer } from '@deck.gl/layers';\nimport { GoogleMapsOverlay } from '@deck.gl/google-maps';\nimport mapStyle from '../assets/style/map-style.js';\nimport { mapActions, mapState, mapGetters } from 'vuex';\nimport AnimatedNumber from 'animated-number-vue';\nimport Auth from '../components/Auth.vue';\nimport { authWithEmailLink, signOutEmailAuth } from '../util/firebase.js';\nimport gsap from 'gsap';\n\nexport default {\n  name: 'ReadHome',\n  components: {\n    AnimatedNumber,\n    Auth,\n  },\n  computed: {\n    ...mapGetters({\n      eventMarkerData: 'cleanEventStore/EventMarkerData',\n      authInfo: 'authStore/AuthInfo',\n    }),\n    ...mapState(['currentPosition']),\n  },\n  data: function () {\n    return {\n      map: '',\n      viewIdx: 0,\n      today: new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\n        .toISOString()\n        .substring(0, 10),\n      showAuth: false,\n      interval: null,\n    };\n  },\n  methods: {\n    ...mapActions({\n      setCurPosition: 'setCurPosition',\n      setError: 'setError',\n      getEventMarkers: 'cleanEventStore/getEventMarkers',\n      moveToMap: 'moveToMaps',\n      googleSignOut: 'authStore/googleSignOut',\n      setAuthInfo: 'authStore/setAuthInfo',\n      checkDirAuthLink: 'authStore/checkDirAuthLink',\n      loadGoogleAuthClient: 'authStore/loadGoogleAuthClient',\n      loadDirAuthClient: 'authStore/loadDirAuthClient',\n    }),\n    setShowAuthFlag(flag) {\n      this.showAuth = flag;\n    },\n    click(event) {\n      clearInterval(this.interval);\n      if ([...event.target.classList].includes('button')) {\n        return;\n      }\n      if (this.viewIdx < 2) {\n        this.viewIdx++;\n      } else {\n        this.viewIdx = 0;\n      }\n      const $homeCoverContent = document.querySelector(\n        `#content${this.viewIdx}`\n      );\n      $homeCoverContent.style.transfrom = 'translateY(-60px)';\n      $homeCoverContent.style.opacity = 0;\n      gsap.to($homeCoverContent, {\n        duration: 2,\n        y: 0,\n        opacity: 1,\n      });\n    },\n    swipe(dir) {\n      if (dir === 'Up') {\n        if (this.viewIdx < 2) {\n          this.viewIdx++;\n        }\n      } else {\n        if (this.viewIdx > 0) {\n          this.viewIdx--;\n        }\n      }\n      const $homeCoverContent = document.querySelector(\n        `#content${this.viewIdx}`\n      );\n      $homeCoverContent.style.transfrom = 'translateY(-60px)';\n      $homeCoverContent.style.opacity = 0;\n      gsap.to($homeCoverContent, {\n        duration: 2,\n        y: 0,\n        opacity: 1,\n      });\n    },\n    menFormat(value) {\n      return `${`${Number(value).toFixed(0)}`\n        .toString()\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')} 명`;\n    },\n    kiloFormat(value) {\n      return `${`${Number(value).toFixed(0)}`\n        .toString()\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')} 킬로그램`;\n    },\n    initMap() {\n      //지도 설정\n      const mapOptions = {\n        center: this.currentPosition,\n        zoom: 6,\n        styles: mapStyle,\n      };\n      //지도 바인딩할 돔객체\n      const mapDiv = document.querySelector('.home-content');\n      //지도 생성\n      try {\n        this.map = new google.maps.Map(mapDiv, mapOptions);\n        //시각화 지도 생성\n        const layerOptions = {\n          id: 'scatterplot',\n          data: this.eventMarkerData,\n          getPosition: d => [\n            parseFloat(d.position.lng),\n            parseFloat(d.position.lat),\n          ],\n          getRadius: d => parseInt(d.scale),\n          stroked: true,\n          getFillColor: [255, 133, 27],\n          getLineColor: [255, 38, 27],\n          radiusMinPixels: 5,\n          radiusMaxPixels: 50,\n        };\n\n        const scatterplotLayer = new ScatterplotLayer(layerOptions);\n        const googleMapsOverlay = new GoogleMapsOverlay({\n          layers: [scatterplotLayer],\n        });\n        googleMapsOverlay.setMap(this.map);\n      } catch (e) {\n        throw new Error();\n      }\n    },\n    regist() {\n      if (this.authInfo.isAuth) {\n        this.moveToMap();\n      } else {\n        this.showAuth = true;\n      }\n    },\n    async logOut() {\n      if (this.authInfo.type === 'gmail') {\n        await this.googleSignOut();\n      } else {\n        signOutEmailAuth();\n      }\n      this.setAuthInfo({\n        fullName: '',\n        mail: '',\n        isAuth: false,\n        type: '',\n      });\n    },\n  },\n  created() {},\n  async mounted() {\n    const $title = document.querySelector('.home-header-title');\n    $title.style.transfrom = 'translateY(-60px)';\n    $title.style.opacity = 0;\n    gsap.to($title, {\n      duration: 2,\n      y: 0,\n      opacity: 1,\n    });\n    let loader = this.$loading.show({\n      // Optional parameters\n      isFullPage: true,\n      canCancel: false,\n      onCancel: null,\n      color: '#ffffff',\n      backgroundColor: '#000000',\n      opacity: 0.5,\n    });\n    //현재위치\n\n    try {\n      //직접입력한 이메일링크를 통해 들어온 상태인지 확인\n      const isDirAuth = await this.checkDirAuthLink();\n      //링크를 통했으면\n      if (isDirAuth) {\n        const email = window.localStorage.getItem('emailForSignIn');\n        const name = window.localStorage.getItem('nameForSignIn');\n        await this.setAuthInfo({\n          fullName: name,\n          mail: email,\n          isAuth: true,\n          type: 'dir',\n        });\n        window.localStorage.removeItem('emailForSignIn');\n        window.localStorage.removeItem('nameForSignIn');\n        //사용자 정보 획득후 이벤트등록 화면으로 이동\n        this.$store.dispatch('moveToMaps');\n        return;\n        //그냥 들어온상태면\n      } else {\n        await this.loadGoogleAuthClient();\n        await this.loadDirAuthClient();\n        //console.log(`google`, await this.loadGoogleAuthClient());\n        //this.loadGoogleAuthClient();\n        // if (isGoogleAuth) {\n        //   this.updateGoogleAuthStatus();\n        // }\n      }\n      //현재위치 조회\n      await this.setCurPosition();\n      //마커데이터 조회\n      await this.getEventMarkers();\n      //지도정보 초기화\n      this.initMap();\n    } catch (e) {\n      console.log(e);\n      const message = e.message;\n      this.setError({\n        message,\n        type: 'critical',\n      });\n      return;\n    } finally {\n      loader.hide();\n    }\n    //지도로드 후 화면에 보여주기 animation\n    const $cover = document.querySelector('.home-cover');\n    setTimeout(() => {\n      gsap.to($cover, {\n        duration: 1,\n        backgroundColor: 'rgba(0, 0, 0, 0)',\n      });\n    }, 2000);\n    // 텍스트 보여주기 animation\n    const $homeCoverContent = document.querySelector('.home-cover-content');\n    $homeCoverContent.style.transfrom = 'translateY(-60px)';\n    $homeCoverContent.style.opacity = 0;\n    gsap.to($homeCoverContent, {\n      duration: 1,\n      y: 0,\n      opacity: 1,\n    });\n    //5초후 텍스트 변경\n    this.interval = setInterval(() => {\n      if (this.viewIdx < 2) {\n        this.viewIdx++;\n        const $homeCoverContent = document.querySelector(\n          `#content${this.viewIdx}`\n        );\n        $homeCoverContent.style.transfrom = 'translateY(-60px)';\n        $homeCoverContent.style.opacity = 0;\n        gsap.to($homeCoverContent, {\n          duration: 5,\n          y: 0,\n          opacity: 1,\n        });\n      } else {\n        clearInterval(this.interval);\n      }\n    }, 4000);\n  },\n};\n</script>\n<style>\n/* 구글맵 기본요소 안보이기 start*/\n.gmnoprint {\n  display: none !important;\n}\n.gm-control-active {\n  display: none !important;\n}\n.home-main {\n  /* 1em : 16px */\n  width: 100%;\n  min-height: 700px;\n  height: 100%;\n  overflow: hidden;\n  background-color: black;\n  color: var(--fontColor);\n  font-size: 1.2em;\n}\n\n.home-main > .home-header {\n  position: absolute;\n  top: 0;\n  height: 30%;\n  width: 100%;\n  z-index: 2;\n}\n\n.home-main > .home-header > .home-header-btn-wrapper {\n  position: relative;\n  top: 20%;\n  left: 50%;\n  display: flex;\n  width: 50%;\n}\n.home-header-btn-wrapper > .button {\n  position: relative;\n  background-color: var(--objectColor);\n  width: 50%;\n  padding: 2%;\n  margin: 2%;\n  text-align: center;\n  border-radius: 10px;\n}\n.home-main > .home-header > .home-header-title {\n  position: relative;\n  top: 70%;\n  text-align: center;\n  font-weight: bold;\n  font-size: 1.5em;\n}\n\n.home-main > .home-body {\n  /* 1em : 16px */\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  min-height: 500px;\n  background-color: rgba(0, 0, 0, 1);\n}\n.home-main > .home-body > .home-cover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 1);\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.home-main > .home-body > .home-content {\n  position: relative;\n  height: 100%;\n}\n\n.home-body > .home-cover > .home-cover-content {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  opacity: 0;\n}\n\n.home-body > .home-cover > .home-cover-content > .one {\n  position: relative;\n  top: 40%;\n  text-align: center;\n}\n\n.home-body > .home-cover > .home-cover-content > .two {\n  position: relative;\n  top: 45%;\n  text-align: center;\n}\n.home-body > .home-cover > .home-cover-content > .three {\n  position: relative;\n  top: 55%;\n  text-align: center;\n}\n.home-body > .home-cover > .home-cover-content > .four {\n  position: relative;\n  top: 60%;\n  text-align: center;\n}\n.home-body > .home-cover > .home-cover-content > .button {\n  position: relative;\n  background-color: var(--objectColor);\n  width: 250px;\n  border-radius: 0.5em;\n  padding: 2% 2%;\n  top: 60%;\n  left: 50%;\n  margin-left: calc(250px / -2);\n  text-align: center;\n  cursor: pointer;\n  margin-bottom: 20px;\n}\n.home-body > .home-cover > .home-cover-content > .button:hover {\n  background-color: rgba(43, 39, 39, 0.5);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RealHome.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RealHome.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RealHome.vue?vue&type=template&id=bd07b586&\"\nimport script from \"./RealHome.vue?vue&type=script&lang=js&\"\nexport * from \"./RealHome.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RealHome.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  const originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get(...params) {\n    const pname = params[0];\n\n    if (!(pname in gl.state.cache)) {\n      return originalGetterFunc(...params);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc(...params);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: `${functionName}-from-cache`,\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  const originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set(...params) {\n    const {\n      valueChanged,\n      oldValue\n    } = setter(gl.state._updateCache, ...params);\n\n    if (valueChanged) {\n      originalSetterFunc(...params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: `${functionName}-to-cache`,\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  const originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nclass GLState {\n  constructor(gl, {\n    copyState = false,\n    log = () => {}\n  } = {}) {\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  push(values = {}) {\n    this.stateStack.push({});\n  }\n\n  pop() {\n    assert(this.stateStack.length > 0);\n    const oldValues = this.stateStack[this.stateStack.length - 1];\n    setParameters(this.gl, oldValues);\n    this.stateStack.pop();\n  }\n\n  _updateCache(values) {\n    let valueChanged = false;\n    let oldValue;\n    const oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n    for (const key in values) {\n      assert(key !== undefined);\n      const value = values[key];\n      const cached = this.cache[key];\n\n      if (!deepArrayEqual(value, cached)) {\n        valueChanged = true;\n        oldValue = cached;\n\n        if (oldValues && !(key in oldValues)) {\n          oldValues[key] = cached;\n        }\n\n        this.cache[key] = value;\n      }\n    }\n\n    return {\n      valueChanged,\n      oldValue\n    };\n  }\n\n}\n\nexport function trackContextState(gl, options = {}) {\n  const {\n    enable = true,\n    copyState\n  } = options;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    const global_ = typeof global !== 'undefined' ? global : window;\n    const {\n      polyfillContext\n    } = global_;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState\n    });\n    installProgramSpy(gl);\n\n    for (const key in GL_HOOKED_SETTERS) {\n      const setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map"],"sourceRoot":""}